var sb=Object.defineProperty;var ab=(e,t,n)=>t in e?sb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ri=(e,t,n)=>ab(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mv={exports:{}},wu={},Bv={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=Symbol.for("react.element"),lb=Symbol.for("react.portal"),ub=Symbol.for("react.fragment"),cb=Symbol.for("react.strict_mode"),fb=Symbol.for("react.profiler"),db=Symbol.for("react.provider"),pb=Symbol.for("react.context"),hb=Symbol.for("react.forward_ref"),mb=Symbol.for("react.suspense"),yb=Symbol.for("react.memo"),vb=Symbol.for("react.lazy"),vm=Symbol.iterator;function gb(e){return e===null||typeof e!="object"?null:(e=vm&&e[vm]||e["@@iterator"],typeof e=="function"?e:null)}var zv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$v=Object.assign,Lv={};function _o(e,t,n){this.props=e,this.context=t,this.refs=Lv,this.updater=n||zv}_o.prototype.isReactComponent={};_o.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fv(){}Fv.prototype=_o.prototype;function ip(e,t,n){this.props=e,this.context=t,this.refs=Lv,this.updater=n||zv}var op=ip.prototype=new Fv;op.constructor=ip;$v(op,_o.prototype);op.isPureReactComponent=!0;var gm=Array.isArray,Uv=Object.prototype.hasOwnProperty,sp={current:null},Kv={key:!0,ref:!0,__self:!0,__source:!0};function Wv(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Uv.call(t,r)&&!Kv.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:na,type:e,key:o,ref:s,props:i,_owner:sp.current}}function xb(e,t){return{$$typeof:na,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ap(e){return typeof e=="object"&&e!==null&&e.$$typeof===na}function Sb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xm=/\/+/g;function Mc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sb(""+e.key):t.toString(36)}function fl(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case na:case lb:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Mc(s,0):r,gm(i)?(n="",e!=null&&(n=e.replace(xm,"$&/")+"/"),fl(i,t,n,"",function(f){return f})):i!=null&&(ap(i)&&(i=xb(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(xm,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",gm(e))for(var l=0;l<e.length;l++){o=e[l];var u=r+Mc(o,l);s+=fl(o,t,n,u,i)}else if(u=gb(e),typeof u=="function")for(e=u.call(e),l=0;!(o=e.next()).done;)o=o.value,u=r+Mc(o,l++),s+=fl(o,t,n,u,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ua(e,t,n){if(e==null)return e;var r=[],i=0;return fl(e,r,"","",function(o){return t.call(n,o,i++)}),r}function wb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pt={current:null},dl={transition:null},bb={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:dl,ReactCurrentOwner:sp};function qv(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Ua,forEach:function(e,t,n){Ua(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ua(e,function(){t++}),t},toArray:function(e){return Ua(e,function(t){return t})||[]},only:function(e){if(!ap(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=_o;ye.Fragment=ub;ye.Profiler=fb;ye.PureComponent=ip;ye.StrictMode=cb;ye.Suspense=mb;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bb;ye.act=qv;ye.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=$v({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=sp.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Uv.call(t,u)&&!Kv.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:na,type:e.type,key:i,ref:o,props:r,_owner:s}};ye.createContext=function(e){return e={$$typeof:pb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:db,_context:e},e.Consumer=e};ye.createElement=Wv;ye.createFactory=function(e){var t=Wv.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:hb,render:e}};ye.isValidElement=ap;ye.lazy=function(e){return{$$typeof:vb,_payload:{_status:-1,_result:e},_init:wb}};ye.memo=function(e,t){return{$$typeof:yb,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=dl.transition;dl.transition={};try{e()}finally{dl.transition=t}};ye.unstable_act=qv;ye.useCallback=function(e,t){return Pt.current.useCallback(e,t)};ye.useContext=function(e){return Pt.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return Pt.current.useDeferredValue(e)};ye.useEffect=function(e,t){return Pt.current.useEffect(e,t)};ye.useId=function(){return Pt.current.useId()};ye.useImperativeHandle=function(e,t,n){return Pt.current.useImperativeHandle(e,t,n)};ye.useInsertionEffect=function(e,t){return Pt.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return Pt.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return Pt.current.useMemo(e,t)};ye.useReducer=function(e,t,n){return Pt.current.useReducer(e,t,n)};ye.useRef=function(e){return Pt.current.useRef(e)};ye.useState=function(e){return Pt.current.useState(e)};ye.useSyncExternalStore=function(e,t,n){return Pt.current.useSyncExternalStore(e,t,n)};ye.useTransition=function(){return Pt.current.useTransition()};ye.version="18.3.1";Bv.exports=ye;var ue=Bv.exports;const _b=Nv(ue);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb=ue,Eb=Symbol.for("react.element"),Cb=Symbol.for("react.fragment"),Tb=Object.prototype.hasOwnProperty,jb=kb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pb={key:!0,ref:!0,__self:!0,__source:!0};function Vv(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Tb.call(t,r)&&!Pb.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Eb,type:e,key:o,ref:s,props:i,_owner:jb.current}}wu.Fragment=Cb;wu.jsx=Vv;wu.jsxs=Vv;Mv.exports=wu;var d=Mv.exports,Df={},Hv={exports:{}},Gt={},Qv={exports:{}},Gv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ee,ae){var ce=ee.length;ee.push(ae);e:for(;0<ce;){var we=ce-1>>>1,Ke=ee[we];if(0<i(Ke,ae))ee[we]=ae,ee[ce]=Ke,ce=we;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ae=ee[0],ce=ee.pop();if(ce!==ae){ee[0]=ce;e:for(var we=0,Ke=ee.length,Oe=Ke>>>1;we<Oe;){var We=2*(we+1)-1,zt=ee[We],ht=We+1,ir=ee[ht];if(0>i(zt,ce))ht<Ke&&0>i(ir,zt)?(ee[we]=ir,ee[ht]=ce,we=ht):(ee[we]=zt,ee[We]=ce,we=We);else if(ht<Ke&&0>i(ir,ce))ee[we]=ir,ee[ht]=ce,we=ht;else break e}}return ae}function i(ee,ae){var ce=ee.sortIndex-ae.sortIndex;return ce!==0?ce:ee.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],f=[],h=1,y=null,g=3,S=!1,E=!1,P=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ee){for(var ae=n(f);ae!==null;){if(ae.callback===null)r(f);else if(ae.startTime<=ee)r(f),ae.sortIndex=ae.expirationTime,t(u,ae);else break;ae=n(f)}}function C(ee){if(P=!1,k(ee),!E)if(n(u)!==null)E=!0,Rn(T);else{var ae=n(f);ae!==null&&Lr(C,ae.startTime-ee)}}function T(ee,ae){E=!1,P&&(P=!1,w(q),q=-1),S=!0;var ce=g;try{for(k(ae),y=n(u);y!==null&&(!(y.expirationTime>ae)||ee&&!Ce());){var we=y.callback;if(typeof we=="function"){y.callback=null,g=y.priorityLevel;var Ke=we(y.expirationTime<=ae);ae=e.unstable_now(),typeof Ke=="function"?y.callback=Ke:y===n(u)&&r(u),k(ae)}else r(u);y=n(u)}if(y!==null)var Oe=!0;else{var We=n(f);We!==null&&Lr(C,We.startTime-ae),Oe=!1}return Oe}finally{y=null,g=ce,S=!1}}var z=!1,U=null,q=-1,X=5,oe=-1;function Ce(){return!(e.unstable_now()-oe<X)}function Ae(){if(U!==null){var ee=e.unstable_now();oe=ee;var ae=!0;try{ae=U(!0,ee)}finally{ae?ke():(z=!1,U=null)}}else z=!1}var ke;if(typeof b=="function")ke=function(){b(Ae)};else if(typeof MessageChannel<"u"){var bn=new MessageChannel,kt=bn.port2;bn.port1.onmessage=Ae,ke=function(){kt.postMessage(null)}}else ke=function(){A(Ae,0)};function Rn(ee){U=ee,z||(z=!0,ke())}function Lr(ee,ae){q=A(function(){ee(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){E||S||(E=!0,Rn(T))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(ee){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var ce=g;g=ae;try{return ee()}finally{g=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ce=g;g=ee;try{return ae()}finally{g=ce}},e.unstable_scheduleCallback=function(ee,ae,ce){var we=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?we+ce:we):ce=we,ee){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ce+Ke,ee={id:h++,callback:ae,priorityLevel:ee,startTime:ce,expirationTime:Ke,sortIndex:-1},ce>we?(ee.sortIndex=ce,t(f,ee),n(u)===null&&ee===n(f)&&(P?(w(q),q=-1):P=!0,Lr(C,ce-we))):(ee.sortIndex=Ke,t(u,ee),E||S||(E=!0,Rn(T))),ee},e.unstable_shouldYield=Ce,e.unstable_wrapCallback=function(ee){var ae=g;return function(){var ce=g;g=ae;try{return ee.apply(this,arguments)}finally{g=ce}}}})(Gv);Qv.exports=Gv;var Ob=Qv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib=ue,Qt=Ob;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yv=new Set,Cs={};function xi(e,t){io(e,t),io(e+"Capture",t)}function io(e,t){for(Cs[e]=t,e=0;e<t.length;e++)Yv.add(t[e])}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,Rb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sm={},wm={};function Db(e){return Af.call(wm,e)?!0:Af.call(Sm,e)?!1:Rb.test(e)?wm[e]=!0:(Sm[e]=!0,!1)}function Ab(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Nb(e,t,n,r){if(t===null||typeof t>"u"||Ab(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ft[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ft[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ft[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ft[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ft[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ft[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ft[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ft[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ft[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var lp=/[\-:]([a-z])/g;function up(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lp,up);ft[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lp,up);ft[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lp,up);ft[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ft[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ft[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function cp(e,t,n,r){var i=ft.hasOwnProperty(t)?ft[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Nb(t,n,i,r)&&(n=null),r||i===null?Db(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var tr=Ib.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ka=Symbol.for("react.element"),Mi=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),fp=Symbol.for("react.strict_mode"),Nf=Symbol.for("react.profiler"),Jv=Symbol.for("react.provider"),Xv=Symbol.for("react.context"),dp=Symbol.for("react.forward_ref"),Mf=Symbol.for("react.suspense"),Bf=Symbol.for("react.suspense_list"),pp=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),Zv=Symbol.for("react.offscreen"),bm=Symbol.iterator;function Ho(e){return e===null||typeof e!="object"?null:(e=bm&&e[bm]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,Bc;function rs(e){if(Bc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bc=t&&t[1]||""}return`
`+Bc+e}var zc=!1;function $c(e,t){if(!e||zc)return"";zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=l);break}}}finally{zc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?rs(e):""}function Mb(e){switch(e.tag){case 5:return rs(e.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 2:case 15:return e=$c(e.type,!1),e;case 11:return e=$c(e.type.render,!1),e;case 1:return e=$c(e.type,!0),e;default:return""}}function zf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bi:return"Fragment";case Mi:return"Portal";case Nf:return"Profiler";case fp:return"StrictMode";case Mf:return"Suspense";case Bf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xv:return(e.displayName||"Context")+".Consumer";case Jv:return(e._context.displayName||"Context")+".Provider";case dp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pp:return t=e.displayName||null,t!==null?t:zf(e.type)||"Memo";case hr:t=e._payload,e=e._init;try{return zf(e(t))}catch{}}return null}function Bb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zf(t);case 8:return t===fp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Or(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zb(e){var t=eg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wa(e){e._valueTracker||(e._valueTracker=zb(e))}function tg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=eg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Dl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $f(e,t){var n=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _m(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Or(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ng(e,t){t=t.checked,t!=null&&cp(e,"checked",t,!1)}function Lf(e,t){ng(e,t);var n=Or(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ff(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ff(e,t.type,Or(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function km(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ff(e,t,n){(t!=="number"||Dl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var is=Array.isArray;function Gi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Or(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Uf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Em(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(H(92));if(is(n)){if(1<n.length)throw Error(H(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Or(n)}}function rg(e,t){var n=Or(t.value),r=Or(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Cm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ig(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ig(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qa,og=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ts(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$b=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(e){$b.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cs[t]=cs[e]})});function sg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cs.hasOwnProperty(e)&&cs[e]?(""+t).trim():t+"px"}function ag(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sg(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Lb=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wf(e,t){if(t){if(Lb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function qf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vf=null;function hp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hf=null,Yi=null,Ji=null;function Tm(e){if(e=oa(e)){if(typeof Hf!="function")throw Error(H(280));var t=e.stateNode;t&&(t=Cu(t),Hf(e.stateNode,e.type,t))}}function lg(e){Yi?Ji?Ji.push(e):Ji=[e]:Yi=e}function ug(){if(Yi){var e=Yi,t=Ji;if(Ji=Yi=null,Tm(e),t)for(e=0;e<t.length;e++)Tm(t[e])}}function cg(e,t){return e(t)}function fg(){}var Lc=!1;function dg(e,t,n){if(Lc)return e(t,n);Lc=!0;try{return cg(e,t,n)}finally{Lc=!1,(Yi!==null||Ji!==null)&&(fg(),ug())}}function js(e,t){var n=e.stateNode;if(n===null)return null;var r=Cu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(H(231,t,typeof n));return n}var Qf=!1;if(Vn)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){Qf=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{Qf=!1}function Fb(e,t,n,r,i,o,s,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(h){this.onError(h)}}var fs=!1,Al=null,Nl=!1,Gf=null,Ub={onError:function(e){fs=!0,Al=e}};function Kb(e,t,n,r,i,o,s,l,u){fs=!1,Al=null,Fb.apply(Ub,arguments)}function Wb(e,t,n,r,i,o,s,l,u){if(Kb.apply(this,arguments),fs){if(fs){var f=Al;fs=!1,Al=null}else throw Error(H(198));Nl||(Nl=!0,Gf=f)}}function Si(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function pg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jm(e){if(Si(e)!==e)throw Error(H(188))}function qb(e){var t=e.alternate;if(!t){if(t=Si(e),t===null)throw Error(H(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return jm(i),e;if(o===r)return jm(i),t;o=o.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?e:t}function hg(e){return e=qb(e),e!==null?mg(e):null}function mg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mg(e);if(t!==null)return t;e=e.sibling}return null}var yg=Qt.unstable_scheduleCallback,Pm=Qt.unstable_cancelCallback,Vb=Qt.unstable_shouldYield,Hb=Qt.unstable_requestPaint,Ge=Qt.unstable_now,Qb=Qt.unstable_getCurrentPriorityLevel,mp=Qt.unstable_ImmediatePriority,vg=Qt.unstable_UserBlockingPriority,Ml=Qt.unstable_NormalPriority,Gb=Qt.unstable_LowPriority,gg=Qt.unstable_IdlePriority,bu=null,Pn=null;function Yb(e){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(bu,e,void 0,(e.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Zb,Jb=Math.log,Xb=Math.LN2;function Zb(e){return e>>>=0,e===0?32:31-(Jb(e)/Xb|0)|0}var Va=64,Ha=4194304;function os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=os(l):(o&=s,o!==0&&(r=os(o)))}else s=n&~i,s!==0?r=os(s):o!==0&&(r=os(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-gn(t),i=1<<n,r|=e[n],t&=~i;return r}function e1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t1(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-gn(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=e1(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}function Yf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xg(){var e=Va;return Va<<=1,!(Va&4194240)&&(Va=64),e}function Fc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ra(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gn(t),e[t]=n}function n1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-gn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function yp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ee=0;function Sg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wg,vp,bg,_g,kg,Jf=!1,Qa=[],Sr=null,wr=null,br=null,Ps=new Map,Os=new Map,yr=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Om(e,t){switch(e){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(t.pointerId)}}function Go(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=oa(t),t!==null&&vp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function i1(e,t,n,r,i){switch(t){case"focusin":return Sr=Go(Sr,e,t,n,r,i),!0;case"dragenter":return wr=Go(wr,e,t,n,r,i),!0;case"mouseover":return br=Go(br,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ps.set(o,Go(Ps.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Os.set(o,Go(Os.get(o)||null,e,t,n,r,i)),!0}return!1}function Eg(e){var t=ni(e.target);if(t!==null){var n=Si(t);if(n!==null){if(t=n.tag,t===13){if(t=pg(n),t!==null){e.blockedOn=t,kg(e.priority,function(){bg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vf=r,n.target.dispatchEvent(r),Vf=null}else return t=oa(n),t!==null&&vp(t),e.blockedOn=n,!1;t.shift()}return!0}function Im(e,t,n){pl(e)&&n.delete(t)}function o1(){Jf=!1,Sr!==null&&pl(Sr)&&(Sr=null),wr!==null&&pl(wr)&&(wr=null),br!==null&&pl(br)&&(br=null),Ps.forEach(Im),Os.forEach(Im)}function Yo(e,t){e.blockedOn===t&&(e.blockedOn=null,Jf||(Jf=!0,Qt.unstable_scheduleCallback(Qt.unstable_NormalPriority,o1)))}function Is(e){function t(i){return Yo(i,e)}if(0<Qa.length){Yo(Qa[0],e);for(var n=1;n<Qa.length;n++){var r=Qa[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Sr!==null&&Yo(Sr,e),wr!==null&&Yo(wr,e),br!==null&&Yo(br,e),Ps.forEach(t),Os.forEach(t),n=0;n<yr.length;n++)r=yr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)Eg(n),n.blockedOn===null&&yr.shift()}var Xi=tr.ReactCurrentBatchConfig,zl=!0;function s1(e,t,n,r){var i=Ee,o=Xi.transition;Xi.transition=null;try{Ee=1,gp(e,t,n,r)}finally{Ee=i,Xi.transition=o}}function a1(e,t,n,r){var i=Ee,o=Xi.transition;Xi.transition=null;try{Ee=4,gp(e,t,n,r)}finally{Ee=i,Xi.transition=o}}function gp(e,t,n,r){if(zl){var i=Xf(e,t,n,r);if(i===null)Jc(e,t,r,$l,n),Om(e,r);else if(i1(i,e,t,n,r))r.stopPropagation();else if(Om(e,r),t&4&&-1<r1.indexOf(e)){for(;i!==null;){var o=oa(i);if(o!==null&&wg(o),o=Xf(e,t,n,r),o===null&&Jc(e,t,r,$l,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Jc(e,t,r,null,n)}}var $l=null;function Xf(e,t,n,r){if($l=null,e=hp(r),e=ni(e),e!==null)if(t=Si(e),t===null)e=null;else if(n=t.tag,n===13){if(e=pg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $l=e,null}function Cg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qb()){case mp:return 1;case vg:return 4;case Ml:case Gb:return 16;case gg:return 536870912;default:return 16}default:return 16}}var gr=null,xp=null,hl=null;function Tg(){if(hl)return hl;var e,t=xp,n=t.length,r,i="value"in gr?gr.value:gr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return hl=i.slice(e,1<r?1-r:void 0)}function ml(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ga(){return!0}function Rm(){return!1}function Yt(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ga:Rm,this.isPropagationStopped=Rm,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),t}var ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sp=Yt(ko),ia=Ue({},ko,{view:0,detail:0}),l1=Yt(ia),Uc,Kc,Jo,_u=Ue({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jo&&(Jo&&e.type==="mousemove"?(Uc=e.screenX-Jo.screenX,Kc=e.screenY-Jo.screenY):Kc=Uc=0,Jo=e),Uc)},movementY:function(e){return"movementY"in e?e.movementY:Kc}}),Dm=Yt(_u),u1=Ue({},_u,{dataTransfer:0}),c1=Yt(u1),f1=Ue({},ia,{relatedTarget:0}),Wc=Yt(f1),d1=Ue({},ko,{animationName:0,elapsedTime:0,pseudoElement:0}),p1=Yt(d1),h1=Ue({},ko,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),m1=Yt(h1),y1=Ue({},ko,{data:0}),Am=Yt(y1),v1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=x1[e])?!!t[e]:!1}function wp(){return S1}var w1=Ue({},ia,{key:function(e){if(e.key){var t=v1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?g1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wp,charCode:function(e){return e.type==="keypress"?ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b1=Yt(w1),_1=Ue({},_u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=Yt(_1),k1=Ue({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wp}),E1=Yt(k1),C1=Ue({},ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),T1=Yt(C1),j1=Ue({},_u,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),P1=Yt(j1),O1=[9,13,27,32],bp=Vn&&"CompositionEvent"in window,ds=null;Vn&&"documentMode"in document&&(ds=document.documentMode);var I1=Vn&&"TextEvent"in window&&!ds,jg=Vn&&(!bp||ds&&8<ds&&11>=ds),Mm=" ",Bm=!1;function Pg(e,t){switch(e){case"keyup":return O1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Og(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zi=!1;function R1(e,t){switch(e){case"compositionend":return Og(t);case"keypress":return t.which!==32?null:(Bm=!0,Mm);case"textInput":return e=t.data,e===Mm&&Bm?null:e;default:return null}}function D1(e,t){if(zi)return e==="compositionend"||!bp&&Pg(e,t)?(e=Tg(),hl=xp=gr=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jg&&t.locale!=="ko"?null:t.data;default:return null}}var A1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!A1[e.type]:t==="textarea"}function Ig(e,t,n,r){lg(r),t=Ll(t,"onChange"),0<t.length&&(n=new Sp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ps=null,Rs=null;function N1(e){Ug(e,0)}function ku(e){var t=Fi(e);if(tg(t))return e}function M1(e,t){if(e==="change")return t}var Rg=!1;if(Vn){var qc;if(Vn){var Vc="oninput"in document;if(!Vc){var $m=document.createElement("div");$m.setAttribute("oninput","return;"),Vc=typeof $m.oninput=="function"}qc=Vc}else qc=!1;Rg=qc&&(!document.documentMode||9<document.documentMode)}function Lm(){ps&&(ps.detachEvent("onpropertychange",Dg),Rs=ps=null)}function Dg(e){if(e.propertyName==="value"&&ku(Rs)){var t=[];Ig(t,Rs,e,hp(e)),dg(N1,t)}}function B1(e,t,n){e==="focusin"?(Lm(),ps=t,Rs=n,ps.attachEvent("onpropertychange",Dg)):e==="focusout"&&Lm()}function z1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ku(Rs)}function $1(e,t){if(e==="click")return ku(t)}function L1(e,t){if(e==="input"||e==="change")return ku(t)}function F1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sn=typeof Object.is=="function"?Object.is:F1;function Ds(e,t){if(Sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Af.call(t,i)||!Sn(e[i],t[i]))return!1}return!0}function Fm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Um(e,t){var n=Fm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fm(n)}}function Ag(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ag(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ng(){for(var e=window,t=Dl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Dl(e.document)}return t}function _p(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function U1(e){var t=Ng(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ag(n.ownerDocument.documentElement,n)){if(r!==null&&_p(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Um(n,o);var s=Um(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K1=Vn&&"documentMode"in document&&11>=document.documentMode,$i=null,Zf=null,hs=null,ed=!1;function Km(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ed||$i==null||$i!==Dl(r)||(r=$i,"selectionStart"in r&&_p(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hs&&Ds(hs,r)||(hs=r,r=Ll(Zf,"onSelect"),0<r.length&&(t=new Sp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$i)))}function Ya(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Li={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionend:Ya("Transition","TransitionEnd")},Hc={},Mg={};Vn&&(Mg=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function Eu(e){if(Hc[e])return Hc[e];if(!Li[e])return e;var t=Li[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Mg)return Hc[e]=t[n];return e}var Bg=Eu("animationend"),zg=Eu("animationiteration"),$g=Eu("animationstart"),Lg=Eu("transitionend"),Fg=new Map,Wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Fg.set(e,t),xi(t,[e])}for(var Qc=0;Qc<Wm.length;Qc++){var Gc=Wm[Qc],W1=Gc.toLowerCase(),q1=Gc[0].toUpperCase()+Gc.slice(1);Nr(W1,"on"+q1)}Nr(Bg,"onAnimationEnd");Nr(zg,"onAnimationIteration");Nr($g,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(Lg,"onTransitionEnd");io("onMouseEnter",["mouseout","mouseover"]);io("onMouseLeave",["mouseout","mouseover"]);io("onPointerEnter",["pointerout","pointerover"]);io("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function qm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Wb(r,t,void 0,e),e.currentTarget=null}function Ug(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;qm(i,l,f),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,f=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;qm(i,l,f),o=u}}}if(Nl)throw e=Gf,Nl=!1,Gf=null,e}function Re(e,t){var n=t[od];n===void 0&&(n=t[od]=new Set);var r=e+"__bubble";n.has(r)||(Kg(t,e,2,!1),n.add(r))}function Yc(e,t,n){var r=0;t&&(r|=4),Kg(n,e,r,t)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function As(e){if(!e[Ja]){e[Ja]=!0,Yv.forEach(function(n){n!=="selectionchange"&&(V1.has(n)||Yc(n,!1,e),Yc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ja]||(t[Ja]=!0,Yc("selectionchange",!1,t))}}function Kg(e,t,n,r){switch(Cg(t)){case 1:var i=s1;break;case 4:i=a1;break;default:i=gp}n=i.bind(null,t,n,e),i=void 0,!Qf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Jc(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=ni(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}dg(function(){var f=o,h=hp(n),y=[];e:{var g=Fg.get(e);if(g!==void 0){var S=Sp,E=e;switch(e){case"keypress":if(ml(n)===0)break e;case"keydown":case"keyup":S=b1;break;case"focusin":E="focus",S=Wc;break;case"focusout":E="blur",S=Wc;break;case"beforeblur":case"afterblur":S=Wc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Dm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=c1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=E1;break;case Bg:case zg:case $g:S=p1;break;case Lg:S=T1;break;case"scroll":S=l1;break;case"wheel":S=P1;break;case"copy":case"cut":case"paste":S=m1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Nm}var P=(t&4)!==0,A=!P&&e==="scroll",w=P?g!==null?g+"Capture":null:g;P=[];for(var b=f,k;b!==null;){k=b;var C=k.stateNode;if(k.tag===5&&C!==null&&(k=C,w!==null&&(C=js(b,w),C!=null&&P.push(Ns(b,C,k)))),A)break;b=b.return}0<P.length&&(g=new S(g,E,null,n,h),y.push({event:g,listeners:P}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",g&&n!==Vf&&(E=n.relatedTarget||n.fromElement)&&(ni(E)||E[Hn]))break e;if((S||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,S?(E=n.relatedTarget||n.toElement,S=f,E=E?ni(E):null,E!==null&&(A=Si(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(S=null,E=f),S!==E)){if(P=Dm,C="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(P=Nm,C="onPointerLeave",w="onPointerEnter",b="pointer"),A=S==null?g:Fi(S),k=E==null?g:Fi(E),g=new P(C,b+"leave",S,n,h),g.target=A,g.relatedTarget=k,C=null,ni(h)===f&&(P=new P(w,b+"enter",E,n,h),P.target=k,P.relatedTarget=A,C=P),A=C,S&&E)t:{for(P=S,w=E,b=0,k=P;k;k=Di(k))b++;for(k=0,C=w;C;C=Di(C))k++;for(;0<b-k;)P=Di(P),b--;for(;0<k-b;)w=Di(w),k--;for(;b--;){if(P===w||w!==null&&P===w.alternate)break t;P=Di(P),w=Di(w)}P=null}else P=null;S!==null&&Vm(y,g,S,P,!1),E!==null&&A!==null&&Vm(y,A,E,P,!0)}}e:{if(g=f?Fi(f):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var T=M1;else if(zm(g))if(Rg)T=L1;else{T=z1;var z=B1}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(T=$1);if(T&&(T=T(e,f))){Ig(y,T,n,h);break e}z&&z(e,g,f),e==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&Ff(g,"number",g.value)}switch(z=f?Fi(f):window,e){case"focusin":(zm(z)||z.contentEditable==="true")&&($i=z,Zf=f,hs=null);break;case"focusout":hs=Zf=$i=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,Km(y,n,h);break;case"selectionchange":if(K1)break;case"keydown":case"keyup":Km(y,n,h)}var U;if(bp)e:{switch(e){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else zi?Pg(e,n)&&(q="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(q="onCompositionStart");q&&(jg&&n.locale!=="ko"&&(zi||q!=="onCompositionStart"?q==="onCompositionEnd"&&zi&&(U=Tg()):(gr=h,xp="value"in gr?gr.value:gr.textContent,zi=!0)),z=Ll(f,q),0<z.length&&(q=new Am(q,e,null,n,h),y.push({event:q,listeners:z}),U?q.data=U:(U=Og(n),U!==null&&(q.data=U)))),(U=I1?R1(e,n):D1(e,n))&&(f=Ll(f,"onBeforeInput"),0<f.length&&(h=new Am("onBeforeInput","beforeinput",null,n,h),y.push({event:h,listeners:f}),h.data=U))}Ug(y,t)})}function Ns(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ll(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=js(e,n),o!=null&&r.unshift(Ns(e,o,i)),o=js(e,t),o!=null&&r.push(Ns(e,o,i))),e=e.return}return r}function Di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vm(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=js(n,o),u!=null&&s.unshift(Ns(n,u,l))):i||(u=js(n,o),u!=null&&s.push(Ns(n,u,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var H1=/\r\n?/g,Q1=/\u0000|\uFFFD/g;function Hm(e){return(typeof e=="string"?e:""+e).replace(H1,`
`).replace(Q1,"")}function Xa(e,t,n){if(t=Hm(t),Hm(e)!==t&&n)throw Error(H(425))}function Fl(){}var td=null,nd=null;function rd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var id=typeof setTimeout=="function"?setTimeout:void 0,G1=typeof clearTimeout=="function"?clearTimeout:void 0,Qm=typeof Promise=="function"?Promise:void 0,Y1=typeof queueMicrotask=="function"?queueMicrotask:typeof Qm<"u"?function(e){return Qm.resolve(null).then(e).catch(J1)}:id;function J1(e){setTimeout(function(){throw e})}function Xc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Is(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Is(t)}function _r(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),jn="__reactFiber$"+Eo,Ms="__reactProps$"+Eo,Hn="__reactContainer$"+Eo,od="__reactEvents$"+Eo,X1="__reactListeners$"+Eo,Z1="__reactHandles$"+Eo;function ni(e){var t=e[jn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Hn]||n[jn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gm(e);e!==null;){if(n=e[jn])return n;e=Gm(e)}return t}e=n,n=e.parentNode}return null}function oa(e){return e=e[jn]||e[Hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function Cu(e){return e[Ms]||null}var sd=[],Ui=-1;function Mr(e){return{current:e}}function De(e){0>Ui||(e.current=sd[Ui],sd[Ui]=null,Ui--)}function Pe(e,t){Ui++,sd[Ui]=e.current,e.current=t}var Ir={},bt=Mr(Ir),Dt=Mr(!1),di=Ir;function oo(e,t){var n=e.type.contextTypes;if(!n)return Ir;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function At(e){return e=e.childContextTypes,e!=null}function Ul(){De(Dt),De(bt)}function Ym(e,t,n){if(bt.current!==Ir)throw Error(H(168));Pe(bt,t),Pe(Dt,n)}function Wg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(H(108,Bb(e)||"Unknown",i));return Ue({},n,r)}function Kl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ir,di=bt.current,Pe(bt,e),Pe(Dt,Dt.current),!0}function Jm(e,t,n){var r=e.stateNode;if(!r)throw Error(H(169));n?(e=Wg(e,t,di),r.__reactInternalMemoizedMergedChildContext=e,De(Dt),De(bt),Pe(bt,e)):De(Dt),Pe(Dt,n)}var zn=null,Tu=!1,Zc=!1;function qg(e){zn===null?zn=[e]:zn.push(e)}function e_(e){Tu=!0,qg(e)}function Br(){if(!Zc&&zn!==null){Zc=!0;var e=0,t=Ee;try{var n=zn;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zn=null,Tu=!1}catch(i){throw zn!==null&&(zn=zn.slice(e+1)),yg(mp,Br),i}finally{Ee=t,Zc=!1}}return null}var Ki=[],Wi=0,Wl=null,ql=0,tn=[],nn=0,pi=null,Ln=1,Fn="";function Zr(e,t){Ki[Wi++]=ql,Ki[Wi++]=Wl,Wl=e,ql=t}function Vg(e,t,n){tn[nn++]=Ln,tn[nn++]=Fn,tn[nn++]=pi,pi=e;var r=Ln;e=Fn;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var o=32-gn(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ln=1<<32-gn(t)+i|n<<i|r,Fn=o+e}else Ln=1<<o|n<<i|r,Fn=e}function kp(e){e.return!==null&&(Zr(e,1),Vg(e,1,0))}function Ep(e){for(;e===Wl;)Wl=Ki[--Wi],Ki[Wi]=null,ql=Ki[--Wi],Ki[Wi]=null;for(;e===pi;)pi=tn[--nn],tn[nn]=null,Fn=tn[--nn],tn[nn]=null,Ln=tn[--nn],tn[nn]=null}var Vt=null,Wt=null,Be=!1,hn=null;function Hg(e,t){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Xm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vt=e,Wt=_r(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vt=e,Wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=pi!==null?{id:Ln,overflow:Fn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vt=e,Wt=null,!0):!1;default:return!1}}function ad(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ld(e){if(Be){var t=Wt;if(t){var n=t;if(!Xm(e,t)){if(ad(e))throw Error(H(418));t=_r(n.nextSibling);var r=Vt;t&&Xm(e,t)?Hg(r,n):(e.flags=e.flags&-4097|2,Be=!1,Vt=e)}}else{if(ad(e))throw Error(H(418));e.flags=e.flags&-4097|2,Be=!1,Vt=e}}}function Zm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vt=e}function Za(e){if(e!==Vt)return!1;if(!Be)return Zm(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rd(e.type,e.memoizedProps)),t&&(t=Wt)){if(ad(e))throw Qg(),Error(H(418));for(;t;)Hg(e,t),t=_r(t.nextSibling)}if(Zm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wt=_r(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wt=null}}else Wt=Vt?_r(e.stateNode.nextSibling):null;return!0}function Qg(){for(var e=Wt;e;)e=_r(e.nextSibling)}function so(){Wt=Vt=null,Be=!1}function Cp(e){hn===null?hn=[e]:hn.push(e)}var t_=tr.ReactCurrentBatchConfig;function Xo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,e))}return e}function el(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ey(e){var t=e._init;return t(e._payload)}function Gg(e){function t(w,b){if(e){var k=w.deletions;k===null?(w.deletions=[b],w.flags|=16):k.push(b)}}function n(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=Tr(w,b),w.index=0,w.sibling=null,w}function o(w,b,k){return w.index=k,e?(k=w.alternate,k!==null?(k=k.index,k<b?(w.flags|=2,b):k):(w.flags|=2,b)):(w.flags|=1048576,b)}function s(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,b,k,C){return b===null||b.tag!==6?(b=af(k,w.mode,C),b.return=w,b):(b=i(b,k),b.return=w,b)}function u(w,b,k,C){var T=k.type;return T===Bi?h(w,b,k.props.children,C,k.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===hr&&ey(T)===b.type)?(C=i(b,k.props),C.ref=Xo(w,b,k),C.return=w,C):(C=bl(k.type,k.key,k.props,null,w.mode,C),C.ref=Xo(w,b,k),C.return=w,C)}function f(w,b,k,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==k.containerInfo||b.stateNode.implementation!==k.implementation?(b=lf(k,w.mode,C),b.return=w,b):(b=i(b,k.children||[]),b.return=w,b)}function h(w,b,k,C,T){return b===null||b.tag!==7?(b=ai(k,w.mode,C,T),b.return=w,b):(b=i(b,k),b.return=w,b)}function y(w,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return b=af(""+b,w.mode,k),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ka:return k=bl(b.type,b.key,b.props,null,w.mode,k),k.ref=Xo(w,null,b),k.return=w,k;case Mi:return b=lf(b,w.mode,k),b.return=w,b;case hr:var C=b._init;return y(w,C(b._payload),k)}if(is(b)||Ho(b))return b=ai(b,w.mode,k,null),b.return=w,b;el(w,b)}return null}function g(w,b,k,C){var T=b!==null?b.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return T!==null?null:l(w,b,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ka:return k.key===T?u(w,b,k,C):null;case Mi:return k.key===T?f(w,b,k,C):null;case hr:return T=k._init,g(w,b,T(k._payload),C)}if(is(k)||Ho(k))return T!==null?null:h(w,b,k,C,null);el(w,k)}return null}function S(w,b,k,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(k)||null,l(b,w,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ka:return w=w.get(C.key===null?k:C.key)||null,u(b,w,C,T);case Mi:return w=w.get(C.key===null?k:C.key)||null,f(b,w,C,T);case hr:var z=C._init;return S(w,b,k,z(C._payload),T)}if(is(C)||Ho(C))return w=w.get(k)||null,h(b,w,C,T,null);el(b,C)}return null}function E(w,b,k,C){for(var T=null,z=null,U=b,q=b=0,X=null;U!==null&&q<k.length;q++){U.index>q?(X=U,U=null):X=U.sibling;var oe=g(w,U,k[q],C);if(oe===null){U===null&&(U=X);break}e&&U&&oe.alternate===null&&t(w,U),b=o(oe,b,q),z===null?T=oe:z.sibling=oe,z=oe,U=X}if(q===k.length)return n(w,U),Be&&Zr(w,q),T;if(U===null){for(;q<k.length;q++)U=y(w,k[q],C),U!==null&&(b=o(U,b,q),z===null?T=U:z.sibling=U,z=U);return Be&&Zr(w,q),T}for(U=r(w,U);q<k.length;q++)X=S(U,w,q,k[q],C),X!==null&&(e&&X.alternate!==null&&U.delete(X.key===null?q:X.key),b=o(X,b,q),z===null?T=X:z.sibling=X,z=X);return e&&U.forEach(function(Ce){return t(w,Ce)}),Be&&Zr(w,q),T}function P(w,b,k,C){var T=Ho(k);if(typeof T!="function")throw Error(H(150));if(k=T.call(k),k==null)throw Error(H(151));for(var z=T=null,U=b,q=b=0,X=null,oe=k.next();U!==null&&!oe.done;q++,oe=k.next()){U.index>q?(X=U,U=null):X=U.sibling;var Ce=g(w,U,oe.value,C);if(Ce===null){U===null&&(U=X);break}e&&U&&Ce.alternate===null&&t(w,U),b=o(Ce,b,q),z===null?T=Ce:z.sibling=Ce,z=Ce,U=X}if(oe.done)return n(w,U),Be&&Zr(w,q),T;if(U===null){for(;!oe.done;q++,oe=k.next())oe=y(w,oe.value,C),oe!==null&&(b=o(oe,b,q),z===null?T=oe:z.sibling=oe,z=oe);return Be&&Zr(w,q),T}for(U=r(w,U);!oe.done;q++,oe=k.next())oe=S(U,w,q,oe.value,C),oe!==null&&(e&&oe.alternate!==null&&U.delete(oe.key===null?q:oe.key),b=o(oe,b,q),z===null?T=oe:z.sibling=oe,z=oe);return e&&U.forEach(function(Ae){return t(w,Ae)}),Be&&Zr(w,q),T}function A(w,b,k,C){if(typeof k=="object"&&k!==null&&k.type===Bi&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Ka:e:{for(var T=k.key,z=b;z!==null;){if(z.key===T){if(T=k.type,T===Bi){if(z.tag===7){n(w,z.sibling),b=i(z,k.props.children),b.return=w,w=b;break e}}else if(z.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===hr&&ey(T)===z.type){n(w,z.sibling),b=i(z,k.props),b.ref=Xo(w,z,k),b.return=w,w=b;break e}n(w,z);break}else t(w,z);z=z.sibling}k.type===Bi?(b=ai(k.props.children,w.mode,C,k.key),b.return=w,w=b):(C=bl(k.type,k.key,k.props,null,w.mode,C),C.ref=Xo(w,b,k),C.return=w,w=C)}return s(w);case Mi:e:{for(z=k.key;b!==null;){if(b.key===z)if(b.tag===4&&b.stateNode.containerInfo===k.containerInfo&&b.stateNode.implementation===k.implementation){n(w,b.sibling),b=i(b,k.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else t(w,b);b=b.sibling}b=lf(k,w.mode,C),b.return=w,w=b}return s(w);case hr:return z=k._init,A(w,b,z(k._payload),C)}if(is(k))return E(w,b,k,C);if(Ho(k))return P(w,b,k,C);el(w,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,b!==null&&b.tag===6?(n(w,b.sibling),b=i(b,k),b.return=w,w=b):(n(w,b),b=af(k,w.mode,C),b.return=w,w=b),s(w)):n(w,b)}return A}var ao=Gg(!0),Yg=Gg(!1),Vl=Mr(null),Hl=null,qi=null,Tp=null;function jp(){Tp=qi=Hl=null}function Pp(e){var t=Vl.current;De(Vl),e._currentValue=t}function ud(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Zi(e,t){Hl=e,Tp=qi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rt=!0),e.firstContext=null)}function an(e){var t=e._currentValue;if(Tp!==e)if(e={context:e,memoizedValue:t,next:null},qi===null){if(Hl===null)throw Error(H(308));qi=e,Hl.dependencies={lanes:0,firstContext:e}}else qi=qi.next=e;return t}var ri=null;function Op(e){ri===null?ri=[e]:ri.push(e)}function Jg(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Op(t)):(n.next=i.next,i.next=n),t.interleaved=n,Qn(e,r)}function Qn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var mr=!1;function Ip(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Qn(e,n)}return i=r.interleaved,i===null?(t.next=t,Op(r)):(t.next=i.next,i.next=t),r.interleaved=t,Qn(e,n)}function yl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yp(e,n)}}function ty(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ql(e,t,n,r){var i=e.updateQueue;mr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,s===null?o=f:s.next=f,s=u;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=u))}if(o!==null){var y=i.baseState;s=0,h=f=u=null,l=o;do{var g=l.lane,S=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var E=e,P=l;switch(g=t,S=n,P.tag){case 1:if(E=P.payload,typeof E=="function"){y=E.call(S,y,g);break e}y=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=P.payload,g=typeof E=="function"?E.call(S,y,g):E,g==null)break e;y=Ue({},y,g);break e;case 2:mr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=S,u=y):h=h.next=S,s|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(u=y),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);mi|=s,e.lanes=s,e.memoizedState=y}}function ny(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var sa={},On=Mr(sa),Bs=Mr(sa),zs=Mr(sa);function ii(e){if(e===sa)throw Error(H(174));return e}function Rp(e,t){switch(Pe(zs,t),Pe(Bs,e),Pe(On,sa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kf(t,e)}De(On),Pe(On,t)}function lo(){De(On),De(Bs),De(zs)}function Zg(e){ii(zs.current);var t=ii(On.current),n=Kf(t,e.type);t!==n&&(Pe(Bs,e),Pe(On,n))}function Dp(e){Bs.current===e&&(De(On),De(Bs))}var Le=Mr(0);function Gl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ef=[];function Ap(){for(var e=0;e<ef.length;e++)ef[e]._workInProgressVersionPrimary=null;ef.length=0}var vl=tr.ReactCurrentDispatcher,tf=tr.ReactCurrentBatchConfig,hi=0,Fe=null,Ze=null,it=null,Yl=!1,ms=!1,$s=0,n_=0;function gt(){throw Error(H(321))}function Np(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Sn(e[n],t[n]))return!1;return!0}function Mp(e,t,n,r,i,o){if(hi=o,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vl.current=e===null||e.memoizedState===null?s_:a_,e=n(r,i),ms){o=0;do{if(ms=!1,$s=0,25<=o)throw Error(H(301));o+=1,it=Ze=null,t.updateQueue=null,vl.current=l_,e=n(r,i)}while(ms)}if(vl.current=Jl,t=Ze!==null&&Ze.next!==null,hi=0,it=Ze=Fe=null,Yl=!1,t)throw Error(H(300));return e}function Bp(){var e=$s!==0;return $s=0,e}function Tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Fe.memoizedState=it=e:it=it.next=e,it}function ln(){if(Ze===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=it===null?Fe.memoizedState:it.next;if(t!==null)it=t,Ze=e;else{if(e===null)throw Error(H(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},it===null?Fe.memoizedState=it=e:it=it.next=e}return it}function Ls(e,t){return typeof t=="function"?t(e):t}function nf(e){var t=ln(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=Ze,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,f=o;do{var h=f.lane;if((hi&h)===h)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var y={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=y,s=r):u=u.next=y,Fe.lanes|=h,mi|=h}f=f.next}while(f!==null&&f!==o);u===null?s=r:u.next=l,Sn(r,t.memoizedState)||(Rt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Fe.lanes|=o,mi|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rf(e){var t=ln(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Sn(o,t.memoizedState)||(Rt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function e0(){}function t0(e,t){var n=Fe,r=ln(),i=t(),o=!Sn(r.memoizedState,i);if(o&&(r.memoizedState=i,Rt=!0),r=r.queue,zp(i0.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Fs(9,r0.bind(null,n,r,i,t),void 0,null),ot===null)throw Error(H(349));hi&30||n0(n,t,i)}return i}function n0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function r0(e,t,n,r){t.value=n,t.getSnapshot=r,o0(t)&&s0(e)}function i0(e,t,n){return n(function(){o0(t)&&s0(e)})}function o0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Sn(e,n)}catch{return!0}}function s0(e){var t=Qn(e,1);t!==null&&xn(t,e,1,-1)}function ry(e){var t=Tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:e},t.queue=e,e=e.dispatch=o_.bind(null,Fe,e),[t.memoizedState,e]}function Fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function a0(){return ln().memoizedState}function gl(e,t,n,r){var i=Tn();Fe.flags|=e,i.memoizedState=Fs(1|t,n,void 0,r===void 0?null:r)}function ju(e,t,n,r){var i=ln();r=r===void 0?null:r;var o=void 0;if(Ze!==null){var s=Ze.memoizedState;if(o=s.destroy,r!==null&&Np(r,s.deps)){i.memoizedState=Fs(t,n,o,r);return}}Fe.flags|=e,i.memoizedState=Fs(1|t,n,o,r)}function iy(e,t){return gl(8390656,8,e,t)}function zp(e,t){return ju(2048,8,e,t)}function l0(e,t){return ju(4,2,e,t)}function u0(e,t){return ju(4,4,e,t)}function c0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function f0(e,t,n){return n=n!=null?n.concat([e]):null,ju(4,4,c0.bind(null,t,e),n)}function $p(){}function d0(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Np(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function p0(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Np(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function h0(e,t,n){return hi&21?(Sn(n,t)||(n=xg(),Fe.lanes|=n,mi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=n)}function r_(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=tf.transition;tf.transition={};try{e(!1),t()}finally{Ee=n,tf.transition=r}}function m0(){return ln().memoizedState}function i_(e,t,n){var r=Cr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},y0(e))v0(t,n);else if(n=Jg(e,t,n,r),n!==null){var i=Tt();xn(n,e,r,i),g0(n,t,r)}}function o_(e,t,n){var r=Cr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(y0(e))v0(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,Sn(l,s)){var u=t.interleaved;u===null?(i.next=i,Op(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Jg(e,t,i,r),n!==null&&(i=Tt(),xn(n,e,r,i),g0(n,t,r))}}function y0(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function v0(e,t){ms=Yl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function g0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yp(e,n)}}var Jl={readContext:an,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},s_={readContext:an,useCallback:function(e,t){return Tn().memoizedState=[e,t===void 0?null:t],e},useContext:an,useEffect:iy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gl(4194308,4,c0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gl(4194308,4,e,t)},useInsertionEffect:function(e,t){return gl(4,2,e,t)},useMemo:function(e,t){var n=Tn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Tn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=i_.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=Tn();return e={current:e},t.memoizedState=e},useState:ry,useDebugValue:$p,useDeferredValue:function(e){return Tn().memoizedState=e},useTransition:function(){var e=ry(!1),t=e[0];return e=r_.bind(null,e[1]),Tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,i=Tn();if(Be){if(n===void 0)throw Error(H(407));n=n()}else{if(n=t(),ot===null)throw Error(H(349));hi&30||n0(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,iy(i0.bind(null,r,o,e),[e]),r.flags|=2048,Fs(9,r0.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Tn(),t=ot.identifierPrefix;if(Be){var n=Fn,r=Ln;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$s++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=n_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a_={readContext:an,useCallback:d0,useContext:an,useEffect:zp,useImperativeHandle:f0,useInsertionEffect:l0,useLayoutEffect:u0,useMemo:p0,useReducer:nf,useRef:a0,useState:function(){return nf(Ls)},useDebugValue:$p,useDeferredValue:function(e){var t=ln();return h0(t,Ze.memoizedState,e)},useTransition:function(){var e=nf(Ls)[0],t=ln().memoizedState;return[e,t]},useMutableSource:e0,useSyncExternalStore:t0,useId:m0,unstable_isNewReconciler:!1},l_={readContext:an,useCallback:d0,useContext:an,useEffect:zp,useImperativeHandle:f0,useInsertionEffect:l0,useLayoutEffect:u0,useMemo:p0,useReducer:rf,useRef:a0,useState:function(){return rf(Ls)},useDebugValue:$p,useDeferredValue:function(e){var t=ln();return Ze===null?t.memoizedState=e:h0(t,Ze.memoizedState,e)},useTransition:function(){var e=rf(Ls)[0],t=ln().memoizedState;return[e,t]},useMutableSource:e0,useSyncExternalStore:t0,useId:m0,unstable_isNewReconciler:!1};function dn(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ue({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Pu={isMounted:function(e){return(e=e._reactInternals)?Si(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=Cr(e),o=Kn(r,i);o.payload=t,n!=null&&(o.callback=n),t=kr(e,o,i),t!==null&&(xn(t,e,i,r),yl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=Cr(e),o=Kn(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=kr(e,o,i),t!==null&&(xn(t,e,i,r),yl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tt(),r=Cr(e),i=Kn(n,r);i.tag=2,t!=null&&(i.callback=t),t=kr(e,i,r),t!==null&&(xn(t,e,r,n),yl(t,e,r))}};function oy(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Ds(n,r)||!Ds(i,o):!0}function x0(e,t,n){var r=!1,i=Ir,o=t.contextType;return typeof o=="object"&&o!==null?o=an(o):(i=At(t)?di:bt.current,r=t.contextTypes,o=(r=r!=null)?oo(e,i):Ir),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function sy(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Pu.enqueueReplaceState(t,t.state,null)}function fd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ip(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=an(o):(o=At(t)?di:bt.current,i.context=oo(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(cd(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Pu.enqueueReplaceState(i,i.state,null),Ql(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do n+=Mb(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function of(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function dd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var u_=typeof WeakMap=="function"?WeakMap:Map;function S0(e,t,n){n=Kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,bd=r),dd(e,t)},n}function w0(e,t,n){n=Kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){dd(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){dd(e,t),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function ay(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new u_;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=__.bind(null,e,t,n),t.then(e,e))}function ly(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uy(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kn(-1,1),t.tag=2,kr(n,t,1))),n.lanes|=1),e)}var c_=tr.ReactCurrentOwner,Rt=!1;function Ct(e,t,n,r){t.child=e===null?Yg(t,null,n,r):ao(t,e.child,n,r)}function cy(e,t,n,r,i){n=n.render;var o=t.ref;return Zi(t,i),r=Mp(e,t,n,r,o,i),n=Bp(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gn(e,t,i)):(Be&&n&&kp(t),t.flags|=1,Ct(e,t,r,i),t.child)}function fy(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Hp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,b0(e,t,o,r,i)):(e=bl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ds,n(s,r)&&e.ref===t.ref)return Gn(e,t,i)}return t.flags|=1,e=Tr(o,r),e.ref=t.ref,e.return=t,t.child=e}function b0(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Ds(o,r)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,Gn(e,t,i)}return pd(e,t,n,r,i)}function _0(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Hi,Ft),Ft|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pe(Hi,Ft),Ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Pe(Hi,Ft),Ft|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Pe(Hi,Ft),Ft|=r;return Ct(e,t,i,n),t.child}function k0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pd(e,t,n,r,i){var o=At(n)?di:bt.current;return o=oo(t,o),Zi(t,i),n=Mp(e,t,n,r,o,i),r=Bp(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gn(e,t,i)):(Be&&r&&kp(t),t.flags|=1,Ct(e,t,n,i),t.child)}function dy(e,t,n,r,i){if(At(n)){var o=!0;Kl(t)}else o=!1;if(Zi(t,i),t.stateNode===null)xl(e,t),x0(t,n,r),fd(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var u=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=an(f):(f=At(n)?di:bt.current,f=oo(t,f));var h=n.getDerivedStateFromProps,y=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";y||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==f)&&sy(t,s,r,f),mr=!1;var g=t.memoizedState;s.state=g,Ql(t,r,s,i),u=t.memoizedState,l!==r||g!==u||Dt.current||mr?(typeof h=="function"&&(cd(t,n,h,r),u=t.memoizedState),(l=mr||oy(t,n,l,r,g,u,f))?(y||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=f,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Xg(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:dn(t.type,l),s.props=f,y=t.pendingProps,g=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=an(u):(u=At(n)?di:bt.current,u=oo(t,u));var S=n.getDerivedStateFromProps;(h=typeof S=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==y||g!==u)&&sy(t,s,r,u),mr=!1,g=t.memoizedState,s.state=g,Ql(t,r,s,i);var E=t.memoizedState;l!==y||g!==E||Dt.current||mr?(typeof S=="function"&&(cd(t,n,S,r),E=t.memoizedState),(f=mr||oy(t,n,f,r,g,E,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,E,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,E,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=E),s.props=r,s.state=E,s.context=u,r=f):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return hd(e,t,n,r,o,i)}function hd(e,t,n,r,i,o){k0(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&Jm(t,n,!1),Gn(e,t,o);r=t.stateNode,c_.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=ao(t,e.child,null,o),t.child=ao(t,null,l,o)):Ct(e,t,l,o),t.memoizedState=r.state,i&&Jm(t,n,!0),t.child}function E0(e){var t=e.stateNode;t.pendingContext?Ym(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ym(e,t.context,!1),Rp(e,t.containerInfo)}function py(e,t,n,r,i){return so(),Cp(i),t.flags|=256,Ct(e,t,n,r),t.child}var md={dehydrated:null,treeContext:null,retryLane:0};function yd(e){return{baseLanes:e,cachePool:null,transitions:null}}function C0(e,t,n){var r=t.pendingProps,i=Le.current,o=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pe(Le,i&1),e===null)return ld(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ru(s,r,0,null),e=ai(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=yd(n),t.memoizedState=md,e):Lp(t,s));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return f_(e,t,s,r,l,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Tr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Tr(l,o):(o=ai(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?yd(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=md,r}return o=e.child,e=o.sibling,r=Tr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Lp(e,t){return t=Ru({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tl(e,t,n,r){return r!==null&&Cp(r),ao(t,e.child,null,n),e=Lp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function f_(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=of(Error(H(422))),tl(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ru({mode:"visible",children:r.children},i,0,null),o=ai(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ao(t,e.child,null,s),t.child.memoizedState=yd(s),t.memoizedState=md,o);if(!(t.mode&1))return tl(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(H(419)),r=of(o,r,void 0),tl(e,t,s,r)}if(l=(s&e.childLanes)!==0,Rt||l){if(r=ot,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Qn(e,i),xn(r,e,i,-1))}return Vp(),r=of(Error(H(421))),tl(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=k_.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Wt=_r(i.nextSibling),Vt=t,Be=!0,hn=null,e!==null&&(tn[nn++]=Ln,tn[nn++]=Fn,tn[nn++]=pi,Ln=e.id,Fn=e.overflow,pi=t),t=Lp(t,r.children),t.flags|=4096,t)}function hy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ud(e.return,t,n)}function sf(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function T0(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ct(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hy(e,n,t);else if(e.tag===19)hy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pe(Le,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Gl(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),sf(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Gl(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}sf(t,!0,n,null,o);break;case"together":sf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,n=Tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function d_(e,t,n){switch(t.tag){case 3:E0(t),so();break;case 5:Zg(t);break;case 1:At(t.type)&&Kl(t);break;case 4:Rp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pe(Vl,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?C0(e,t,n):(Pe(Le,Le.current&1),e=Gn(e,t,n),e!==null?e.sibling:null);Pe(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return T0(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,_0(e,t,n)}return Gn(e,t,n)}var j0,vd,P0,O0;j0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vd=function(){};P0=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ii(On.current);var o=null;switch(n){case"input":i=$f(e,i),r=$f(e,r),o=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),o=[];break;case"textarea":i=Uf(e,i),r=Uf(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fl)}Wf(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Cs.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Cs.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&Re("scroll",e),o||l===u||(o=[])):(o=o||[]).push(f,u))}n&&(o=o||[]).push("style",n);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};O0=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zo(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function p_(e,t,n){var r=t.pendingProps;switch(Ep(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return At(t.type)&&Ul(),xt(t),null;case 3:return r=t.stateNode,lo(),De(Dt),De(bt),Ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Za(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(Ed(hn),hn=null))),vd(e,t),xt(t),null;case 5:Dp(t);var i=ii(zs.current);if(n=t.type,e!==null&&t.stateNode!=null)P0(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(H(166));return xt(t),null}if(e=ii(On.current),Za(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[jn]=t,r[Ms]=o,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<ss.length;i++)Re(ss[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":_m(r,o),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Re("invalid",r);break;case"textarea":Em(r,o),Re("invalid",r)}Wf(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Xa(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Xa(r.textContent,l,e),i=["children",""+l]):Cs.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Re("scroll",r)}switch(n){case"input":Wa(r),km(r,o,!0);break;case"textarea":Wa(r),Cm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Fl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ig(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[jn]=t,e[Ms]=r,j0(e,t,!1,!1),t.stateNode=e;e:{switch(s=qf(n,r),n){case"dialog":Re("cancel",e),Re("close",e),i=r;break;case"iframe":case"object":case"embed":Re("load",e),i=r;break;case"video":case"audio":for(i=0;i<ss.length;i++)Re(ss[i],e);i=r;break;case"source":Re("error",e),i=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),i=r;break;case"details":Re("toggle",e),i=r;break;case"input":_m(e,r),i=$f(e,r),Re("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),Re("invalid",e);break;case"textarea":Em(e,r),i=Uf(e,r),Re("invalid",e);break;default:i=r}Wf(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?ag(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&og(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ts(e,u):typeof u=="number"&&Ts(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cs.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Re("scroll",e):u!=null&&cp(e,o,u,s))}switch(n){case"input":Wa(e),km(e,r,!1);break;case"textarea":Wa(e),Cm(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Or(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Gi(e,!!r.multiple,o,!1):r.defaultValue!=null&&Gi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(e&&t.stateNode!=null)O0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(H(166));if(n=ii(zs.current),ii(On.current),Za(t)){if(r=t.stateNode,n=t.memoizedProps,r[jn]=t,(o=r.nodeValue!==n)&&(e=Vt,e!==null))switch(e.tag){case 3:Xa(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xa(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jn]=t,t.stateNode=r}return xt(t),null;case 13:if(De(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&Wt!==null&&t.mode&1&&!(t.flags&128))Qg(),so(),t.flags|=98560,o=!1;else if(o=Za(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(H(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[jn]=t}else so(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xt(t),o=!1}else hn!==null&&(Ed(hn),hn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?et===0&&(et=3):Vp())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return lo(),vd(e,t),e===null&&As(t.stateNode.containerInfo),xt(t),null;case 10:return Pp(t.type._context),xt(t),null;case 17:return At(t.type)&&Ul(),xt(t),null;case 19:if(De(Le),o=t.memoizedState,o===null)return xt(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Zo(o,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Gl(e),s!==null){for(t.flags|=128,Zo(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pe(Le,Le.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ge()>co&&(t.flags|=128,r=!0,Zo(o,!1),t.lanes=4194304)}else{if(!r)if(e=Gl(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Be)return xt(t),null}else 2*Ge()-o.renderingStartTime>co&&n!==1073741824&&(t.flags|=128,r=!0,Zo(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ge(),t.sibling=null,n=Le.current,Pe(Le,r?n&1|2:n&1),t):(xt(t),null);case 22:case 23:return qp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ft&1073741824&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function h_(e,t){switch(Ep(t),t.tag){case 1:return At(t.type)&&Ul(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lo(),De(Dt),De(bt),Ap(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dp(t),null;case 13:if(De(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));so()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De(Le),null;case 4:return lo(),null;case 10:return Pp(t.type._context),null;case 22:case 23:return qp(),null;case 24:return null;default:return null}}var nl=!1,St=!1,m_=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Vi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(e,t,r)}else n.current=null}function gd(e,t,n){try{n()}catch(r){qe(e,t,r)}}var my=!1;function y_(e,t){if(td=zl,e=Ng(),_p(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,f=0,h=0,y=e,g=null;t:for(;;){for(var S;y!==n||i!==0&&y.nodeType!==3||(l=s+i),y!==o||r!==0&&y.nodeType!==3||(u=s+r),y.nodeType===3&&(s+=y.nodeValue.length),(S=y.firstChild)!==null;)g=y,y=S;for(;;){if(y===e)break t;if(g===n&&++f===i&&(l=s),g===o&&++h===r&&(u=s),(S=y.nextSibling)!==null)break;y=g,g=y.parentNode}y=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},zl=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var P=E.memoizedProps,A=E.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?P:dn(t.type,P),A);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(C){qe(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return E=my,my=!1,E}function ys(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&gd(t,n,o)}i=i.next}while(i!==r)}}function Ou(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function I0(e){var t=e.alternate;t!==null&&(e.alternate=null,I0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jn],delete t[Ms],delete t[od],delete t[X1],delete t[Z1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function R0(e){return e.tag===5||e.tag===3||e.tag===4}function yy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||R0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fl));else if(r!==4&&(e=e.child,e!==null))for(Sd(e,t,n),e=e.sibling;e!==null;)Sd(e,t,n),e=e.sibling}function wd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(wd(e,t,n),e=e.sibling;e!==null;)wd(e,t,n),e=e.sibling}var at=null,pn=!1;function dr(e,t,n){for(n=n.child;n!==null;)D0(e,t,n),n=n.sibling}function D0(e,t,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(bu,n)}catch{}switch(n.tag){case 5:St||Vi(n,t);case 6:var r=at,i=pn;at=null,dr(e,t,n),at=r,pn=i,at!==null&&(pn?(e=at,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(pn?(e=at,n=n.stateNode,e.nodeType===8?Xc(e.parentNode,n):e.nodeType===1&&Xc(e,n),Is(e)):Xc(at,n.stateNode));break;case 4:r=at,i=pn,at=n.stateNode.containerInfo,pn=!0,dr(e,t,n),at=r,pn=i;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&gd(n,t,s),i=i.next}while(i!==r)}dr(e,t,n);break;case 1:if(!St&&(Vi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){qe(n,t,l)}dr(e,t,n);break;case 21:dr(e,t,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,dr(e,t,n),St=r):dr(e,t,n);break;default:dr(e,t,n)}}function vy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new m_),t.forEach(function(r){var i=E_.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:at=l.stateNode,pn=!1;break e;case 3:at=l.stateNode.containerInfo,pn=!0;break e;case 4:at=l.stateNode.containerInfo,pn=!0;break e}l=l.return}if(at===null)throw Error(H(160));D0(o,s,i),at=null,pn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){qe(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)A0(t,e),t=t.sibling}function A0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fn(t,e),Cn(e),r&4){try{ys(3,e,e.return),Ou(3,e)}catch(P){qe(e,e.return,P)}try{ys(5,e,e.return)}catch(P){qe(e,e.return,P)}}break;case 1:fn(t,e),Cn(e),r&512&&n!==null&&Vi(n,n.return);break;case 5:if(fn(t,e),Cn(e),r&512&&n!==null&&Vi(n,n.return),e.flags&32){var i=e.stateNode;try{Ts(i,"")}catch(P){qe(e,e.return,P)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&ng(i,o),qf(l,s);var f=qf(l,o);for(s=0;s<u.length;s+=2){var h=u[s],y=u[s+1];h==="style"?ag(i,y):h==="dangerouslySetInnerHTML"?og(i,y):h==="children"?Ts(i,y):cp(i,h,y,f)}switch(l){case"input":Lf(i,o);break;case"textarea":rg(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Gi(i,!!o.multiple,S,!1):g!==!!o.multiple&&(o.defaultValue!=null?Gi(i,!!o.multiple,o.defaultValue,!0):Gi(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ms]=o}catch(P){qe(e,e.return,P)}}break;case 6:if(fn(t,e),Cn(e),r&4){if(e.stateNode===null)throw Error(H(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(P){qe(e,e.return,P)}}break;case 3:if(fn(t,e),Cn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Is(t.containerInfo)}catch(P){qe(e,e.return,P)}break;case 4:fn(t,e),Cn(e);break;case 13:fn(t,e),Cn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Kp=Ge())),r&4&&vy(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(St=(f=St)||h,fn(t,e),St=f):fn(t,e),Cn(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!h&&e.mode&1)for(ie=e,h=e.child;h!==null;){for(y=ie=h;ie!==null;){switch(g=ie,S=g.child,g.tag){case 0:case 11:case 14:case 15:ys(4,g,g.return);break;case 1:Vi(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(P){qe(r,n,P)}}break;case 5:Vi(g,g.return);break;case 22:if(g.memoizedState!==null){xy(y);continue}}S!==null?(S.return=g,ie=S):xy(y)}h=h.sibling}e:for(h=null,y=e;;){if(y.tag===5){if(h===null){h=y;try{i=y.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=y.stateNode,u=y.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=sg("display",s))}catch(P){qe(e,e.return,P)}}}else if(y.tag===6){if(h===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(P){qe(e,e.return,P)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;h===y&&(h=null),y=y.return}h===y&&(h=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:fn(t,e),Cn(e),r&4&&vy(e);break;case 21:break;default:fn(t,e),Cn(e)}}function Cn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(R0(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ts(i,""),r.flags&=-33);var o=yy(e);wd(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=yy(e);Sd(e,l,s);break;default:throw Error(H(161))}}catch(u){qe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function v_(e,t,n){ie=e,N0(e)}function N0(e,t,n){for(var r=(e.mode&1)!==0;ie!==null;){var i=ie,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||nl;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||St;l=nl;var f=St;if(nl=s,(St=u)&&!f)for(ie=i;ie!==null;)s=ie,u=s.child,s.tag===22&&s.memoizedState!==null?Sy(i):u!==null?(u.return=s,ie=u):Sy(i);for(;o!==null;)ie=o,N0(o),o=o.sibling;ie=i,nl=l,St=f}gy(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ie=o):gy(e)}}function gy(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:St||Ou(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!St)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:dn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ny(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ny(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var y=h.dehydrated;y!==null&&Is(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}St||t.flags&512&&xd(t)}catch(g){qe(t,t.return,g)}}if(t===e){ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,ie=n;break}ie=t.return}}function xy(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Sy(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ou(4,t)}catch(u){qe(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){qe(t,i,u)}}var o=t.return;try{xd(t)}catch(u){qe(t,o,u)}break;case 5:var s=t.return;try{xd(t)}catch(u){qe(t,s,u)}}}catch(u){qe(t,t.return,u)}if(t===e){ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ie=l;break}ie=t.return}}var g_=Math.ceil,Xl=tr.ReactCurrentDispatcher,Fp=tr.ReactCurrentOwner,on=tr.ReactCurrentBatchConfig,xe=0,ot=null,Ye=null,lt=0,Ft=0,Hi=Mr(0),et=0,Us=null,mi=0,Iu=0,Up=0,vs=null,It=null,Kp=0,co=1/0,Mn=null,Zl=!1,bd=null,Er=null,rl=!1,xr=null,eu=0,gs=0,_d=null,Sl=-1,wl=0;function Tt(){return xe&6?Ge():Sl!==-1?Sl:Sl=Ge()}function Cr(e){return e.mode&1?xe&2&&lt!==0?lt&-lt:t_.transition!==null?(wl===0&&(wl=xg()),wl):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:Cg(e.type)),e):1}function xn(e,t,n,r){if(50<gs)throw gs=0,_d=null,Error(H(185));ra(e,n,r),(!(xe&2)||e!==ot)&&(e===ot&&(!(xe&2)&&(Iu|=n),et===4&&vr(e,lt)),Nt(e,r),n===1&&xe===0&&!(t.mode&1)&&(co=Ge()+500,Tu&&Br()))}function Nt(e,t){var n=e.callbackNode;t1(e,t);var r=Bl(e,e===ot?lt:0);if(r===0)n!==null&&Pm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Pm(n),t===1)e.tag===0?e_(wy.bind(null,e)):qg(wy.bind(null,e)),Y1(function(){!(xe&6)&&Br()}),n=null;else{switch(Sg(r)){case 1:n=mp;break;case 4:n=vg;break;case 16:n=Ml;break;case 536870912:n=gg;break;default:n=Ml}n=K0(n,M0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function M0(e,t){if(Sl=-1,wl=0,xe&6)throw Error(H(327));var n=e.callbackNode;if(eo()&&e.callbackNode!==n)return null;var r=Bl(e,e===ot?lt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=tu(e,r);else{t=r;var i=xe;xe|=2;var o=z0();(ot!==e||lt!==t)&&(Mn=null,co=Ge()+500,si(e,t));do try{w_();break}catch(l){B0(e,l)}while(!0);jp(),Xl.current=o,xe=i,Ye!==null?t=0:(ot=null,lt=0,t=et)}if(t!==0){if(t===2&&(i=Yf(e),i!==0&&(r=i,t=kd(e,i))),t===1)throw n=Us,si(e,0),vr(e,r),Nt(e,Ge()),n;if(t===6)vr(e,r);else{if(i=e.current.alternate,!(r&30)&&!x_(i)&&(t=tu(e,r),t===2&&(o=Yf(e),o!==0&&(r=o,t=kd(e,o))),t===1))throw n=Us,si(e,0),vr(e,r),Nt(e,Ge()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(H(345));case 2:ei(e,It,Mn);break;case 3:if(vr(e,r),(r&130023424)===r&&(t=Kp+500-Ge(),10<t)){if(Bl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Tt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=id(ei.bind(null,e,It,Mn),t);break}ei(e,It,Mn);break;case 4:if(vr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-gn(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g_(r/1960))-r,10<r){e.timeoutHandle=id(ei.bind(null,e,It,Mn),r);break}ei(e,It,Mn);break;case 5:ei(e,It,Mn);break;default:throw Error(H(329))}}}return Nt(e,Ge()),e.callbackNode===n?M0.bind(null,e):null}function kd(e,t){var n=vs;return e.current.memoizedState.isDehydrated&&(si(e,t).flags|=256),e=tu(e,t),e!==2&&(t=It,It=n,t!==null&&Ed(t)),e}function Ed(e){It===null?It=e:It.push.apply(It,e)}function x_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Sn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vr(e,t){for(t&=~Up,t&=~Iu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gn(t),r=1<<n;e[n]=-1,t&=~r}}function wy(e){if(xe&6)throw Error(H(327));eo();var t=Bl(e,0);if(!(t&1))return Nt(e,Ge()),null;var n=tu(e,t);if(e.tag!==0&&n===2){var r=Yf(e);r!==0&&(t=r,n=kd(e,r))}if(n===1)throw n=Us,si(e,0),vr(e,t),Nt(e,Ge()),n;if(n===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ei(e,It,Mn),Nt(e,Ge()),null}function Wp(e,t){var n=xe;xe|=1;try{return e(t)}finally{xe=n,xe===0&&(co=Ge()+500,Tu&&Br())}}function yi(e){xr!==null&&xr.tag===0&&!(xe&6)&&eo();var t=xe;xe|=1;var n=on.transition,r=Ee;try{if(on.transition=null,Ee=1,e)return e()}finally{Ee=r,on.transition=n,xe=t,!(xe&6)&&Br()}}function qp(){Ft=Hi.current,De(Hi)}function si(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,G1(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Ep(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ul();break;case 3:lo(),De(Dt),De(bt),Ap();break;case 5:Dp(r);break;case 4:lo();break;case 13:De(Le);break;case 19:De(Le);break;case 10:Pp(r.type._context);break;case 22:case 23:qp()}n=n.return}if(ot=e,Ye=e=Tr(e.current,null),lt=Ft=t,et=0,Us=null,Up=Iu=mi=0,It=vs=null,ri!==null){for(t=0;t<ri.length;t++)if(n=ri[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ri=null}return e}function B0(e,t){do{var n=Ye;try{if(jp(),vl.current=Jl,Yl){for(var r=Fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yl=!1}if(hi=0,it=Ze=Fe=null,ms=!1,$s=0,Fp.current=null,n===null||n.return===null){et=1,Us=t,Ye=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=lt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,h=l,y=h.tag;if(!(h.mode&1)&&(y===0||y===11||y===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var S=ly(s);if(S!==null){S.flags&=-257,uy(S,s,l,o,t),S.mode&1&&ay(o,f,t),t=S,u=f;var E=t.updateQueue;if(E===null){var P=new Set;P.add(u),t.updateQueue=P}else E.add(u);break e}else{if(!(t&1)){ay(o,f,t),Vp();break e}u=Error(H(426))}}else if(Be&&l.mode&1){var A=ly(s);if(A!==null){!(A.flags&65536)&&(A.flags|=256),uy(A,s,l,o,t),Cp(uo(u,l));break e}}o=u=uo(u,l),et!==4&&(et=2),vs===null?vs=[o]:vs.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var w=S0(o,u,t);ty(o,w);break e;case 1:l=u;var b=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Er===null||!Er.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t;var C=w0(o,l,t);ty(o,C);break e}}o=o.return}while(o!==null)}L0(n)}catch(T){t=T,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function z0(){var e=Xl.current;return Xl.current=Jl,e===null?Jl:e}function Vp(){(et===0||et===3||et===2)&&(et=4),ot===null||!(mi&268435455)&&!(Iu&268435455)||vr(ot,lt)}function tu(e,t){var n=xe;xe|=2;var r=z0();(ot!==e||lt!==t)&&(Mn=null,si(e,t));do try{S_();break}catch(i){B0(e,i)}while(!0);if(jp(),xe=n,Xl.current=r,Ye!==null)throw Error(H(261));return ot=null,lt=0,et}function S_(){for(;Ye!==null;)$0(Ye)}function w_(){for(;Ye!==null&&!Vb();)$0(Ye)}function $0(e){var t=U0(e.alternate,e,Ft);e.memoizedProps=e.pendingProps,t===null?L0(e):Ye=t,Fp.current=null}function L0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=h_(n,t),n!==null){n.flags&=32767,Ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Ye=null;return}}else if(n=p_(n,t,Ft),n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);et===0&&(et=5)}function ei(e,t,n){var r=Ee,i=on.transition;try{on.transition=null,Ee=1,b_(e,t,n,r)}finally{on.transition=i,Ee=r}return null}function b_(e,t,n,r){do eo();while(xr!==null);if(xe&6)throw Error(H(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(n1(e,o),e===ot&&(Ye=ot=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rl||(rl=!0,K0(Ml,function(){return eo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=on.transition,on.transition=null;var s=Ee;Ee=1;var l=xe;xe|=4,Fp.current=null,y_(e,n),A0(n,e),U1(nd),zl=!!td,nd=td=null,e.current=n,v_(n),Hb(),xe=l,Ee=s,on.transition=o}else e.current=n;if(rl&&(rl=!1,xr=e,eu=i),o=e.pendingLanes,o===0&&(Er=null),Yb(n.stateNode),Nt(e,Ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zl)throw Zl=!1,e=bd,bd=null,e;return eu&1&&e.tag!==0&&eo(),o=e.pendingLanes,o&1?e===_d?gs++:(gs=0,_d=e):gs=0,Br(),null}function eo(){if(xr!==null){var e=Sg(eu),t=on.transition,n=Ee;try{if(on.transition=null,Ee=16>e?16:e,xr===null)var r=!1;else{if(e=xr,xr=null,eu=0,xe&6)throw Error(H(331));var i=xe;for(xe|=4,ie=e.current;ie!==null;){var o=ie,s=o.child;if(ie.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(ie=f;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:ys(8,h,o)}var y=h.child;if(y!==null)y.return=h,ie=y;else for(;ie!==null;){h=ie;var g=h.sibling,S=h.return;if(I0(h),h===f){ie=null;break}if(g!==null){g.return=S,ie=g;break}ie=S}}}var E=o.alternate;if(E!==null){var P=E.child;if(P!==null){E.child=null;do{var A=P.sibling;P.sibling=null,P=A}while(P!==null)}}ie=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ie=s;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ys(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,ie=w;break e}ie=o.return}}var b=e.current;for(ie=b;ie!==null;){s=ie;var k=s.child;if(s.subtreeFlags&2064&&k!==null)k.return=s,ie=k;else e:for(s=b;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ou(9,l)}}catch(T){qe(l,l.return,T)}if(l===s){ie=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,ie=C;break e}ie=l.return}}if(xe=i,Br(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(bu,e)}catch{}r=!0}return r}finally{Ee=n,on.transition=t}}return!1}function by(e,t,n){t=uo(n,t),t=S0(e,t,1),e=kr(e,t,1),t=Tt(),e!==null&&(ra(e,1,t),Nt(e,t))}function qe(e,t,n){if(e.tag===3)by(e,e,n);else for(;t!==null;){if(t.tag===3){by(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){e=uo(n,e),e=w0(t,e,1),t=kr(t,e,1),e=Tt(),t!==null&&(ra(t,1,e),Nt(t,e));break}}t=t.return}}function __(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tt(),e.pingedLanes|=e.suspendedLanes&n,ot===e&&(lt&n)===n&&(et===4||et===3&&(lt&130023424)===lt&&500>Ge()-Kp?si(e,0):Up|=n),Nt(e,t)}function F0(e,t){t===0&&(e.mode&1?(t=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):t=1);var n=Tt();e=Qn(e,t),e!==null&&(ra(e,t,n),Nt(e,n))}function k_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),F0(e,n)}function E_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(t),F0(e,n)}var U0;U0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dt.current)Rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rt=!1,d_(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,Be&&t.flags&1048576&&Vg(t,ql,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xl(e,t),e=t.pendingProps;var i=oo(t,bt.current);Zi(t,n),i=Mp(null,t,r,e,i,n);var o=Bp();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,At(r)?(o=!0,Kl(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ip(t),i.updater=Pu,t.stateNode=i,i._reactInternals=t,fd(t,r,e,n),t=hd(null,t,r,!0,o,n)):(t.tag=0,Be&&o&&kp(t),Ct(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=T_(r),e=dn(r,e),i){case 0:t=pd(null,t,r,e,n);break e;case 1:t=dy(null,t,r,e,n);break e;case 11:t=cy(null,t,r,e,n);break e;case 14:t=fy(null,t,r,dn(r.type,e),n);break e}throw Error(H(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),pd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),dy(e,t,r,i,n);case 3:e:{if(E0(t),e===null)throw Error(H(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Xg(e,t),Ql(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=uo(Error(H(423)),t),t=py(e,t,r,n,i);break e}else if(r!==i){i=uo(Error(H(424)),t),t=py(e,t,r,n,i);break e}else for(Wt=_r(t.stateNode.containerInfo.firstChild),Vt=t,Be=!0,hn=null,n=Yg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),r===i){t=Gn(e,t,n);break e}Ct(e,t,r,n)}t=t.child}return t;case 5:return Zg(t),e===null&&ld(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,rd(r,i)?s=null:o!==null&&rd(r,o)&&(t.flags|=32),k0(e,t),Ct(e,t,s,n),t.child;case 6:return e===null&&ld(t),null;case 13:return C0(e,t,n);case 4:return Rp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ao(t,null,r,n):Ct(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),cy(e,t,r,i,n);case 7:return Ct(e,t,t.pendingProps,n),t.child;case 8:return Ct(e,t,t.pendingProps.children,n),t.child;case 12:return Ct(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Pe(Vl,r._currentValue),r._currentValue=s,o!==null)if(Sn(o.value,s)){if(o.children===i.children&&!Dt.current){t=Gn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Kn(-1,n&-n),u.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?u.next=u:(u.next=h.next,h.next=u),f.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),ud(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(H(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ud(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ct(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Zi(t,n),i=an(i),r=r(i),t.flags|=1,Ct(e,t,r,n),t.child;case 14:return r=t.type,i=dn(r,t.pendingProps),i=dn(r.type,i),fy(e,t,r,i,n);case 15:return b0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),xl(e,t),t.tag=1,At(r)?(e=!0,Kl(t)):e=!1,Zi(t,n),x0(t,r,i),fd(t,r,i,n),hd(null,t,r,!0,e,n);case 19:return T0(e,t,n);case 22:return _0(e,t,n)}throw Error(H(156,t.tag))};function K0(e,t){return yg(e,t)}function C_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(e,t,n,r){return new C_(e,t,n,r)}function Hp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function T_(e){if(typeof e=="function")return Hp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dp)return 11;if(e===pp)return 14}return 2}function Tr(e,t){var n=e.alternate;return n===null?(n=rn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bl(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")Hp(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Bi:return ai(n.children,i,o,t);case fp:s=8,i|=8;break;case Nf:return e=rn(12,n,t,i|2),e.elementType=Nf,e.lanes=o,e;case Mf:return e=rn(13,n,t,i),e.elementType=Mf,e.lanes=o,e;case Bf:return e=rn(19,n,t,i),e.elementType=Bf,e.lanes=o,e;case Zv:return Ru(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jv:s=10;break e;case Xv:s=9;break e;case dp:s=11;break e;case pp:s=14;break e;case hr:s=16,r=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=rn(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ai(e,t,n,r){return e=rn(7,e,r,t),e.lanes=n,e}function Ru(e,t,n,r){return e=rn(22,e,r,t),e.elementType=Zv,e.lanes=n,e.stateNode={isHidden:!1},e}function af(e,t,n){return e=rn(6,e,null,t),e.lanes=n,e}function lf(e,t,n){return t=rn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function j_(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fc(0),this.expirationTimes=Fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qp(e,t,n,r,i,o,s,l,u){return e=new j_(e,t,n,l,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=rn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ip(o),e}function P_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function W0(e){if(!e)return Ir;e=e._reactInternals;e:{if(Si(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(At(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var n=e.type;if(At(n))return Wg(e,n,t)}return t}function q0(e,t,n,r,i,o,s,l,u){return e=Qp(n,r,!0,e,i,o,s,l,u),e.context=W0(null),n=e.current,r=Tt(),i=Cr(n),o=Kn(r,i),o.callback=t??null,kr(n,o,i),e.current.lanes=i,ra(e,i,r),Nt(e,r),e}function Du(e,t,n,r){var i=t.current,o=Tt(),s=Cr(i);return n=W0(n),t.context===null?t.context=n:t.pendingContext=n,t=Kn(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=kr(i,t,s),e!==null&&(xn(e,i,s,o),yl(e,i,s)),s}function nu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _y(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Gp(e,t){_y(e,t),(e=e.alternate)&&_y(e,t)}function O_(){return null}var V0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yp(e){this._internalRoot=e}Au.prototype.render=Yp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));Du(e,t,null,null)};Au.prototype.unmount=Yp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yi(function(){Du(null,e,null,null)}),t[Hn]=null}};function Au(e){this._internalRoot=e}Au.prototype.unstable_scheduleHydration=function(e){if(e){var t=_g();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yr.length&&t!==0&&t<yr[n].priority;n++);yr.splice(n,0,e),n===0&&Eg(e)}};function Jp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ky(){}function I_(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=nu(s);o.call(f)}}var s=q0(t,r,e,0,null,!1,!1,"",ky);return e._reactRootContainer=s,e[Hn]=s.current,As(e.nodeType===8?e.parentNode:e),yi(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=nu(u);l.call(f)}}var u=Qp(e,0,!1,null,null,!1,!1,"",ky);return e._reactRootContainer=u,e[Hn]=u.current,As(e.nodeType===8?e.parentNode:e),yi(function(){Du(t,u,n,r)}),u}function Mu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=nu(s);l.call(u)}}Du(t,s,e,i)}else s=I_(n,t,e,i,r);return nu(s)}wg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=os(t.pendingLanes);n!==0&&(yp(t,n|1),Nt(t,Ge()),!(xe&6)&&(co=Ge()+500,Br()))}break;case 13:yi(function(){var r=Qn(e,1);if(r!==null){var i=Tt();xn(r,e,1,i)}}),Gp(e,1)}};vp=function(e){if(e.tag===13){var t=Qn(e,134217728);if(t!==null){var n=Tt();xn(t,e,134217728,n)}Gp(e,134217728)}};bg=function(e){if(e.tag===13){var t=Cr(e),n=Qn(e,t);if(n!==null){var r=Tt();xn(n,e,t,r)}Gp(e,t)}};_g=function(){return Ee};kg=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};Hf=function(e,t,n){switch(t){case"input":if(Lf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Cu(r);if(!i)throw Error(H(90));tg(r),Lf(r,i)}}}break;case"textarea":rg(e,n);break;case"select":t=n.value,t!=null&&Gi(e,!!n.multiple,t,!1)}};cg=Wp;fg=yi;var R_={usingClientEntryPoint:!1,Events:[oa,Fi,Cu,lg,ug,Wp]},es={findFiberByHostInstance:ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D_={bundleType:es.bundleType,version:es.version,rendererPackageName:es.rendererPackageName,rendererConfig:es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hg(e),e===null?null:e.stateNode},findFiberByHostInstance:es.findFiberByHostInstance||O_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{bu=il.inject(D_),Pn=il}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R_;Gt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jp(t))throw Error(H(200));return P_(e,t,null,n)};Gt.createRoot=function(e,t){if(!Jp(e))throw Error(H(299));var n=!1,r="",i=V0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Qp(e,1,!1,null,null,n,!1,r,i),e[Hn]=t.current,As(e.nodeType===8?e.parentNode:e),new Yp(t)};Gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=hg(t),e=e===null?null:e.stateNode,e};Gt.flushSync=function(e){return yi(e)};Gt.hydrate=function(e,t,n){if(!Nu(t))throw Error(H(200));return Mu(null,e,t,!0,n)};Gt.hydrateRoot=function(e,t,n){if(!Jp(e))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=V0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=q0(t,null,e,1,n??null,i,!1,o,s),e[Hn]=t.current,As(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Au(t)};Gt.render=function(e,t,n){if(!Nu(t))throw Error(H(200));return Mu(null,e,t,!1,n)};Gt.unmountComponentAtNode=function(e){if(!Nu(e))throw Error(H(40));return e._reactRootContainer?(yi(function(){Mu(null,null,e,!1,function(){e._reactRootContainer=null,e[Hn]=null})}),!0):!1};Gt.unstable_batchedUpdates=Wp;Gt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Nu(n))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return Mu(e,t,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function H0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H0)}catch(e){console.error(e)}}H0(),Hv.exports=Gt;var A_=Hv.exports,Ey=A_;Df.createRoot=Ey.createRoot,Df.hydrateRoot=Ey.hydrateRoot;var Q0={exports:{}},G0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=ue;function N_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var M_=typeof Object.is=="function"?Object.is:N_,B_=aa.useSyncExternalStore,z_=aa.useRef,$_=aa.useEffect,L_=aa.useMemo,F_=aa.useDebugValue;G0.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=z_(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=L_(function(){function u(S){if(!f){if(f=!0,h=S,S=r(S),i!==void 0&&s.hasValue){var E=s.value;if(i(E,S))return y=E}return y=S}if(E=y,M_(h,S))return E;var P=r(S);return i!==void 0&&i(E,P)?(h=S,E):(h=S,y=P)}var f=!1,h,y,g=n===void 0?null:n;return[function(){return u(t())},g===null?void 0:function(){return u(g())}]},[t,n,r,i]);var l=B_(e,o[0],o[1]);return $_(function(){s.hasValue=!0,s.value=l},[l]),F_(l),l};Q0.exports=G0;var U_=Q0.exports;function K_(e){e()}function W_(){let e=null,t=null;return{clear(){e=null,t=null},notify(){K_(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Cy={notify(){},get:()=>[]};function q_(e,t){let n,r=Cy,i=0,o=!1;function s(P){h();const A=r.subscribe(P);let w=!1;return()=>{w||(w=!0,A(),y())}}function l(){r.notify()}function u(){E.onStateChange&&E.onStateChange()}function f(){return o}function h(){i++,n||(n=e.subscribe(u),r=W_())}function y(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Cy)}function g(){o||(o=!0,h())}function S(){o&&(o=!1,y())}const E={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:f,trySubscribe:g,tryUnsubscribe:S,getListeners:()=>r};return E}var V_=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H_=V_(),Q_=()=>typeof navigator<"u"&&navigator.product==="ReactNative",G_=Q_(),Y_=()=>H_||G_?ue.useLayoutEffect:ue.useEffect,J_=Y_(),uf=Symbol.for("react-redux-context"),cf=typeof globalThis<"u"?globalThis:{};function X_(){if(!ue.createContext)return{};const e=cf[uf]??(cf[uf]=new Map);let t=e.get(ue.createContext);return t||(t=ue.createContext(null),e.set(ue.createContext,t)),t}var Rr=X_();function Z_(e){const{children:t,context:n,serverState:r,store:i}=e,o=ue.useMemo(()=>{const u=q_(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),s=ue.useMemo(()=>i.getState(),[i]);J_(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,s]);const l=n||Rr;return ue.createElement(l.Provider,{value:o},t)}var ek=Z_;function Xp(e=Rr){return function(){return ue.useContext(e)}}var Y0=Xp();function J0(e=Rr){const t=e===Rr?Y0:Xp(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var tk=J0();function nk(e=Rr){const t=e===Rr?tk:J0(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var nr=nk(),rk=(e,t)=>e===t;function ik(e=Rr){const t=e===Rr?Y0:Xp(e),n=(r,i={})=>{const{equalityFn:o=rk}=typeof i=="function"?{equalityFn:i}:i,s=t(),{store:l,subscription:u,getServerState:f}=s;ue.useRef(!0);const h=ue.useCallback({[r.name](g){return r(g)}}[r.name],[r]),y=U_.useSyncExternalStoreWithSelector(u.addNestedSub,l.getState,f||l.getState,h,o);return ue.useDebugValue(y),y};return Object.assign(n,{withTypes:()=>n}),n}var _e=ik();function st(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ok=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ty=ok,ff=()=>Math.random().toString(36).substring(7).split("").join("."),sk={INIT:`@@redux/INIT${ff()}`,REPLACE:`@@redux/REPLACE${ff()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ff()}`},ru=sk;function Zp(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function X0(e,t,n){if(typeof e!="function")throw new Error(st(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(st(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(st(1));return n(X0)(e,t)}let r=e,i=t,o=new Map,s=o,l=0,u=!1;function f(){s===o&&(s=new Map,o.forEach((A,w)=>{s.set(w,A)}))}function h(){if(u)throw new Error(st(3));return i}function y(A){if(typeof A!="function")throw new Error(st(4));if(u)throw new Error(st(5));let w=!0;f();const b=l++;return s.set(b,A),function(){if(w){if(u)throw new Error(st(6));w=!1,f(),s.delete(b),o=null}}}function g(A){if(!Zp(A))throw new Error(st(7));if(typeof A.type>"u")throw new Error(st(8));if(typeof A.type!="string")throw new Error(st(17));if(u)throw new Error(st(9));try{u=!0,i=r(i,A)}finally{u=!1}return(o=s).forEach(b=>{b()}),A}function S(A){if(typeof A!="function")throw new Error(st(10));r=A,g({type:ru.REPLACE})}function E(){const A=y;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(st(11));function b(){const C=w;C.next&&C.next(h())}return b(),{unsubscribe:A(b)}},[Ty](){return this}}}return g({type:ru.INIT}),{dispatch:g,subscribe:y,getState:h,replaceReducer:S,[Ty]:E}}function ak(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:ru.INIT})>"u")throw new Error(st(12));if(typeof n(void 0,{type:ru.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(st(13))})}function lk(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const s=t[o];typeof e[s]=="function"&&(n[s]=e[s])}const r=Object.keys(n);let i;try{ak(n)}catch(o){i=o}return function(s={},l){if(i)throw i;let u=!1;const f={};for(let h=0;h<r.length;h++){const y=r[h],g=n[y],S=s[y],E=g(S,l);if(typeof E>"u")throw l&&l.type,new Error(st(14));f[y]=E,u=u||E!==S}return u=u||r.length!==Object.keys(s).length,u?f:s}}function iu(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function uk(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(st(15))};const s={getState:i.getState,dispatch:(u,...f)=>o(u,...f)},l=e.map(u=>u(s));return o=iu(...l)(i.dispatch),{...i,dispatch:o}}}function ck(e){return Zp(e)&&"type"in e&&typeof e.type=="string"}var Z0=Symbol.for("immer-nothing"),jy=Symbol.for("immer-draftable"),jt=Symbol.for("immer-state");function mn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var qt=Object,fo=qt.getPrototypeOf,ou="constructor",Bu="prototype",Cd="configurable",su="enumerable",_l="writable",Ks="value",Yn=e=>!!e&&!!e[jt];function wn(e){var t;return e?ex(e)||zu(e)||!!e[jy]||!!((t=e[ou])!=null&&t[jy])||$u(e)||Lu(e):!1}var fk=qt[Bu][ou].toString(),Py=new WeakMap;function ex(e){if(!e||!eh(e))return!1;const t=fo(e);if(t===null||t===qt[Bu])return!0;const n=qt.hasOwnProperty.call(t,ou)&&t[ou];if(n===Object)return!0;if(!Ai(n))return!1;let r=Py.get(n);return r===void 0&&(r=Function.toString.call(n),Py.set(n,r)),r===fk}function la(e,t,n=!0){ua(e)===0?(n?Reflect.ownKeys(e):qt.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function ua(e){const t=e[jt];return t?t.type_:zu(e)?1:$u(e)?2:Lu(e)?3:0}var Oy=(e,t,n=ua(e))=>n===2?e.has(t):qt[Bu].hasOwnProperty.call(e,t),Td=(e,t,n=ua(e))=>n===2?e.get(t):e[t],au=(e,t,n,r=ua(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function dk(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var zu=Array.isArray,$u=e=>e instanceof Map,Lu=e=>e instanceof Set,eh=e=>typeof e=="object",Ai=e=>typeof e=="function",df=e=>typeof e=="boolean",$n=e=>e.copy_||e.base_,th=e=>e.modified_?e.copy_:e.base_;function jd(e,t){if($u(e))return new Map(e);if(Lu(e))return new Set(e);if(zu(e))return Array[Bu].slice.call(e);const n=ex(e);if(t===!0||t==="class_only"&&!n){const r=qt.getOwnPropertyDescriptors(e);delete r[jt];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],l=r[s];l[_l]===!1&&(l[_l]=!0,l[Cd]=!0),(l.get||l.set)&&(r[s]={[Cd]:!0,[_l]:!0,[su]:l[su],[Ks]:e[s]})}return qt.create(fo(e),r)}else{const r=fo(e);if(r!==null&&n)return{...e};const i=qt.create(r);return qt.assign(i,e)}}function nh(e,t=!1){return Fu(e)||Yn(e)||!wn(e)||(ua(e)>1&&qt.defineProperties(e,{set:ol,add:ol,clear:ol,delete:ol}),qt.freeze(e),t&&la(e,(n,r)=>{nh(r,!0)},!1)),e}function pk(){mn(2)}var ol={[Ks]:pk};function Fu(e){return e===null||!eh(e)?!0:qt.isFrozen(e)}var lu="MapSet",Pd="Patches",tx={};function po(e){const t=tx[e];return t||mn(0,e),t}var hk=e=>!!tx[e],Ws,nx=()=>Ws,mk=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:hk(lu)?po(lu):void 0});function Iy(e,t){t&&(e.patchPlugin_=po(Pd),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Od(e){Id(e),e.drafts_.forEach(yk),e.drafts_=null}function Id(e){e===Ws&&(Ws=e.parent_)}var Ry=e=>Ws=mk(Ws,e);function yk(e){const t=e[jt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Dy(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[jt].modified_&&(Od(t),mn(4)),wn(e)&&(e=Ay(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[jt].base_,e,t)}else e=Ay(t,n);return vk(t,e,!0),Od(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Z0?e:void 0}function Ay(e,t){if(Fu(t))return t;const n=t[jt];if(!n)return rh(t,e.handledSet_,e);if(!Uu(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);ox(n,e)}return n.copy_}function vk(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nh(t,n)}function rx(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Uu=(e,t)=>e.scope_===t,gk=[];function ix(e,t,n,r){const i=$n(e),o=e.type_;if(r!==void 0&&Td(i,r,o)===t){au(i,r,n,o);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;la(i,(u,f)=>{if(Yn(f)){const h=l.get(f)||[];h.push(u),l.set(f,h)}})}const s=e.draftLocations_.get(t)??gk;for(const l of s)au(i,l,n,o)}function xk(e,t,n){e.callbacks_.push(function(i){var l;const o=t;if(!o||!Uu(o,i))return;(l=i.mapSetPlugin_)==null||l.fixSetContents(o);const s=th(o);ix(e,o.draft_??o,s,n),ox(o,i)})}function ox(e,t){var r;if(e.modified_&&!e.finalized_&&(e.type_===3||(((r=e.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const o=i.getPath(e);o&&i.generatePatches_(e,o,t)}rx(e)}}function Sk(e,t,n){const{scope_:r}=e;if(Yn(n)){const i=n[jt];Uu(i,r)&&i.callbacks_.push(function(){kl(e);const s=th(i);ix(e,n,s,t)})}else wn(n)&&e.callbacks_.push(function(){const o=$n(e);Td(o,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&rh(Td(e.copy_,t,e.type_),r.handledSet_,r)})}function rh(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Yn(e)||t.has(e)||!wn(e)||Fu(e)||(t.add(e),la(e,(r,i)=>{if(Yn(i)){const o=i[jt];if(Uu(o,n)){const s=th(o);au(e,r,s,e.type_),rx(o)}}else wn(i)&&rh(i,t,n)})),e}function wk(e,t){const n=zu(e),r={type_:n?1:0,scope_:t?t.scope_:nx(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,o=ih;n&&(i=[r],o=qs);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=s,[l,r]}var ih={get(e,t){if(t===jt)return e;const n=$n(e);if(!Oy(n,t,e.type_))return bk(e,n,t);const r=n[t];if(e.finalized_||!wn(r))return r;if(r===pf(e.base_,t)){kl(e);const i=e.type_===1?+t:t,o=Dd(e.scope_,r,e,i);return e.copy_[i]=o}return r},has(e,t){return t in $n(e)},ownKeys(e){return Reflect.ownKeys($n(e))},set(e,t,n){const r=sx($n(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=pf($n(e),t),o=i==null?void 0:i[jt];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(dk(n,i)&&(n!==void 0||Oy(e.base_,t,e.type_)))return!0;kl(e),Rd(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Sk(e,t,n)),!0},deleteProperty(e,t){return kl(e),pf(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Rd(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$n(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[_l]:!0,[Cd]:e.type_!==1||t!=="length",[su]:r[su],[Ks]:n[t]}},defineProperty(){mn(11)},getPrototypeOf(e){return fo(e.base_)},setPrototypeOf(){mn(12)}},qs={};la(ih,(e,t)=>{qs[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});qs.deleteProperty=function(e,t){return qs.set.call(this,e,t,void 0)};qs.set=function(e,t,n){return ih.set.call(this,e[0],t,n,e[0])};function pf(e,t){const n=e[jt];return(n?$n(n):e)[t]}function bk(e,t,n){var i;const r=sx(t,n);return r?Ks in r?r[Ks]:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function sx(e,t){if(!(t in e))return;let n=fo(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=fo(n)}}function Rd(e){e.modified_||(e.modified_=!0,e.parent_&&Rd(e.parent_))}function kl(e){e.copy_||(e.assigned_=new Map,e.copy_=jd(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _k=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Ai(t)&&!Ai(n)){const o=n;n=t;const s=this;return function(u=o,...f){return s.produce(u,h=>n.call(this,h,...f))}}Ai(n)||mn(6),r!==void 0&&!Ai(r)&&mn(7);let i;if(wn(t)){const o=Ry(this),s=Dd(o,t,void 0);let l=!0;try{i=n(s),l=!1}finally{l?Od(o):Id(o)}return Iy(o,r),Dy(i,o)}else if(!t||!eh(t)){if(i=n(t),i===void 0&&(i=t),i===Z0&&(i=void 0),this.autoFreeze_&&nh(i,!0),r){const o=[],s=[];po(Pd).generateReplacementPatches_(t,i,{patches_:o,inversePatches_:s}),r(o,s)}return i}else mn(1,t)},this.produceWithPatches=(t,n)=>{if(Ai(t))return(s,...l)=>this.produceWithPatches(s,u=>t(u,...l));let r,i;return[this.produce(t,n,(s,l)=>{r=s,i=l}),r,i]},df(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),df(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),df(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){wn(e)||mn(8),Yn(e)&&(e=kk(e));const t=Ry(this),n=Dd(t,e,void 0);return n[jt].isManual_=!0,Id(t),n}finishDraft(e,t){const n=e&&e[jt];(!n||!n.isManual_)&&mn(9);const{scope_:r}=n;return Iy(r,t),Dy(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=po(Pd).applyPatches_;return Yn(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Dd(e,t,n,r){const[i,o]=$u(t)?po(lu).proxyMap_(t,n):Lu(t)?po(lu).proxySet_(t,n):wk(t,n);return((n==null?void 0:n.scope_)??nx()).drafts_.push(i),o.callbacks_=(n==null?void 0:n.callbacks_)??[],o.key_=r,n&&r!==void 0?xk(n,o,r):o.callbacks_.push(function(u){var h;(h=u.mapSetPlugin_)==null||h.fixSetContents(o);const{patchPlugin_:f}=u;o.modified_&&f&&f.generatePatches_(o,[],u)}),i}function kk(e){return Yn(e)||mn(10,e),ax(e)}function ax(e){if(!wn(e)||Fu(e))return e;const t=e[jt];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=jd(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=jd(e,!0);return la(n,(i,o)=>{au(n,i,ax(o))},r),t&&(t.finalized_=!1),n}var Ek=new _k,lx=Ek.produce;function ux(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var Ck=ux(),Tk=ux,jk=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?iu:iu.apply(null,arguments)},Pk=e=>e&&typeof e.match=="function";function xs(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Wn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>ck(r)&&r.type===e,n}var cx=class as extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,as.prototype)}static get[Symbol.species](){return as}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new as(...t[0].concat(this)):new as(...t.concat(this))}};function Ny(e){return wn(e)?lx(e,()=>{}):e}function sl(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Ok(e){return typeof e=="boolean"}var Ik=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let s=new cx;return n&&(Ok(n)?s.push(Ck):s.push(Tk(n.extraArgument))),s},Rk="RTK_autoBatch",My=e=>t=>{setTimeout(t,e)},Dk=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,s=!1;const l=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:My(10):e.type==="callback"?e.queueNotification:My(e.timeout),f=()=>{s=!1,o&&(o=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const y=()=>i&&h(),g=r.subscribe(y);return l.add(h),()=>{g(),l.delete(h)}},dispatch(h){var y;try{return i=!((y=h==null?void 0:h.meta)!=null&&y[Rk]),o=!i,o&&(s||(s=!0,u(f))),r.dispatch(h)}finally{i=!0}}})},Ak=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new cx(e);return r&&i.push(Dk(typeof r=="object"?r:void 0)),i};function Nk(e){const t=Ik(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Zp(n))l=lk(n);else throw new Error(Wn(1));let u;typeof r=="function"?u=r(t):u=t();let f=iu;i&&(f=jk({trace:!1,...typeof i=="object"&&i}));const h=uk(...u),y=Ak(h);let g=typeof s=="function"?s(y):y();const S=f(...g);return X0(l,o,S)}function fx(e){const t={},n=[];let r;const i={addCase(o,s){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(Wn(28));if(l in t)throw new Error(Wn(29));return t[l]=s,i},addAsyncThunk(o,s){return s.pending&&(t[o.pending.type]=s.pending),s.rejected&&(t[o.rejected.type]=s.rejected),s.fulfilled&&(t[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function Mk(e){return typeof e=="function"}function Bk(e,t){let[n,r,i]=fx(t),o;if(Mk(e))o=()=>Ny(e());else{const l=Ny(e);o=()=>l}function s(l=o(),u){let f=[n[u.type],...r.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,y)=>{if(y)if(Yn(h)){const S=y(h,u);return S===void 0?h:S}else{if(wn(h))return lx(h,g=>y(g,u));{const g=y(h,u);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},l)}return s.getInitialState=o,s}var zk=(e,t)=>Pk(e)?e.match(t):e(t);function $k(...e){return t=>e.some(n=>zk(n,t))}var Lk="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Fk=(e=21)=>{let t="",n=e;for(;n--;)t+=Lk[Math.random()*64|0];return t},Uk=["name","message","stack","code"],hf=class{constructor(e,t){Ri(this,"_type");this.payload=e,this.meta=t}},By=class{constructor(e,t){Ri(this,"_type");this.payload=e,this.meta=t}},Kk=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of Uk)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},zy="External signal was aborted",pt=(()=>{function e(t,n,r){const i=xs(t+"/fulfilled",(u,f,h,y)=>({payload:u,meta:{...y||{},arg:h,requestId:f,requestStatus:"fulfilled"}})),o=xs(t+"/pending",(u,f,h)=>({payload:void 0,meta:{...h||{},arg:f,requestId:u,requestStatus:"pending"}})),s=xs(t+"/rejected",(u,f,h,y,g)=>({payload:y,error:(r&&r.serializeError||Kk)(u||"Rejected"),meta:{...g||{},arg:h,requestId:f,rejectedWithValue:!!y,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"}}));function l(u,{signal:f}={}){return(h,y,g)=>{const S=r!=null&&r.idGenerator?r.idGenerator(u):Fk(),E=new AbortController;let P,A;function w(k){A=k,E.abort()}f&&(f.aborted?w(zy):f.addEventListener("abort",()=>w(zy),{once:!0}));const b=async function(){var T,z;let k;try{let U=(T=r==null?void 0:r.condition)==null?void 0:T.call(r,u,{getState:y,extra:g});if(qk(U)&&(U=await U),U===!1||E.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const q=new Promise((X,oe)=>{P=()=>{oe({name:"AbortError",message:A||"Aborted"})},E.signal.addEventListener("abort",P)});h(o(S,u,(z=r==null?void 0:r.getPendingMeta)==null?void 0:z.call(r,{requestId:S,arg:u},{getState:y,extra:g}))),k=await Promise.race([q,Promise.resolve(n(u,{dispatch:h,getState:y,extra:g,requestId:S,signal:E.signal,abort:w,rejectWithValue:(X,oe)=>new hf(X,oe),fulfillWithValue:(X,oe)=>new By(X,oe)})).then(X=>{if(X instanceof hf)throw X;return X instanceof By?i(X.payload,S,u,X.meta):i(X,S,u)})])}catch(U){k=U instanceof hf?s(null,S,u,U.payload,U.meta):s(U,S,u)}finally{P&&E.signal.removeEventListener("abort",P)}return r&&!r.dispatchConditionRejection&&s.match(k)&&k.meta.condition||h(k),k}();return Object.assign(b,{abort:w,requestId:S,arg:u,unwrap(){return b.then(Wk)}})}}return Object.assign(l,{pending:o,rejected:s,fulfilled:i,settled:$k(s,i),typePrefix:t})}return e.withTypes=()=>e,e})();function Wk(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function qk(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Vk=Symbol.for("rtk-slice-createasyncthunk");function Hk(e,t){return`${e}/${t}`}function Qk({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Vk];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Wn(11));const l=(typeof i.reducers=="function"?i.reducers(Yk()):i.reducers)||{},u=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(C,T){const z=typeof C=="string"?C:C.type;if(!z)throw new Error(Wn(12));if(z in f.sliceCaseReducersByType)throw new Error(Wn(13));return f.sliceCaseReducersByType[z]=T,h},addMatcher(C,T){return f.sliceMatchers.push({matcher:C,reducer:T}),h},exposeAction(C,T){return f.actionCreators[C]=T,h},exposeCaseReducer(C,T){return f.sliceCaseReducersByName[C]=T,h}};u.forEach(C=>{const T=l[C],z={reducerName:C,type:Hk(o,C),createNotation:typeof i.reducers=="function"};Xk(T)?eE(z,T,h,t):Jk(z,T,h)});function y(){const[C={},T=[],z=void 0]=typeof i.extraReducers=="function"?fx(i.extraReducers):[i.extraReducers],U={...C,...f.sliceCaseReducersByType};return Bk(i.initialState,q=>{for(let X in U)q.addCase(X,U[X]);for(let X of f.sliceMatchers)q.addMatcher(X.matcher,X.reducer);for(let X of T)q.addMatcher(X.matcher,X.reducer);z&&q.addDefaultCase(z)})}const g=C=>C,S=new Map,E=new WeakMap;let P;function A(C,T){return P||(P=y()),P(C,T)}function w(){return P||(P=y()),P.getInitialState()}function b(C,T=!1){function z(q){let X=q[C];return typeof X>"u"&&T&&(X=sl(E,z,w)),X}function U(q=g){const X=sl(S,T,()=>new WeakMap);return sl(X,q,()=>{const oe={};for(const[Ce,Ae]of Object.entries(i.selectors??{}))oe[Ce]=Gk(Ae,q,()=>sl(E,q,w),T);return oe})}return{reducerPath:C,getSelectors:U,get selectors(){return U(z)},selectSlice:z}}const k={name:o,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:w,...b(s),injectInto(C,{reducerPath:T,...z}={}){const U=T??s;return C.inject({reducerPath:U,reducer:A},z),{...k,...b(U,!0)}}};return k}}function Gk(e,t,n,r){function i(o,...s){let l=t(o);return typeof l>"u"&&r&&(l=n()),e(l,...s)}return i.unwrapped=e,i}var Co=Qk();function Yk(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Jk({type:e,reducerName:t,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!Zk(r))throw new Error(Wn(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?xs(e,s):xs(e))}function Xk(e){return e._reducerDefinitionType==="asyncThunk"}function Zk(e){return e._reducerDefinitionType==="reducerWithPrepare"}function eE({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Wn(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:u,settled:f,options:h}=n,y=i(e,o,h);r.exposeAction(t,y),s&&r.addCase(y.fulfilled,s),l&&r.addCase(y.pending,l),u&&r.addCase(y.rejected,u),f&&r.addMatcher(y.settled,f),r.exposeCaseReducer(t,{fulfilled:s||al,pending:l||al,rejected:u||al,settled:f||al})}function al(){}function Wn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Vs(e){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(e)}function tE(e,t){if(Vs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nE(e){var t=tE(e,"string");return Vs(t)=="symbol"?t:t+""}function rE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nE(r.key),r)}}function zr(e,t,n){return t&&rE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oh(e){return Array.isArray(e)?e.slice(0):[e]}function sh(e){return Array.isArray(e)}function iE(e){return e!=null}function mf(e,t){var n=0,r=-1;for(var i of e){r=r+1;var o=t(i,r);if(o)n=n+1;else break}return n}function Hs(e,t){var n=t.length;if(n!==0){var r=e.length;e.length=r+t.length;for(var i=0;i<n;++i)e[r+i]=t[i]}}function oE(e){return e.filter(function(t,n,r){return r.indexOf(t)===n})}function Qs(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(r==="-")return parseInt(t,10);t+=r}throw new Error("malformatted revision: "+e)}function Ad(e,t){var n=t?Qs(t._rev)+1:1;return n+"-"+e}function sE(e){var t=e.split("."),n=t.length;return n===1?r=>r[e]:r=>{for(var i=r,o=0;o<n;++o){var s=t[o];if(i=i[s],typeof i>"u")return i}return i}}function ut(e){return Object.assign({},e)}function aE(e){return Object.keys(e)[0]}function uu(e,t=!1){if(!e)return e;if(!t&&Array.isArray(e))return e.sort((r,i)=>typeof r=="string"&&typeof i=="string"?r.localeCompare(i):typeof r=="object"?1:-1).map(r=>uu(r,t));if(typeof e=="object"&&!Array.isArray(e)){var n={};return Object.keys(e).sort((r,i)=>r.localeCompare(i)).forEach(r=>{n[r]=uu(e[r],t)}),n}return e}function Nd(e){if(!e||e===null||typeof e!="object")return e;if(Array.isArray(e)){for(var t=new Array(e.length),n=t.length;n--;)t[n]=Nd(e[n]);return t}var r={};for(var i in e)r[i]=Nd(e[i]);return r}var ho=Nd;function qn(e,t,n){return Object.defineProperty(e,t,{get:function(){return n}}),n}var dx=1;function Ku(){return{lwt:dx}}function Wu(){return""}function lE(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}function uE(e,t,n){if(t.length!==n.length)return!1;for(var r=0,i=t.length;r<i;){var o=t[r],s=n[r];if(r++,o._rev!==s._rev||o[e]!==s[e])return!1}return!0}var cE=Object.defineProperty,fE=(e,t,n)=>t in e?cE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qi=(e,t,n)=>(fE(e,typeof t!="symbol"?t+"":t,n),n);class jr{constructor(t,n){Qi(this,"words"),Qi(this,"sigBytes"),t=this.words=t||[],this.sigBytes=n===void 0?t.length*4:n}toString(t){return(t||dE).stringify(this)}concat(t){if(this.clamp(),this.sigBytes%4)for(let n=0;n<t.sigBytes;n++){const r=t.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=r<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<t.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=t.words[n>>>2];return this.sigBytes+=t.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new jr([...this.words])}}const dE={stringify(e){const t=[];for(let n=0;n<e.sigBytes;n++){const r=e.words[n>>>2]>>>24-n%4*8&255;t.push((r>>>4).toString(16),(r&15).toString(16))}return t.join("")}},pE={parse(e){const t=e.length,n=[];for(let r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-r%4*8;return new jr(n,t)}},hE={parse(e){return pE.parse(unescape(encodeURIComponent(e)))}};class mE{constructor(){Qi(this,"_data",new jr),Qi(this,"_nDataBytes",0),Qi(this,"_minBufferSize",0),Qi(this,"blockSize",512/32)}reset(){this._data=new jr,this._nDataBytes=0}_append(t){typeof t=="string"&&(t=hE.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_doProcessBlock(t,n){}_process(t){let n,r=this._data.sigBytes/(this.blockSize*4);t?r=Math.ceil(r):r=Math.max((r|0)-this._minBufferSize,0);const i=r*this.blockSize,o=Math.min(i*4,this._data.sigBytes);if(i){for(let s=0;s<i;s+=this.blockSize)this._doProcessBlock(this._data.words,s);n=this._data.words.splice(0,i),this._data.sigBytes-=o}return new jr(n,o)}}class yE extends mE{update(t){return this._append(t),this._process(),this}finalize(t){t&&this._append(t)}}var vE=Object.defineProperty,gE=(e,t,n)=>t in e?vE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xE=(e,t,n)=>(gE(e,t+"",n),n);const $y=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],SE=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Jr=[];class wE extends yE{constructor(){super(...arguments),xE(this,"_hash",new jr([...$y]))}reset(){super.reset(),this._hash=new jr([...$y])}_doProcessBlock(t,n){const r=this._hash.words;let i=r[0],o=r[1],s=r[2],l=r[3],u=r[4],f=r[5],h=r[6],y=r[7];for(let g=0;g<64;g++){if(g<16)Jr[g]=t[n+g]|0;else{const k=Jr[g-15],C=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,T=Jr[g-2],z=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;Jr[g]=C+Jr[g-7]+z+Jr[g-16]}const S=u&f^~u&h,E=i&o^i&s^o&s,P=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),A=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),w=y+A+S+SE[g]+Jr[g],b=P+E;y=h,h=f,f=u,u=l+w|0,l=s,s=o,o=i,i=w+b|0}r[0]=r[0]+i|0,r[1]=r[1]+o|0,r[2]=r[2]+s|0,r[3]=r[3]+l|0,r[4]=r[4]+u|0,r[5]=r[5]+f|0,r[6]=r[6]+h|0,r[7]=r[7]+y|0}finalize(t){super.finalize(t);const n=this._nDataBytes*8,r=this._data.sigBytes*8;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(r+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function bE(e){return new wE().finalize(e).toString()}function _E(e){return Promise.resolve(bE(e))}async function kE(e){var t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t),r=Array.prototype.map.call(new Uint8Array(n),i=>("00"+i.toString(16)).slice(-2)).join("");return r}var EE=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",px=EE?kE:_E;function CE(){return new Promise(e=>setTimeout(e,0))}function TE(e=0){return new Promise(t=>setTimeout(t,e))}Promise.resolve(!0);var oi=Promise.resolve(!1),jE=Promise.resolve(null),Ss=Promise.resolve();function qu(e=1e4){return typeof requestIdleCallback=="function"?new Promise(t=>{requestIdleCallback(()=>t(),{timeout:e})}):TE(0)}var yf=Ss;function PE(e=void 0){return yf=yf.then(()=>qu(e)),yf}function OE(e,t){return e.reduce((n,r)=>n.then(r),Promise.resolve(t))}var IE=/\./g,Ly="abcdefghijklmnopqrstuvwxyz";function Vu(e=10){for(var t="",n=0;n<e;n++)t+=Ly.charAt(Math.floor(Math.random()*Ly.length));return t}function hx(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)}function ls(e){for(;e.charAt(0)===".";)e=e.substr(1);for(;e.slice(-1)===".";)e=e.slice(0,-1);return e}function cu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r;if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!cu(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){var o=i[r];if(!cu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}var Md=e=>{var t=typeof e;return e!==null&&(t==="object"||t==="function")},vf=new Set(["__proto__","prototype","constructor"]),RE=new Set("0123456789");function mx(e){var t=[],n="",r="start",i=!1;for(var o of e)switch(o){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=o),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=o;break}if(vf.has(n))return[];t.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=o;break}if(r==="property"){if(vf.has(n))return[];t.push(n),n=""}r="index";break}case"]":{if(r==="index"){t.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!RE.has(o))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=o}}switch(i&&(n+="\\"),r){case"property":{if(vf.has(n))return[];t.push(n);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function yx(e,t){if(typeof t!="number"&&Array.isArray(e)){var n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}function DE(e,t){if(yx(e,t))throw new Error("Cannot use string index")}function To(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return e[t];if(!Md(e)||typeof t!="string")return n===void 0?e:n;var r=mx(t);if(r.length===0)return n;for(var i=0;i<r.length;i++){var o=r[i];if(yx(e,o)?e=i===r.length-1?void 0:null:e=e[o],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function vx(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!Md(e)||typeof t!="string")return e;for(var r=e,i=mx(t),o=0;o<i.length;o++){var s=i[o];DE(e,s),o===i.length-1?e[s]=n:Md(e[s])||(e[s]=typeof i[o+1]=="number"?[]:{}),e=e[s]}return r}function Gs(e,t){var n=e.get(t);if(typeof n>"u")throw new Error("missing value from map "+t);return n}function vi(e,t,n,r){var i=e.get(t);return typeof i>"u"&&(i=n(),e.set(t,i)),i}function je(e){var t=e.split("-"),n="RxDB";return t.forEach(r=>{n+=hx(r)}),n+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+n+" } from 'rxdb/plugins/"+e+`';
            addRxPlugin(`+n+`);
        `)}var gf=0;function sn(){var e=Date.now();e=e+.01,e<=gf&&(e=gf+.01);var t=parseFloat(e.toFixed(2));return gf=t,t}function Ve(e,t){if(!e)throw t||(t=""),new Error("ensureNotFalsy() is falsy: "+t);return e}var gx={bufferSize:1,refCount:!0},xx="15.39.0",xf={},AE="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93";function Ys(e,t){return Ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ys(e,t)}function Sx(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ys(e,t)}function Bd(e){return Bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bd(e)}function NE(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function wx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wx=function(){return!!e})()}function ME(e,t,n){if(wx())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&Ys(i,n.prototype),i}function fu(e){var t=typeof Map=="function"?new Map:void 0;return fu=function(r){if(r===null||!NE(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return ME(r,arguments,Bd(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ys(i,r)},fu(e)}var ct={isDevMode(){return!1},deepFreezeWhenDevMode(e){return e},tunnelErrorMessage(e){return"RxDB Error-Code "+e+`.
        Error messages are not included in RxDB core to reduce build size.
        `}};function BE(e){var t="";return Object.keys(e).length===0||(t+=`Given parameters: {
`,t+=Object.keys(e).map(n=>{var r="[object Object]";try{n==="errors"?r=e[n].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):r=JSON.stringify(e[n],function(i,o){return o===void 0?null:o},2)}catch{}return n+":"+r}).join(`
`),t+="}"),t}function bx(e,t,n){return"RxError ("+t+`):
`+e+`
`+BE(n)}var zE=function(e){function t(r,i,o={}){var s,l=bx(i,r,o);return s=e.call(this,l)||this,s.code=r,s.message=l,s.url=ah(r),s.parameters=o,s.rxdb=!0,s}Sx(t,e);var n=t.prototype;return n.toString=function(){return this.message},zr(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(fu(Error)),$E=function(e){function t(r,i,o={}){var s,l=bx(i,r,o);return s=e.call(this,l)||this,s.code=r,s.message=l,s.url=ah(r),s.parameters=o,s.rxdb=!0,s}Sx(t,e);var n=t.prototype;return n.toString=function(){return this.message},zr(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(fu(TypeError));function ah(e){return"https://rxdb.info/errors.html?console=errors#"+e}function _x(e){return`
 You can find out more about this error here: `+ah(e)+" "}function fe(e,t){return new zE(e,ct.tunnelErrorMessage(e)+_x(e),t)}function El(e,t){return new $E(e,ct.tunnelErrorMessage(e)+_x(e),t)}function kx(e){return e&&e.status===409?e:!1}var LE={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function FE(e){return fe("COL20",{name:LE[e.status],document:e.documentId,writeError:e})}var Js={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function un(e,t){Js[e].length>0&&Js[e].forEach(n=>n(t))}function ca(e,t){return Promise.all(Js[e].map(n=>n(t)))}function Xs(e,t){var n=t;n=n.replace(IE,".properties."),n="properties."+n,n=ls(n);var r=To(e,n);return r}function UE(e,t,n){if(typeof t.primaryKey=="string")return n;var r=lh(t,n),i=n[e];if(i&&i!==r)throw fe("DOC19",{args:{documentData:n,existingPrimary:i,newPrimary:r},schema:t});return n[e]=r,n}function wi(e){return typeof e=="string"?e:e.key}function lh(e,t){if(typeof e.primaryKey=="string")return t[e.primaryKey];var n=e.primaryKey;return n.fields.map(r=>{var i=To(t,r);if(typeof i>"u")throw fe("DOC18",{args:{field:r,documentData:t}});return i}).join(n.separator)}function KE(e){var t=uu(e,!0);return t}function WE(e){return["_deleted",e]}function Ex(e){e=ut(e);var t=wi(e.primaryKey);e.properties=ut(e.properties),e.additionalProperties=!1,Object.prototype.hasOwnProperty.call(e,"keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=qE,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var n=Cx(e);Hs(e.required,n),e.required=e.required.filter(o=>!o.includes(".")).filter((o,s,l)=>l.indexOf(o)===s),e.version=e.version||0;var r=e.indexes.map(o=>{var s=sh(o)?o.slice(0):[o];return s.includes(t)||s.push(t),s[0]!=="_deleted"&&s.unshift("_deleted"),s});r.length===0&&r.push(WE(t)),r.push(["_meta.lwt",t]),e.internalIndexes&&e.internalIndexes.map(o=>{r.push(o)});var i=new Set;return r.filter(o=>{var s=o.join(",");return i.has(s)?!1:(i.add(s),!0)}),e.indexes=r,e}var qE={type:"object",properties:{lwt:{type:"number",minimum:dx,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function Cx(e){var t=Object.keys(e.properties).filter(r=>e.properties[r].final),n=wi(e.primaryKey);return t.push(n),typeof e.primaryKey!="string"&&e.primaryKey.fields.forEach(r=>t.push(r)),t}function VE(e,t){for(var n=Object.keys(e.defaultValues),r=0;r<n.length;++r){var i=n[r];(!Object.prototype.hasOwnProperty.call(t,i)||typeof t[i]>"u")&&(t[i]=e.defaultValues[i])}return t}var Tx=function(){function e(n,r){this.jsonSchema=n,this.hashFunction=r,this.indexes=HE(this.jsonSchema),this.primaryPath=wi(this.jsonSchema.primaryKey),this.finalFields=Cx(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(r,i){this.finalFields.forEach(o=>{if(!cu(r[o],i[o]))throw fe("DOC9",{dataBefore:r,dataAfter:i,fieldName:o,schema:this.jsonSchema})})},t.getDocumentPrototype=function(){var r={},i=Xs(this.jsonSchema,"");return Object.keys(i).forEach(o=>{var s=o;r.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var l=this.get(s);return l}}),Object.defineProperty(r,o+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(r,o+"$$",{get:function(){return this.get$$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(r,o+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),qn(this,"getDocumentPrototype",()=>r),r},t.getPrimaryOfDocumentData=function(r){return lh(this.jsonSchema,r)},zr(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,i])=>n[r]=i.default),qn(this,"defaultValues",n)}},{key:"hash",get:function(){return qn(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function HE(e){return(e.indexes||[]).map(t=>sh(t)?t:[t])}function QE(e,t,n=!0){n&&un("preCreateRxSchema",e);var r=Ex(e);r=KE(r),ct.deepFreezeWhenDevMode(r);var i=new Tx(r,t);return un("createRxSchema",i),i}function tt(e){return typeof e=="function"}function GE(e){return tt(e==null?void 0:e.lift)}function rr(e){return function(t){if(GE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var zd=function(e,t){return zd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},zd(e,t)};function bi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function YE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(h){try{f(r.next(h))}catch(y){s(y)}}function u(h){try{f(r.throw(h))}catch(y){s(y)}}function f(h){h.done?o(h.value):i(h.value).then(l,u)}f((r=r.apply(e,t||[])).next())})}function jx(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(h){return u([f,h])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function mo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yo(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function vo(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function to(e){return this instanceof to?(this.v=e,this):new to(e)}function JE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(S){return function(E){return Promise.resolve(E).then(S,y)}}function l(S,E){r[S]&&(i[S]=function(P){return new Promise(function(A,w){o.push([S,P,A,w])>1||u(S,P)})},E&&(i[S]=E(i[S])))}function u(S,E){try{f(r[S](E))}catch(P){g(o[0][3],P)}}function f(S){S.value instanceof to?Promise.resolve(S.value.v).then(h,y):g(o[0][2],S)}function h(S){u("next",S)}function y(S){u("throw",S)}function g(S,E){S(E),o.shift(),o.length&&u(o[0][0],o[0][1])}}function XE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof mo=="function"?mo(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(l,u){s=e[o](s),i(l,u,s.done,s.value)})}}function i(o,s,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},s)}}var Px=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Ox(e){return tt(e==null?void 0:e.then)}function Ix(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sf=Ix(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function $d(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Hu=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=mo(s),u=l.next();!u.done;u=l.next()){var f=u.value;f.remove(this)}}catch(P){t={error:P}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else s.remove(this);var h=this.initialTeardown;if(tt(h))try{h()}catch(P){o=P instanceof Sf?P.errors:[P]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var g=mo(y),S=g.next();!S.done;S=g.next()){var E=S.value;try{Fy(E)}catch(P){o=o??[],P instanceof Sf?o=vo(vo([],yo(o)),yo(P.errors)):o.push(P)}}}catch(P){r={error:P}}finally{try{S&&!S.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}}if(o)throw new Sf(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Fy(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&$d(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&$d(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Rx=Hu.EMPTY;function Dx(e){return e instanceof Hu||e&&"closed"in e&&tt(e.remove)&&tt(e.add)&&tt(e.unsubscribe)}function Fy(e){tt(e)?e():e.unsubscribe()}var ZE={Promise:void 0},eC={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,vo([e,t],yo(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Ax(e){eC.setTimeout(function(){throw e})}function Uy(){}function Cl(e){e()}var uh=function(e){bi(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Dx(n)&&n.add(r)):r.destination=rC,r}return t.create=function(n,r,i){return new Zs(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Hu),tC=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){ll(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){ll(r)}else ll(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){ll(n)}},e}(),Zs=function(e){bi(t,e);function t(n,r,i){var o=e.call(this)||this,s;return tt(n)||!n?s={next:n??void 0,error:r??void 0,complete:i??void 0}:s=n,o.destination=new tC(s),o}return t}(uh);function ll(e){Ax(e)}function nC(e){throw e}var rC={closed:!0,next:Uy,error:nC,complete:Uy},ch=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function fh(e){return e}function iC(e){return e.length===0?fh:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var cn=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=sC(t)?t:new Zs(t,n,r);return Cl(function(){var s=i,l=s.operator,u=s.source;o.add(l?l.call(o,u):u?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Ky(n),new n(function(i,o){var s=new Zs({next:function(l){try{t(l)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[ch]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iC(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Ky(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function Ky(e){var t;return(t=e??ZE.Promise)!==null&&t!==void 0?t:Promise}function oC(e){return e&&tt(e.next)&&tt(e.error)&&tt(e.complete)}function sC(e){return e&&e instanceof uh||oC(e)&&Dx(e)}function Nx(e){return tt(e[ch])}function Mx(e){return Symbol.asyncIterator&&tt(e==null?void 0:e[Symbol.asyncIterator])}function Bx(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function aC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zx=aC();function $x(e){return tt(e==null?void 0:e[zx])}function Lx(e){return JE(this,arguments,function(){var n,r,i,o;return jx(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,to(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,to(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,to(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Fx(e){return tt(e==null?void 0:e.getReader)}function $r(e){if(e instanceof cn)return e;if(e!=null){if(Nx(e))return lC(e);if(Px(e))return uC(e);if(Ox(e))return cC(e);if(Mx(e))return Ux(e);if($x(e))return fC(e);if(Fx(e))return dC(e)}throw Bx(e)}function lC(e){return new cn(function(t){var n=e[ch]();if(tt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uC(e){return new cn(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function cC(e){return new cn(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Ax)})}function fC(e){return new cn(function(t){var n,r;try{for(var i=mo(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Ux(e){return new cn(function(t){pC(e,t).catch(function(n){return t.error(n)})})}function dC(e){return Ux(Lx(e))}function pC(e,t){var n,r,i,o;return YE(this,void 0,void 0,function(){var s,l;return jx(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=XE(e),u.label=1;case 1:return[4,n.next()];case 2:if(r=u.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=u.sent(),i={error:l},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function go(e,t,n,r,i){return new hC(e,t,n,r,i)}var hC=function(e){bi(t,e);function t(n,r,i,o,s,l){var u=e.call(this,n)||this;return u.onFinalize=s,u.shouldUnsubscribe=l,u._next=r?function(f){try{r(f)}catch(h){n.error(h)}}:e.prototype._next,u._error=o?function(f){try{o(f)}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=i?function(){try{i()}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._complete,u}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(uh),Kx={now:function(){return(Kx.delegate||Date).now()},delegate:void 0};function mC(e){return e&&tt(e.schedule)}function Wx(e){return e[e.length-1]}function Qu(e){return mC(Wx(e))?e.pop():void 0}function qx(e,t){return typeof Wx(e)=="number"?e.pop():t}function li(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Vx(e,t){return t===void 0&&(t=0),rr(function(n,r){n.subscribe(go(r,function(i){return li(r,e,function(){return r.next(i)},t)},function(){return li(r,e,function(){return r.complete()},t)},function(i){return li(r,e,function(){return r.error(i)},t)}))})}function Hx(e,t){return t===void 0&&(t=0),rr(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function yC(e,t){return $r(e).pipe(Hx(t),Vx(t))}function vC(e,t){return $r(e).pipe(Hx(t),Vx(t))}function gC(e,t){return new cn(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function xC(e,t){return new cn(function(n){var r;return li(n,t,function(){r=e[zx](),li(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(l){n.error(l);return}s?n.complete():n.next(o)},0,!0)}),function(){return tt(r==null?void 0:r.return)&&r.return()}})}function Qx(e,t){if(!e)throw new Error("Iterable cannot be null");return new cn(function(n){li(n,t,function(){var r=e[Symbol.asyncIterator]();li(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function SC(e,t){return Qx(Lx(e),t)}function wC(e,t){if(e!=null){if(Nx(e))return yC(e,t);if(Px(e))return gC(e,t);if(Ox(e))return vC(e,t);if(Mx(e))return Qx(e,t);if($x(e))return xC(e,t);if(Fx(e))return SC(e,t)}throw Bx(e)}function dh(e,t){return t?wC(e,t):$r(e)}function yn(e,t){return rr(function(n,r){var i=0;n.subscribe(go(r,function(o){r.next(e.call(t,o,i++))}))})}function bC(e,t,n,r,i,o,s,l){var u=[],f=0,h=0,y=!1,g=function(){y&&!u.length&&!f&&t.complete()},S=function(P){return f<r?E(P):u.push(P)},E=function(P){f++;var A=!1;$r(n(P,h++)).subscribe(go(t,function(w){t.next(w)},function(){A=!0},void 0,function(){if(A)try{f--;for(var w=function(){var b=u.shift();s||E(b)};u.length&&f<r;)w();g()}catch(b){t.error(b)}}))};return e.subscribe(go(t,S,function(){y=!0,g()})),function(){}}function fa(e,t,n){return n===void 0&&(n=1/0),tt(t)?fa(function(r,i){return yn(function(o,s){return t(r,o,i,s)})($r(e(r,i)))},n):(typeof t=="number"&&(n=t),rr(function(r,i){return bC(r,i,e,n)}))}function ph(e){return e===void 0&&(e=1/0),fa(fh,e)}function _C(){return ph(1)}var kC=Ix(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Dr=function(e){bi(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new Wy(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new kC},t.prototype.next=function(n){var r=this;Cl(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=mo(r.currentObservers),l=s.next();!l.done;l=s.next()){var u=l.value;u.next(n)}}catch(f){i={error:f}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Cl(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Cl(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,l=i.observers;return o||s?Rx:(this.currentObservers=null,l.push(n),new Hu(function(){r.currentObservers=null,$d(l,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new cn;return n.source=this,n},t.create=function(n,r){return new Wy(n,r)},t}(cn),Wy=function(e){bi(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Rx},t}(Dr);function qy(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _C()(dh(e,Qu(e)))}var EC=new cn(function(e){return e.complete()});function Ld(e,t){return t===void 0&&(t=fh),e=e??CC,rr(function(n,r){var i,o=!0;n.subscribe(go(r,function(s){var l=t(s);(o||!e(i,l))&&(o=!1,i=l,r.next(s))}))})}function CC(e,t){return e===t}function Ut(e,t){return rr(function(n,r){var i=0;n.subscribe(go(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function TC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Qu(e),r=qx(e,1/0);return rr(function(i,o){ph(r)(dh(vo([i],yo(e)),n)).subscribe(o)})}function jC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return TC.apply(void 0,vo([],yo(e)))}var PC=function(e){bi(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(Dr),OC=function(e){bi(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=Kx);var o=e.call(this)||this;return o._bufferSize=n,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,n),o._windowTime=Math.max(1,r),o}return t.prototype.next=function(n){var r=this,i=r.isStopped,o=r._buffer,s=r._infiniteTimeWindow,l=r._timestampProvider,u=r._windowTime;i||(o.push(n),!s&&o.push(l.now()+u)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,o=i._infiniteTimeWindow,s=i._buffer,l=s.slice(),u=0;u<l.length&&!n.closed;u+=o?1:2)n.next(l[u]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,o=n._buffer,s=n._infiniteTimeWindow,l=(s?1:2)*r;if(r<1/0&&l<o.length&&o.splice(0,o.length-l),!s){for(var u=i.now(),f=0,h=1;h<o.length&&o[h]<=u;h+=2)f=h;f&&o.splice(0,f+1)}},t}(Dr);function IC(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new Dr}:t,r=e.resetOnError,i=r===void 0?!0:r,o=e.resetOnComplete,s=o===void 0?!0:o,l=e.resetOnRefCountZero,u=l===void 0?!0:l;return function(f){var h,y,g,S=0,E=!1,P=!1,A=function(){y==null||y.unsubscribe(),y=void 0},w=function(){A(),h=g=void 0,E=P=!1},b=function(){var k=h;w(),k==null||k.unsubscribe()};return rr(function(k,C){S++,!P&&!E&&A();var T=g=g??n();C.add(function(){S--,S===0&&!P&&!E&&(y=wf(b,u))}),T.subscribe(C),!h&&S>0&&(h=new Zs({next:function(z){return T.next(z)},error:function(z){P=!0,A(),y=wf(w,i,z),T.error(z)},complete:function(){E=!0,A(),y=wf(w,s),T.complete()}}),$r(k).subscribe(h))})(f)}}function wf(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new Zs({next:function(){i.unsubscribe(),e()}});return $r(t.apply(void 0,vo([],yo(n)))).subscribe(i)}}function Gx(e,t,n){var r,i,o,s,l=!1;return e&&typeof e=="object"?(r=e.bufferSize,s=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,o=e.refCount,l=o===void 0?!1:o,n=e.scheduler):s=e??1/0,IC({connector:function(){return new OC(s,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function Yx(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Qu(e);return rr(function(r,i){(n?qy(e,r,n):qy(e,r)).subscribe(i)})}function RC(e){return e.documentData?e.documentData:e.previousDocumentData}function DC(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:ct.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}function AC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Qu(e),r=qx(e,1/0),i=e;return i.length?i.length===1?$r(i[0]):ph(r)(dh(i,n)):EC}function hh(e){return e[e.length-1]}function NC(e){const t=typeof e;return e!==null&&(t==="object"||t==="function")}function Vy(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!NC(e)||typeof t!="string")return e;const r=t.split(".");if(r.length===0)return n;for(let i=0;i<r.length;i++){const o=r[i];if(MC(e,o)?e=i===r.length-1?void 0:null:e=e[o],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function MC(e,t){if(typeof t!="number"&&Array.isArray(e)){const n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}const Jx=e=>!!e.queryParams.limit,BC=e=>e.queryParams.limit===1,zC=e=>!!(e.queryParams.skip&&e.queryParams.skip>0),$C=e=>e.changeEvent.operation==="DELETE",LC=e=>e.changeEvent.operation==="INSERT",FC=e=>e.changeEvent.operation==="UPDATE",UC=e=>Jx(e)&&e.previousResults.length>=e.queryParams.limit,KC=e=>{const t=e.queryParams.sortFields,n=e.changeEvent.previous,r=e.changeEvent.doc;if(!r)return!1;if(!n)return!0;for(let i=0;i<t.length;i++){const o=t[i],s=Vy(n,o),l=Vy(r,o);if(s!==l)return!0}return!1},WC=e=>{const t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);{const n=e.queryParams.primaryKey,r=e.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===t)return!0;return!1}},qC=e=>{const t=e.previousResults[0];return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},VC=e=>{const t=hh(e.previousResults);return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},HC=e=>{const t=e.changeEvent.previous;if(!t)return!1;const n=e.previousResults[0];return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)<0:!1},QC=e=>{const t=e.changeEvent.previous;if(!t)return!1;const n=hh(e.previousResults);return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)>0:!1},GC=e=>{const t=e.changeEvent.doc;if(!t)return!1;const n=e.previousResults[0];return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)<0:!1},YC=e=>{const t=e.changeEvent.doc;if(!t)return!1;const n=hh(e.previousResults);return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)>0:!1},JC=e=>{const t=e.changeEvent.previous;return t?e.queryParams.queryMatcher(t):!1},XC=e=>{const t=e.changeEvent.doc;return t?e.queryParams.queryMatcher(t):!1},ZC=e=>e.previousResults.length===0,eT={0:LC,1:FC,2:$C,3:Jx,4:BC,5:zC,6:ZC,7:UC,8:qC,9:VC,10:KC,11:WC,12:HC,13:QC,14:GC,15:YC,16:JC,17:XC};function tT(e,t,n,r){var i=e.length,o=i-1,s=0;if(i===0)return e.push(t),0;for(var l;r<=o;)s=r+(o-r>>1),l=e[s],n(l,t)<=0?r=s+1:o=s-1;return n(l,t)<=0&&s++,e.splice(s,0,t),s}const nT=e=>{},mh=e=>{e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},yh=e=>{e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},vh=e=>{const t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},gh=e=>{const t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},rT=e=>{vh(e),yh(e)},iT=e=>{gh(e),mh(e)},oT=e=>{vh(e),mh(e)},sT=e=>{gh(e),yh(e)},Xx=e=>{e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);const t=e.queryParams.primaryKey,n=e.previousResults;for(let r=0;r<n.length;r++)if(n[r][t]===e.changeEvent.id){n.splice(r,1);break}},aT=e=>{const t=e.changeEvent.doc,n=e.queryParams.primaryKey,r=e.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===e.changeEvent.id){r[i]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},lT=e=>{const t={_id:"wrongHuman"+new Date().getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},Zx=e=>{const t=e.changeEvent.id,n=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,n)}else if(e.previousResults.find(i=>i[e.queryParams.primaryKey]===t))return;tT(e.previousResults,n,e.queryParams.sortComparator,0)},uT=e=>{Xx(e),Zx(e)},cT=e=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},fT=e=>{throw new Error("Action unknownAction should never be called")},dT=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],pT={doNothing:nT,insertFirst:mh,insertLast:yh,removeFirstItem:vh,removeLastItem:gh,removeFirstInsertLast:rT,removeLastInsertFirst:iT,removeFirstInsertFirst:oT,removeLastInsertLast:sT,removeExisting:Xx,replaceExisting:aT,alwaysWrong:lT,insertAtSortPosition:Zx,removeExistingAndInsertAtSortPosition:uT,runFullQueryAgain:cT,unknownAction:fT},hT=40;function bf(e){return e.charCodeAt(0)-hT}function mT(e){return e?"1":"0"}function Hy(e,t){const n=[];for(let r=0,i=e.length;r<i;r+=t)n.push(e.substring(r,r+t));return n}function yT(e){const t=new Map,r=2+parseInt(e.charAt(0)+e.charAt(1),10)*2,i=e.substring(2,r),o=Hy(i,2);for(let P=0;P<o.length;P++){const A=o[P],w=A.charAt(0),b=bf(A.charAt(1));t.set(w,b)}const s=e.substring(r,e.length-3),l=Hy(s,4);for(let P=0;P<l.length;P++){const A=l[P],w=A.charAt(0),b=A.charAt(1),k=A.charAt(2),C=bf(A.charAt(3));if(!t.has(b))throw new Error("missing node with id "+b);if(!t.has(k))throw new Error("missing node with id "+k);const T=t.get(b),z=t.get(k),U={l:C,0:T,1:z};t.set(w,U)}const u=e.slice(-3),f=u.charAt(0),h=u.charAt(1),y=bf(u.charAt(2)),g=t.get(f),S=t.get(h);return{l:y,0:g,1:S}}function vT(e,t,n){let r=e,i=e.l;for(;;){const o=t[i](n),s=mT(o);if(r=r[s],typeof r=="number"||typeof r=="string")return r;i=r.l}}const gT="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9bf9bq9cg9ck9cn9nd9np9nq9nf9ng9nm9nk9mr9ms9mt9mj9mk9ml9mn9mc8{8}888mn88m8m4z4w4z44444m4v7yn77~777n777m77m7m7m5m5m55m555m55m5m552|2u2222x222|222222n2n222n2/an/bn/cn///////////,cn,,,,,,,ac0bc00000000000m-m-----------3333(((++++11*m*.";let _f;function xT(){return _f||(_f=yT(gT)),_f}const ST=e=>vT(xT(),eT,e);function wT(e){const t=ST(e);return dT[t]}function bT(e,t,n,r,i){const o=pT[e];return o({queryParams:t,changeEvent:n,previousResults:r,keyDocumentMap:i}),r}var no="",ro=Number.MIN_SAFE_INTEGER;function _T(e,t){var n=t.selector,r=e.indexes?e.indexes.slice(0):[];t.index&&(r=[t.index]);var i=!!t.sort.find(h=>Object.values(h)[0]==="desc"),o=new Set;Object.keys(n).forEach(h=>{var y=Xs(e,h);y&&y.type==="boolean"&&Object.prototype.hasOwnProperty.call(n[h],"$eq")&&o.add(h)});var s=t.sort.map(h=>Object.keys(h)[0]),l=s.filter(h=>!o.has(h)).join(","),u=-1,f;if(r.forEach(h=>{var y=!0,g=!0,S=h.map(b=>{var k=n[b],C=k?Object.keys(k):[],T={};if(!k||!C.length){var z=g?ro:no;T={startKey:z,endKey:y?no:ro,inclusiveStart:!0,inclusiveEnd:!0}}else C.forEach(U=>{if(xh.has(U)){var q=k[U],X=TT(U,q);T=Object.assign(T,X)}});return typeof T.startKey>"u"&&(T.startKey=ro),typeof T.endKey>"u"&&(T.endKey=no),typeof T.inclusiveStart>"u"&&(T.inclusiveStart=!0),typeof T.inclusiveEnd>"u"&&(T.inclusiveEnd=!0),g&&!T.inclusiveStart&&(g=!1),y&&!T.inclusiveEnd&&(y=!1),T}),E=S.map(b=>b.startKey),P=S.map(b=>b.endKey),A={index:h,startKeys:E,endKeys:P,inclusiveEnd:y,inclusiveStart:g,sortSatisfiedByIndex:!i&&l===h.filter(b=>!o.has(b)).join(","),selectorSatisfiedByIndex:CT(h,t.selector,E,P)},w=jT(e,t,A);(w>=u||t.index)&&(u=w,f=A)}),!f)throw fe("SNH",{query:t});return f}var xh=new Set(["$eq","$gt","$gte","$lt","$lte"]),kT=new Set(["$eq","$gt","$gte"]),ET=new Set(["$eq","$lt","$lte"]);function CT(e,t,n,r){var i=Object.entries(t),o=i.find(([U,q])=>{if(!e.includes(U))return!0;var X=Object.entries(q).find(([oe,Ce])=>!xh.has(oe));return X});if(o||t.$and||t.$or)return!1;var s=[],l=new Set;for(var[u,f]of Object.entries(t)){if(!e.includes(u))return!1;var h=Object.keys(f).filter(U=>kT.has(U));if(h.length>1)return!1;var y=h[0];if(y&&l.add(u),y!=="$eq"){if(s.length>0)return!1;s.push(y)}}var g=[],S=new Set;for(var[E,P]of Object.entries(t)){if(!e.includes(E))return!1;var A=Object.keys(P).filter(U=>ET.has(U));if(A.length>1)return!1;var w=A[0];if(w&&S.add(E),w!=="$eq"){if(g.length>0)return!1;g.push(w)}}var b=0;for(var k of e){for(var C of[l,S]){if(!C.has(k)&&C.size>0)return!1;C.delete(k)}var T=n[b],z=r[b];if(T!==z&&l.size>0&&S.size>0)return!1;b++}return!0}function TT(e,t){switch(e){case"$eq":return{startKey:t,endKey:t,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:t,inclusiveEnd:!0};case"$gte":return{startKey:t,inclusiveStart:!0};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}function jT(e,t,n){var r=0,i=h=>{h>0&&(r=r+h)},o=10,s=mf(n.startKeys,h=>h!==ro&&h!==no);i(s*o);var l=mf(n.startKeys,h=>h!==no&&h!==ro);i(l*o);var u=mf(n.startKeys,(h,y)=>h===n.endKeys[y]);i(u*o*1.5);var f=n.sortSatisfiedByIndex?5:0;return i(f),r}class _i extends Error{}const PT=2147483647,OT=-2147483648,IT=Number.MAX_SAFE_INTEGER,RT=Number.MIN_SAFE_INTEGER,Jn=Symbol("missing"),eS=Object.freeze(new Error("mingo: cycle detected while processing object/array")),DT="[object Object]",AT=/^\[object ([a-zA-Z0-9]+)\]$/,da=e=>{const t=LT(e);let n=0,r=t.length;for(;r;)n=(n<<5)-n^t.charCodeAt(--r);return n>>>0},tS=new Set(["null","undefined","boolean","number","string","date","regexp"]),NT={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Mt=(e,t)=>{e===Jn&&(e=void 0),t===Jn&&(t=void 0);const[n,r]=[e,t].map(i=>NT[ea(i).toLowerCase()]);return n!==r?n-r:n===1||n===2||n===6?e<t?-1:e>t?1:0:In(e,t)?0:e<t?-1:e>t?1:0};function Je(e,t){if(!e)throw new _i(t)}const ea=e=>AT.exec(Object.prototype.toString.call(e))[1],kf=e=>typeof e=="boolean",Xn=e=>typeof e=="string",Kt=e=>!isNaN(e)&&typeof e=="number",Xe=Array.isArray,ze=e=>{if(!e)return!1;const t=Object.getPrototypeOf(e);return(t===Object.prototype||t===null)&&DT===Object.prototype.toString.call(e)},Gu=e=>e===Object(e),du=e=>e instanceof Date,ws=e=>e instanceof RegExp,Sh=e=>typeof e=="function",dt=e=>e==null,xo=(e,t)=>e.includes(t),nS=(e,t)=>!xo(e,t),So=(e,t=!0)=>!!e||t&&e==="",jo=e=>dt(e)||Xn(e)&&!e||e instanceof Array&&e.length===0||ze(e)&&Object.keys(e).length===0,Qy=e=>e===Jn,Po=e=>e instanceof Array?e:[e],Ht=(e,t)=>!!e&&Object.prototype.hasOwnProperty.call(e,t),wh=e=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e),MT=[du,ws,wh],Fd=(e,t)=>{if(dt(e))return e;if(t.has(e))throw eS;const n=e.constructor;if(MT.some(r=>r(e)))return new n(e);try{if(t.add(e),Xe(e))return e.map(r=>Fd(r,t));if(ze(e)){const r={};for(const i in e)r[i]=Fd(e[i],t);return r}}finally{t.delete(e)}return e},Ud=e=>Fd(e,new Set),BT=(e,t)=>ze(e)&&ze(t)||Xe(e)&&Xe(t);function Kd(e,t,n){if(n=n||{flatten:!1},Qy(e)||dt(e))return t;if(Qy(t)||dt(t))return e;if(!BT(e,t)){if(n.skipValidation)return t||e;throw Error("mismatched types. must both be array or object")}if(n.skipValidation=!0,Xe(e)){const r=e,i=t;if(n.flatten){let o=0,s=0;for(;o<r.length&&s<i.length;)r[o]=Kd(r[o++],i[s++],n);for(;s<i.length;)r.push(t[s++])}else pa(r,i)}else for(const r in t)e[r]=Kd(e[r],t[r],n);return e}function Wd(e,t=da){const n=new Map;return e.forEach((r,i)=>{const o=iS(r,t);n.has(o)?n.get(o).some(s=>In(e[s],r))||n.get(o).push(i):n.set(o,[i])}),n}function bh(e,t=da){if(e.some(l=>l.length==0))return[];if(e.length===1)return Array.from(e);const n=FT(e.map((l,u)=>[u,l.length]),l=>l[1]),r=e[n[0][0]],i=Wd(r,t),o=new Map,s=new Array;return i.forEach((l,u)=>{const f=l.map(S=>r[S]),h=f.map(S=>0),y=f.map(S=>[n[0][0],0]);let g=!1;for(let S=1;S<e.length;S++){const[E,P]=n[S],A=e[E];if(o.has(S)||o.set(S,Wd(A)),o.get(S).has(u)){const w=o.get(S).get(u).map(b=>A[b]);g=f.map((b,k)=>w.some((C,T)=>{const z=h[k];return In(b,C)&&(h[k]++,E<y[k][0]&&(y[k]=[E,o.get(S).get(u)[T]])),z<h[k]})).some(Boolean)}if(!g)return}g&&pa(s,h.map((S,E)=>S===e.length-1?[f[E],y[E]]:Jn).filter(S=>S!==Jn))}),s.sort((l,u)=>{const[f,[h,y]]=l,[g,[S,E]]=u,P=Mt(h,S);return P!==0?P:Mt(y,E)}).map(l=>l[0])}function rS(e,t=0){const n=new Array;function r(i,o){for(let s=0,l=i.length;s<l;s++)Xe(i[s])&&(o>0||o<0)?r(i[s],Math.max(-1,o-1)):n.push(i[s])}return r(e,t),n}const zT=e=>{let[t,n]=[Object.getPrototypeOf(e),Object.getOwnPropertyNames(e)],r=t;for(;!n.length&&t!==Object.prototype&&t!==Array.prototype;)r=t,n=Object.getOwnPropertyNames(t),t=Object.getPrototypeOf(t);const i={};return n.forEach(o=>i[o]=e[o]),[i,r]};function In(e,t){if(e===t||Object.is(e,t))return!0;const n=!!e&&e.constructor||e;if(e===null||t===null||e===void 0||t===void 0||n!==t.constructor||n===Function)return!1;if(n===Array||n===Object){const o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length||new Set([...o,...s]).size!=o.length)return!1;for(const l of o)if(!In(e[l],t[l]))return!1;return!0}const r=Object.getPrototypeOf(e);return(wh(e)||r!==Object.prototype&&r!==Array.prototype&&Object.prototype.hasOwnProperty.call(r,"toString"))&&e.toString()===t.toString()}function $T(e,t=da){const n=e.map(r=>Jn);return Wd(e,t).forEach((r,i)=>{r.forEach(o=>n[o]=e[o])}),n.filter(r=>r!==Jn)}const Tl=(e,t)=>{if(e===null)return"null";if(e===void 0)return"undefined";const n=e.constructor;switch(n){case RegExp:case Number:case Boolean:case Function:case Symbol:return e.toString();case String:return JSON.stringify(e);case Date:return e.toISOString()}if(wh(e))return n.name+"["+e.toString()+"]";if(t.has(e))throw eS;try{if(t.add(e),Xe(e))return"["+e.map(s=>Tl(s,t)).join(",")+"]";if(n===Object)return"{"+Object.keys(e).sort().map(s=>s+":"+Tl(e[s],t)).join(",")+"}";const r=Object.getPrototypeOf(e);if(r!==Object.prototype&&r!==Array.prototype&&Object.prototype.hasOwnProperty.call(r,"toString"))return n.name+"("+JSON.stringify(e.toString())+")";const[i,o]=zT(e);return n.name+Tl(i,t)}finally{t.delete(e)}},LT=e=>Tl(e,new Set);function iS(e,t){return t=t||da,dt(e)?null:t(e).toString()}function FT(e,t,n=Mt){if(jo(e))return e;const r=new Array,i=new Array;for(let o=0;o<e.length;o++){const s=e[o],l=t(s,o);dt(l)?i.push(s):r.push([l,s])}return r.sort((o,s)=>n(o[0],s[0])),pa(i,r.map(o=>o[1]))}function UT(e,t,n=da){if(e.length<1)return new Map;const r=new Map,i=new Map;for(let o=0;o<e.length;o++){const s=e[o],l=t(s,o),u=iS(l,n);if(u===null)i.has(null)?i.get(null).push(s):i.set(null,[s]);else{const f=r.has(u)?r.get(u).find(h=>In(h,l)):null;dt(f)?(i.set(l,[s]),r.has(u)?r.get(u).push(l):r.set(u,[l])):i.get(f).push(s)}}return i}const Ef=5e4;function pa(e,...t){return e instanceof Array?t.reduce((n,r)=>{let i=Math.ceil(r.length/Ef),o=0;for(;i-- >0;)Array.prototype.push.apply(n,r.slice(o,o+Ef)),o+=Ef;return n},e):t.filter(Gu).reduce((n,r)=>(Object.assign(n,r),n),e)}function qd(e,t){return Gu(e)?e[t]:void 0}function KT(e,t){if(t<1)return e;for(;t--&&e.length===1;)e=e[0];return e}function Oo(e,t,n){let r=0;function i(s,l){let u=s;for(let f=0;f<l.length;f++){const h=l[f];if(/^\d+$/.exec(h)===null&&u instanceof Array){if(f===0&&r>0)break;r+=1;const g=l.slice(f);u=u.reduce((S,E)=>{const P=i(E,g);return P!==void 0&&S.push(P),S},[]);break}else u=qd(u,h);if(u===void 0)break}return u}const o=tS.has(ea(e).toLowerCase())?e:i(e,t.split("."));return o instanceof Array&&(n!=null&&n.unwrapArray)?KT(o,r):o}function jl(e,t,n){const r=t.split("."),i=r[0],o=r.slice(1).join("."),s=/^\d+$/.exec(i)!==null,l=r.length>1;let u,f;if(e instanceof Array)if(s)u=qd(e,Number(i)),l&&(u=jl(u,o,n)),u=[u];else{u=[];for(const h of e)f=jl(h,t,n),n!=null&&n.preserveMissing?(f===void 0&&(f=Jn),u.push(f)):f!==void 0&&u.push(f)}else{if(f=qd(e,i),l&&(f=jl(f,o,n)),f===void 0)return;u=n!=null&&n.preserveKeys?{...e}:{},u[i]=f}return u}function Vd(e){if(e instanceof Array)for(let t=e.length-1;t>=0;t--)e[t]===Jn?e.splice(t,1):Vd(e[t]);else if(ze(e))for(const t in e)Ht(e,t)&&Vd(e[t])}const Gy=/^\d+$/;function ta(e,t,n,r){const i=t.split("."),o=i[0],s=i.slice(1).join(".");if(i.length===1)(ze(e)||Xe(e)&&Gy.test(o))&&n(e,o);else{r!=null&&r.buildGraph&&dt(e[o])&&(e[o]={});const l=e[o];if(!l)return;const u=!!(i.length>1&&Gy.test(i[1]));l instanceof Array&&(r!=null&&r.descendArray)&&!u?l.forEach(f=>ta(f,s,n,r)):ta(l,s,n,r)}}function WT(e,t,n){ta(e,t,(r,i)=>{r[i]=Sh(n)?n(r[i]):n},{buildGraph:!0})}function Yy(e,t,n){ta(e,t,(r,i)=>{if(r instanceof Array){if(/^\d+$/.test(i))r.splice(parseInt(i),1);else if(n&&n.descendArray)for(const o of r)ze(o)&&delete o[i]}else ze(r)&&delete r[i]},n)}const qT=/^\$[a-zA-Z0-9_]+$/;function ki(e){return qT.test(e)}function oS(e){if(tS.has(ea(e).toLowerCase()))return ws(e)?{$regex:e}:{$eq:e};if(Gu(e)){if(!Object.keys(e).some(ki))return{$eq:e};if(Ht(e,"$regex")){const n={...e};return n.$regex=new RegExp(e.$regex,e.$options),delete n.$options,n}}return e}var us=(e=>(e.CLONE_ALL="CLONE_ALL",e.CLONE_INPUT="CLONE_INPUT",e.CLONE_OUTPUT="CLONE_OUTPUT",e.CLONE_OFF="CLONE_OFF",e))(us||{});class ui{constructor(t,n,r,i=Date.now()){this._opts=t,this._root=n,this._local=r,this.timestamp=i,this.update(n,r)}static init(t,n,r){return t instanceof ui?new ui(t._opts,dt(t.root)?n:t.root,Object.assign({},t.local,r)):new ui(t,n,r)}update(t,n){var r;return this._root=t,this._local=n&&Object.assign({},n,{variables:Object.assign({},(r=this._local)==null?void 0:r.variables,n==null?void 0:n.variables)}),this}getOptions(){return Object.freeze({...this._opts,context:gi.from(this._opts.context)})}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){var t;return(t=this._opts)==null?void 0:t.collation}get processingMode(){var t;return((t=this._opts)==null?void 0:t.processingMode)||"CLONE_OFF"}get useStrictMode(){var t;return(t=this._opts)==null?void 0:t.useStrictMode}get scriptEnabled(){var t;return(t=this._opts)==null?void 0:t.scriptEnabled}get useGlobalContext(){var t;return(t=this._opts)==null?void 0:t.useGlobalContext}get hashFunction(){var t;return(t=this._opts)==null?void 0:t.hashFunction}get collectionResolver(){var t;return(t=this._opts)==null?void 0:t.collectionResolver}get jsonSchemaValidator(){var t;return(t=this._opts)==null?void 0:t.jsonSchemaValidator}get variables(){var t;return(t=this._opts)==null?void 0:t.variables}get context(){var t;return(t=this._opts)==null?void 0:t.context}}function pu(e){return e instanceof ui?e.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF",...e,context:e!=null&&e.context?gi.from(e==null?void 0:e.context):gi.init({})})}var wo=(e=>(e.ACCUMULATOR="accumulator",e.EXPRESSION="expression",e.PIPELINE="pipeline",e.PROJECTION="projection",e.QUERY="query",e.WINDOW="window",e))(wo||{});class gi{constructor(t){this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}};for(const[n,r]of Object.entries(t))this.addOperators(n,r)}static init(t={}){return new gi(t)}static from(t){return new gi(t.operators)}addOperators(t,n){for(const[r,i]of Object.entries(n))this.getOperator(t,r)||(this.operators[t][r]=i);return this}addAccumulatorOps(t){return this.addOperators("accumulator",t)}addExpressionOps(t){return this.addOperators("expression",t)}addQueryOps(t){return this.addOperators("query",t)}addPipelineOps(t){return this.addOperators("pipeline",t)}addProjectionOps(t){return this.addOperators("projection",t)}addWindowOps(t){return this.addOperators("window",t)}getOperator(t,n){return t in this.operators&&this.operators[t][n]||null}}const ti=gi.init();function Jy(e,t){for(const[n,r]of Object.entries(t)){Je(Sh(r)&&ki(n),`'${n}' is not a valid operator`);const i=ci(e,n,null);Je(!i||r===i,`${n} already exists for '${e}' operators. Cannot change operator function once registered.`)}switch(e){case"accumulator":ti.addAccumulatorOps(t);break;case"expression":ti.addExpressionOps(t);break;case"pipeline":ti.addPipelineOps(t);break;case"projection":ti.addProjectionOps(t);break;case"query":ti.addQueryOps(t);break;case"window":ti.addWindowOps(t);break}}function ci(e,t,n){const{context:r,useGlobalContext:i}=n||{},o=r?r.getOperator(e,t):null;return!o&&i?ti.getOperator(e,t):o}const Xy={$$ROOT(e,t,n){return n.root},$$CURRENT(e,t,n){return e},$$REMOVE(e,t,n){},$$NOW(e,t,n){return new Date(n.timestamp)}},Hd={$$KEEP(e,t,n){return e},$$PRUNE(e,t,n){},$$DESCEND(e,t,n){if(!Ht(t,"$cond"))return e;let r;for(const[i,o]of Object.entries(e))if(Gu(o)){if(o instanceof Array){const s=[];for(let l of o)ze(l)&&(l=Zy(l,t,n.update(l))),dt(l)||s.push(l);r=s}else r=Zy(o,t,n.update(o));dt(r)?delete e[i]:e[i]=r}return e}};function wt(e,t,n,r){var o;const i=ui.init(r,e);if(n=n||"",ki(n)){const s=ci("expression",n,r);if(s)return s(e,t,i);const l=ci("accumulator",n,r);if(l)return e instanceof Array||(e=wt(e,t,null,i),t=null),Je(e instanceof Array,`'${n}' target must be an array.`),l(e,t,i.update(null,i.local));throw new _i(`operator '${n}' is not registered`)}if(Xn(t)&&t.length>0&&t[0]==="$"){if(Ht(Hd,t))return t;let s=i.root;const l=t.split(".");if(Ht(Xy,l[0]))s=Xy[l[0]](e,null,i),t=t.slice(l[0].length+1);else if(l[0].slice(0,2)==="$$"){s=Object.assign({},i.variables,{this:e},(o=i.local)==null?void 0:o.variables);const u=l[0].slice(2);Je(Ht(s,u),`Use of undefined variable: ${u}`),t=t.slice(2)}else t=t.slice(1);return t===""?s:Oo(s,t)}if(Xe(t))return t.map(s=>wt(e,s,null,i));if(ze(t)){const s={};for(const[l,u]of Object.entries(t))if(s[l]=wt(e,u,l,i),["expression","accumulator"].some(f=>!!ci(f,l,r)))return Je(Object.keys(t).length===1,"Invalid aggregation expression '"+JSON.stringify(t)+"'"),s[l];return s}return t}function Zy(e,t,n){const r=wt(e,t,null,n);return Ht(Hd,r)?Hd[r](e,t,n):r}function bo(e){return e instanceof ev?e:new ev(e)}function VT(...e){let t=0;return bo(()=>{for(;t<e.length;){const n=e[t].next();if(!n.done)return n;t++}return{done:!0}})}function HT(e){return!!e&&typeof e=="object"&&(e==null?void 0:e.next)instanceof Function}function QT(e,t){const n=e.slice(t+1);e.splice(t),Array.prototype.push.apply(e,n)}const Qd=new Error;function GT(e,t,n){let r=!1,i=-1,o=0;return function(s){try{e:for(;!r;){let l=e();i++;let u=-1;const f=t.length;let h=!1;for(;++u<f;){const y=t[u];switch(y.action){case 0:l=y.func(l,i);break;case 1:if(!y.func(l,i))continue e;break;case 2:--y.count,y.count||(h=!0);break;case 3:--y.count,y.count||QT(t,u);continue e;default:break e}}if(r=h,s)n[o++]=l;else return{value:l,done:!1}}}catch(l){if(l!==Qd)throw l}return r=!0,{done:r}}}let ev=class{constructor(t){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let n;if(t instanceof Function&&(t={next:t}),HT(t)){const r=t;n=()=>{const i=r.next();if(i.done)throw Qd;return i.value}}else if(t instanceof Array){const r=t,i=r.length;let o=0;n=()=>{if(o<i)return r[o++];throw Qd}}else if(!(t instanceof Function))throw new _i("Lazy must be initialized with an array, generator, or function.");this.getNext=GT(n,this.iteratees,this.yieldedValues)}push(t,n){return typeof n=="function"?this.iteratees.push({action:t,func:n}):typeof n=="number"&&this.iteratees.push({action:t,count:n}),this}next(){return this.getNext()}map(t){return this.push(0,t)}filter(t){return this.push(1,t)}take(t){return t>0?this.push(2,t):this}drop(t){return t>0?this.push(3,t):this}transform(t){const n=this;let r;return bo(()=>(r||(r=bo(t(n.value()))),r.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(t){for(;;){const n=this.next();if(n.done)break;if(t(n.value)===!1)return!1}return!0}reduce(t,n){let r=this.next();for(n===void 0&&!r.done&&(n=r.value,r=this.next());!r.done;)n=t(n,r.value),r=this.next();return n}size(){return this.reduce((t,n)=>++t,0)}[Symbol.iterator](){return this}};class YT{constructor(t,n){this.pipeline=t,this.options=pu(n)}stream(t){let n=bo(t);const r=this.options.processingMode;(r==us.CLONE_ALL||r==us.CLONE_INPUT)&&n.map(Ud);const i=new Array;if(!jo(this.pipeline))for(const o of this.pipeline){const s=Object.keys(o),l=s[0],u=ci(wo.PIPELINE,l,this.options);Je(s.length===1&&!!u,`invalid pipeline operator ${l}`),i.push(l),n=u(n,o[l],this.options)}return(r==us.CLONE_OUTPUT||r==us.CLONE_ALL&&bh([["$group","$unwind"],i]).length)&&n.map(Ud),n}run(t){return this.stream(t).value()}}class JT{constructor(t,n,r,i){this.source=t,this.predicate=n,this.projection=r,this.options=i,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(ze(this.projection)&&this.operators.push({$project:this.projection}),this.result=bo(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new YT(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){const t=bo([...this.buffer]);return this.buffer=[],VT(t,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(t){return this.operators.push({$skip:t}),this}limit(t){return this.operators.push({$limit:t}),this}sort(t){return this.operators.push({$sort:t}),this}collation(t){return this.options={...this.options,collation:t},this}next(){if(this.buffer.length>0)return this.buffer.pop();const t=this.fetch().next();if(!t.done)return t.value}hasNext(){if(this.buffer.length>0)return!0;const t=this.fetch().next();return t.done?!1:(this.buffer.push(t.value),!0)}map(t){return this.all().map(t)}forEach(t){this.all().forEach(t)}[Symbol.iterator](){return this.fetchAll()}}class Zn{constructor(t,n){this.condition=t,this.options=pu(n),this.compiled=[],this.compile()}compile(){Je(ze(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);const t={};for(const[n,r]of Object.entries(this.condition)){if(n==="$where")Object.assign(t,{field:n,expr:r});else if(xo(["$and","$or","$nor","$expr","$jsonSchema"],n))this.processOperator(n,n,r);else{Je(!ki(n),`unknown top level operator: ${n}`);for(const[i,o]of Object.entries(oS(r)))this.processOperator(n,i,o)}t.field&&this.processOperator(t.field,t.field,t.expr)}}processOperator(t,n,r){const i=ci(wo.QUERY,n,this.options);if(!i)throw new _i(`unknown query operator ${n}`);const o=i(t,r,this.options);this.compiled.push(o)}test(t){for(let n=0,r=this.compiled.length;n<r;n++)if(!this.compiled[n](t))return!1;return!0}find(t,n){return new JT(t,r=>this.test(r),n||{},this.options)}remove(t){return t.reduce((n,r)=>(this.test(r)||n.push(r),n),[])}}const XT=(e,t,n)=>{if(jo(t)||!ze(t))return e;let r=Mt;const i=n.collation;return ze(i)&&Xn(i.locale)&&(r=ej(i)),e.transform(o=>{const s=Object.keys(t);for(const l of s.reverse()){const u=UT(o,h=>Oo(h,l),n.hashFunction),f=Array.from(u.keys()).sort(r);t[l]===-1&&f.reverse(),o=[],f.reduce((h,y)=>pa(h,u.get(y)),o)}return o})},ZT={1:"base",2:"accent",3:"variant"};function ej(e){const t={sensitivity:ZT[e.strength||3],caseFirst:e.caseFirst==="off"?"false":e.caseFirst||"false",numeric:e.numericOrdering||!1,ignorePunctuation:e.alternate==="shifted"};(e.caseLevel||!1)===!0&&(t.sensitivity==="base"&&(t.sensitivity="case"),t.sensitivity==="accent"&&(t.sensitivity="variant"));const n=new Intl.Collator(e.locale,t);return(r,i)=>{if(!Xn(r)||!Xn(i))return Mt(r,i);const o=n.compare(r,i);return o<0?-1:o>0?1:0}}function _t(e){const t=(n,r,i)=>{const o={unwrapArray:!0},s=Math.max(1,n.split(".").length-1);return l=>{const u=Oo(l,n,o);return e(u,r,{...i,depth:s})}};return t.op="query",t}function Io(e){return(t,n,r)=>{const i=wt(t,n,null,r);return e(...i)}}function _h(e,t,n){if(In(e,t)||dt(e)&&dt(t))return!0;if(e instanceof Array){const r=In.bind(null,t);return e.some(r)||rS(e,n==null?void 0:n.depth).some(r)}return!1}function sS(e,t,n){return!_h(e,t,n)}function aS(e,t,n){return dt(e)?t.some(r=>r===null):bh([Po(e),t],n==null?void 0:n.hashFunction).length>0}function tj(e,t,n){return!aS(e,t,n)}function lS(e,t,n){return Yu(e,t,(r,i)=>Mt(r,i)<0)}function uS(e,t,n){return Yu(e,t,(r,i)=>Mt(r,i)<=0)}function cS(e,t,n){return Yu(e,t,(r,i)=>Mt(r,i)>0)}function fS(e,t,n){return Yu(e,t,(r,i)=>Mt(r,i)>=0)}function nj(e,t,n){return Po(e).some(r=>t.length===2&&r%t[0]===t[1])}function rj(e,t,n){const r=Po(e),i=o=>Xn(o)&&So(t.exec(o),n==null?void 0:n.useStrictMode);return r.some(i)||rS(r,1).some(i)}function ij(e,t,n){return(t===!1||t===0)&&e===void 0||(t===!0||t===1)&&e!==void 0}function oj(e,t,n){if(!Xe(e)||!Xe(t)||!e.length||!t.length)return!1;let r=!0;for(const i of t){if(!r)break;ze(i)&&xo(Object.keys(i),"$elemMatch")?r=dS(e,i.$elemMatch,n):i instanceof RegExp?r=e.some(o=>typeof o=="string"&&i.test(o)):r=e.some(o=>In(i,o))}return r}function sj(e,t,n){return Array.isArray(e)&&e.length===t}function aj(e){return ki(e)&&["$and","$or","$nor"].indexOf(e)===-1}function dS(e,t,n){if(Xe(e)&&!jo(e)){let r=s=>s,i=t;Object.keys(t).every(aj)&&(i={temp:t},r=s=>({temp:s}));const o=new Zn(i,n);for(let s=0,l=e.length;s<l;s++)if(o.test(r(e[s])))return!0}return!1}const tv=e=>e===null,nv=e=>Kt(e)&&e>=OT&&e<=PT&&e.toString().indexOf(".")===-1,rv=e=>Kt(e)&&e>=RT&&e<=IT&&e.toString().indexOf(".")===-1,lj={array:Xe,bool:kf,boolean:kf,date:du,decimal:Kt,double:Kt,int:nv,long:rv,number:Kt,null:tv,object:ze,regex:ws,regexp:ws,string:Xn,undefined:dt,function:e=>{throw new _i("unsupported type key `function`.")},1:Kt,2:Xn,3:ze,4:Xe,6:dt,8:kf,9:du,10:tv,11:ws,16:nv,18:rv,19:Kt};function iv(e,t,n){const r=lj[t];return r?r(e):!1}function uj(e,t,n){return Array.isArray(t)?t.findIndex(r=>iv(e,r))>=0:iv(e,t)}function Yu(e,t,n){return Po(e).some(r=>ea(r)===ea(t)&&n(r,t))}const cj=(e,t,n)=>{const r=wt(e,t,null,n);return So(r,n.useStrictMode)&&r.every(i=>So(i,n.useStrictMode))},fj=(e,t,n)=>{const r=Po(t);if(r.length==0)return!1;if(r.length==1)return!wt(e,r[0],null,n);throw"Expression $not takes exactly 1 argument"},dj=(e,t,n)=>{const r=wt(e,t,null,n),i=n.useStrictMode;return So(r,i)&&r.some(o=>So(o,i))},pj=Object.freeze(Object.defineProperty({__proto__:null,$and:cj,$not:fj,$or:dj},Symbol.toStringTag,{value:"Module"})),hj=(e,t,n)=>{const r=wt(e,t,null,n);return r[0]>r[1]?1:r[0]<r[1]?-1:0},mj=Io(_h),yj=Io(cS),vj=Io(fS),gj=Io(lS),xj=Io(uS),Sj=Io(sS),wj=Object.freeze(Object.defineProperty({__proto__:null,$cmp:hj,$eq:mj,$gt:yj,$gte:vj,$lt:gj,$lte:xj,$ne:Sj},Symbol.toStringTag,{value:"Module"})),ov=(e,t)=>{const n={};return e.split("").forEach((r,i)=>n[r]=t*(i+1)),n};({...ov("ABCDEFGHIKLM",1),...ov("NOPQRSTUVWXY",-1)});const sv={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Jt(e,t=sv){const n=Object.assign({},sv,t),r=new Set(Object.keys(n));return(i,o,s)=>{const l=wt(i,o,null,s);if(r.has(`${l}`)){const u=n[`${l}`];if(u instanceof Error)throw new _i(`cannot apply $${e.name} to -inf, value must in (-inf,inf)`);return u}return e(l)}}Jt(Math.acos,{Infinity:1/0,0:new Error});Jt(Math.acosh,{Infinity:1/0,0:new Error});Jt(Math.asin);Jt(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});Jt(Math.atan);Jt(Math.atanh,{1:1/0,"-1":-1/0});Jt(Math.cos);Jt(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const bj=Math.PI/180;Jt(e=>e*bj,{Infinity:1/0,"-Infinity":1/0});const _j=180/Math.PI;Jt(e=>e*_j,{Infinity:1/0,"-Infinity":-1/0});Jt(Math.sin);Jt(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});Jt(Math.tan);const kj=(e,t,n)=>{if(jo(t))return e;let r=Object.keys(t),i=!1;pS(t,n);const o=n.idKey;if(xo(r,o)){const l=t[o];(l===0||l===!1)&&(r=r.filter(nS.bind(null,[o])),i=r.length==0)}else r.push(o);const s=ui.init(n);return e.map(l=>Gd(l,t,s.update(l),r,i))};function Gd(e,t,n,r,i){let o={},s=!1,l=!1;const u=[];i&&u.push(n.idKey);for(const f of r){let h;const y=t[f];if(f!==n.idKey&&xo([0,!1],y)&&(l=!0),f===n.idKey&&jo(y))h=e[f];else if(Xn(y))h=wt(e,y,f,n);else if(!xo([1,!0],y))if(y instanceof Array)h=y.map(S=>{const E=wt(e,S,null,n);return dt(E)?null:E});else if(ze(y)){const S=y,E=Object.keys(y),P=E.length==1?E[0]:"",A=ci(wo.PROJECTION,P,n);if(A)P==="$slice"?Po(S[P]).every(Kt)?(h=A(e,S[P],f,n),s=!0):h=wt(e,S,f,n):h=A(e,S[P],f,n);else if(ki(P))h=wt(e,S[P],P,n);else if(Ht(e,f)){pS(S,n);let w=e[f];w instanceof Array?h=w.map(b=>Gd(b,S,n,E,!1)):(w=ze(w)?w:e,h=Gd(w,S,n,E,!1))}else h=wt(e,y,null,n)}else{u.push(f);continue}const g=jl(e,f,{preserveMissing:!0});g!==void 0&&Kd(o,g,{flatten:!0}),nS([0,1,!1,!0],y)&&(h===void 0?Yy(o,f,{descendArray:!0}):WT(o,f,h))}if(Vd(o),(s||l||i)&&(o=pa({},e,o),u.length>0))for(const f of u)Yy(o,f,{descendArray:!0});return o}function pS(e,t){const n=[!1,!1];for(const[r,i]of Object.entries(e)){if(r===(t==null?void 0:t.idKey))return;i===0||i===!1?n[0]=!0:(i===1||i===!0)&&(n[1]=!0),Je(!(n[0]&&n[1]),"Projection cannot have a mix of inclusion and exclusion.")}}const hS=(e,t,n)=>{Je(Xe(t),"Invalid expression: $and expects value to be an Array.");const r=t.map(i=>new Zn(i,n));return i=>r.every(o=>o.test(i))},kh=(e,t,n)=>{Je(Xe(t),"Invalid expression. $or expects value to be an Array");const r=t.map(i=>new Zn(i,n));return i=>r.some(o=>o.test(i))},mS=(e,t,n)=>{Je(Xe(t),"Invalid expression. $nor expects value to be an array.");const r=kh("$or",t,n);return i=>!r(i)},yS=(e,t,n)=>{const r={};r[e]=oS(t);const i=new Zn(r,n);return o=>!i.test(o)},vS=_t(_h),gS=_t(cS),xS=_t(fS),SS=_t(aS),wS=_t(lS),bS=_t(uS),_S=_t(sS),kS=_t(tj);function Ej(e,t,n){return r=>wt(r,t,null,n)}function Cj(e,t,n){if(!(n!=null&&n.jsonSchemaValidator))throw new _i("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");const r=n==null?void 0:n.jsonSchemaValidator(t);return i=>r(i)}const ES=_t(nj),CS=_t(rj);function Tj(e,t,n){Je(n.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");const r=t;return Je(Sh(r),"$where only accepts a Function object"),i=>So(r.call(i),n==null?void 0:n.useStrictMode)}const jj=_t(oj),TS=_t(dS),jS=_t(sj),PS=_t(ij),OS=_t(uj);var av=!1;function Pj(e){return av||(Jy(wo.PIPELINE,{$sort:XT,$project:kj}),Jy(wo.QUERY,{$and:hS,$eq:vS,$elemMatch:TS,$exists:PS,$gt:gS,$gte:xS,$in:SS,$lt:wS,$lte:bS,$ne:_S,$nin:kS,$mod:ES,$nor:mS,$not:yS,$or:kh,$regex:CS,$size:jS,$type:OS}),av=!0),new Zn(e)}function Yd(e,t){var n=wi(e.primaryKey);t=ut(t);var r=ho(t);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([f,h])=>{(typeof h!="object"||h===null)&&(r.selector[f]={$eq:h})})):r.selector={},r.index){var i=oh(r.index);i.includes(n)||i.push(n),r.index=i}if(r.sort){var u=r.sort.find(f=>aE(f)===n);u||(r.sort=r.sort.slice(0),r.sort.push({[n]:"asc"}))}else if(r.index)r.sort=r.index.map(f=>({[f]:"asc"}));else{if(e.indexes){var o=new Set;Object.entries(r.selector).forEach(([f,h])=>{var y=!1;typeof h=="object"&&h!==null?y=!!Object.keys(h).find(g=>xh.has(g)):y=!0,y&&o.add(f)});var s=-1,l;e.indexes.forEach(f=>{var h=sh(f)?f:[f],y=h.findIndex(g=>!o.has(g));y>0&&y>s&&(s=y,l=h)}),l&&(r.sort=l.map(f=>({[f]:"asc"})))}r.sort||(r.sort=[{[n]:"asc"}])}return r}function IS(e,t){if(!t.sort)throw fe("SNH",{query:t});var n=[];t.sort.forEach(i=>{var o=Object.keys(i)[0],s=Object.values(i)[0];n.push({key:o,direction:s,getValueFn:sE(o)})});var r=(i,o)=>{for(var s=0;s<n.length;++s){var l=n[s],u=l.getValueFn(i),f=l.getValueFn(o);if(u!==f){var h=l.direction==="asc"?Mt(u,f):Mt(f,u);return h}}};return r}function Eh(e,t){if(!t.sort)throw fe("SNH",{query:t});var n=Pj(t.selector),r=i=>n.test(i);return r}async function Ni(e,t){var n=await e.exec();if(!n)return null;if(Array.isArray(n))return Promise.all(n.map(i=>t(i)));if(n instanceof Map)return Promise.all([...n.values()].map(i=>t(i)));var r=await t(n);return r}function Oj(e,t){return!t.sort||t.sort.length===0?[e]:t.sort.map(n=>Object.keys(n)[0])}var Ij=new WeakMap;function Rj(e){return vi(Ij,e,()=>{var t=e.collection,n=Yd(t.storageInstance.schema,ho(e.mangoQuery)),r=t.schema.primaryPath,i=IS(t.schema.jsonSchema,n),o=(f,h)=>{var y={docA:f,docB:h};return i(y.docA,y.docB)},s=Eh(t.schema.jsonSchema,n),l=f=>{var h={doc:f};return s(h.doc)},u={primaryKey:e.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:Oj(r,n),sortComparator:o,queryMatcher:l};return u})}function Dj(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var n=Rj(e),r=Ve(e._result).docsData.slice(0),i=Ve(e._result).docsDataMap,o=!1,s=t.map(u=>DC(u)).filter(iE),l=s.find(u=>{var f={queryParams:n,changeEvent:u,previousResults:r,keyDocumentMap:i},h=wT(f);if(h==="runFullQueryAgain")return!0;if(h!=="doNothing")return o=!0,bT(h,n,u,r,i),!1});return l?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:r}}var Aj=function(){function e(){this._map=new Map}var t=e.prototype;return t.getByQuery=function(r){var i=r.toString();return vi(this._map,i,()=>r)},e}();function Nj(){return new Aj}function lv(e,t){t.uncached=!0;var n=t.toString();e._map.delete(n)}function Mj(e){return e.refCount$.observers.length}var Bj=100,zj=30*1e3,$j=(e,t)=>(n,r)=>{if(!(r._map.size<e)){var i=sn()-t,o=[],s=Array.from(r._map.values());for(var l of s)if(!(Mj(l)>0)){if(l._lastEnsureEqual===0&&l._creationTime<i){lv(r,l);continue}o.push(l)}var u=o.length-e;if(!(u<=0)){var f=o.sort((y,g)=>y._lastEnsureEqual-g._lastEnsureEqual),h=f.slice(0,u);h.forEach(y=>lv(r,y))}}},RS=$j(Bj,zj),Cf=new WeakSet;function Lj(e){Cf.has(e)||(Cf.add(e),CE().then(()=>PE(200)).then(()=>{e.destroyed||e.cacheReplacementPolicy(e,e._queryCache),Cf.delete(e)}))}var Fj=function(){function e(n,r,i){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var s=o.docId,l=this.cacheItemByDocId.get(s);l&&(l[0].delete(o.revisionHeight),l[0].size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=n,this.changes$=r,this.documentCreator=i,r.subscribe(o=>{this.tasks.add(()=>{for(var s=this.cacheItemByDocId,l=0;l<o.length;l++){var u=o[l],f=s.get(u.documentId);if(f){var h=u.documentData;h||(h=u.previousDocumentData),f[1]=h}}}),this.tasks.size<=1&&qu().then(()=>{this.processTasks()})})}var t=e.prototype;return t.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},t.getLatestDocumentData=function(r){this.processTasks();var i=Gs(this.cacheItemByDocId,r);return i[1]},t.getLatestDocumentDataIfExists=function(r){this.processTasks();var i=this.cacheItemByDocId.get(r);if(i)return i[1]},zr(e,[{key:"getCachedRxDocuments",get:function(){var n=uv(this);return qn(this,"getCachedRxDocuments",n)}},{key:"getCachedRxDocument",get:function(){var n=uv(this);return qn(this,"getCachedRxDocument",r=>n([r])[0])}}])}();function uv(e){var t=e.primaryPath,n=e.cacheItemByDocId,r=e.registry,i=ct.deepFreezeWhenDevMode,o=e.documentCreator,s=l=>{for(var u=new Array(l.length),f=[],h=0;h<l.length;h++){var y=l[h],g=y[t],S=Qs(y._rev),E=void 0,P=void 0,A=n.get(g);A?(E=A[0],P=E.get(S)):(E=new Map,A=[E,y],n.set(g,A));var w=P?P.deref():void 0;w||(y=i(y),w=o(y),E.set(S,Kj(w)),r&&f.push(w)),u[h]=w}return f.length>0&&r&&(e.tasks.add(()=>{for(var b=0;b<f.length;b++){var k=f[b];r.register(k,{docId:k.primary,revisionHeight:Qs(k.revision)})}}),e.tasks.size<=1&&qu().then(()=>{e.processTasks()})),u};return s}function DS(e,t){var n=e.getCachedRxDocuments;return n(t)}var Uj=typeof WeakRef=="function",Kj=Uj?Wj:qj;function Wj(e){return new WeakRef(e)}function qj(e){return{deref(){return e}}}var cv=function(){function e(n,r,i){this.time=sn(),this.query=n,this.count=i,this.documents=DS(this.query.collection._docCache,r)}var t=e.prototype;return t.getValue=function(r){var i=this.query.op;if(i==="count")return this.count;if(i==="findOne"){var o=this.documents.length===0?null:this.documents[0];if(!o&&r)throw fe("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:i});return o}else return i==="findByIds"?this.docsMap:this.documents.slice(0)},zr(e,[{key:"docsData",get:function(){return qn(this,"docsData",this.documents.map(n=>n._data))}},{key:"docsDataMap",get:function(){var n=new Map;return this.documents.forEach(r=>{n.set(r.primary,r._data)}),qn(this,"docsDataMap",n)}},{key:"docsMap",get:function(){for(var n=new Map,r=this.documents,i=0;i<r.length;i++){var o=r[i];n.set(o.primary,o)}return qn(this,"docsMap",n)}}])}(),Vj=0,Hj=function(){return++Vj},AS=function(){function e(n,r,i,o={}){this.id=Hj(),this._execOverDatabaseCount=0,this._creationTime=sn(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new PC(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=oi,this.op=n,this.mangoQuery=r,this.collection=i,this.other=o,r||(this.mangoQuery=Pl()),this.isFindOneByIdQuery=Jj(this.collection.schema.primaryPath,r)}var t=e.prototype;return t._setResultData=function(r){if(typeof r>"u")throw fe("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof r=="number"){this._result=new cv(this,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var i=new cv(this,r,r.length);this._result=i},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=sn(),this.op==="count"){var r=this.getPreparedQuery(),i=await this.collection.storageInstance.count(r);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw fe("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var o=Ve(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,l=[];if(o.forEach(h=>{var y=this.collection._docCache.getLatestDocumentDataIfExists(h);if(y){if(!y._deleted){var g=this.collection._docCache.getCachedRxDocument(y);s.set(h,g)}}else l.push(h)}),l.length>0){var u=await this.collection.storageInstance.findDocumentsById(l,!1);u.forEach(h=>{var y=this.collection._docCache.getCachedRxDocument(h);s.set(y.primary,y)})}return s}var f=Yj(this);return f.then(h=>(this._lastExecEnd=sn(),h))},t.exec=async function(r){if(r&&this.op!=="findOne")throw fe("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});await fv(this);var i=Ve(this._result);return i.getValue(r)},t.toString=function(){var r=uu({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(r);return this.toString=()=>i,i},t.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:Yd(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),un("prePrepareQuery",r);var i=MS(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>i,i},t.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},t.remove=function(){return this.exec().then(r=>Array.isArray(r)?Promise.all(r.map(i=>i.remove())):r.remove())},t.incrementalRemove=function(){return Ni(this.asRxQuery,r=>r.incrementalRemove())},t.update=function(r){throw je("update")},t.patch=function(r){return Ni(this.asRxQuery,i=>i.patch(r))},t.incrementalPatch=function(r){return Ni(this.asRxQuery,i=>i.incrementalPatch(r))},t.modify=function(r){return Ni(this.asRxQuery,i=>i.modify(r))},t.incrementalModify=function(r){return Ni(this.asRxQuery,i=>i.incrementalModify(r))},t.where=function(r){throw je("query-builder")},t.sort=function(r){throw je("query-builder")},t.skip=function(r){throw je("query-builder")},t.limit=function(r){throw je("query-builder")},zr(e,[{key:"$",get:function(){if(!this._$){var n=this.collection.$.pipe(Ut(r=>!r.isLocal),Yx(null),fa(()=>fv(this)),yn(()=>this._result),Gx(gx),Ld((r,i)=>!!(r&&r.time===Ve(i).time)),Ut(r=>!!r),yn(r=>Ve(r).getValue()));this._$=AC(n,this.refCount$.pipe(Ut(()=>!1)))}return this._$}},{key:"$$",get:function(){var n=this.collection.database.getReactivityFactory();return n.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var n=this.collection.schema.jsonSchema,r=Yd(this.collection.schema.jsonSchema,this.mangoQuery);return qn(this,"queryMatcher",Eh(n,r))}},{key:"asRxQuery",get:function(){return this}}])}();function Pl(){return{selector:{}}}function Qj(e){return e.collection._queryCache.getByQuery(e)}function ts(e,t,n,r){un("preCreateRxQuery",{op:e,queryObj:t,collection:n,other:r});var i=new AS(e,t,n,r);return i=Qj(i),Lj(n),i}function NS(e){var t=e.asRxQuery.collection._changeEventBuffer.getCounter();return e._latestChangeEvent>=t}async function fv(e){return e.collection.awaitBeforeReads.size>0&&await Promise.all(Array.from(e.collection.awaitBeforeReads).map(t=>t())),e.collection.database.destroyed||NS(e)?!1:(e._ensureEqualQueue=e._ensureEqualQueue.then(()=>Gj(e)),e._ensureEqualQueue)}function Gj(e){if(e._lastEnsureEqual=sn(),e.collection.database.destroyed||NS(e))return oi;var t=!1,n=!1;if(e._latestChangeEvent===-1&&(n=!0),!n){var r=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(r===null)n=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.getCounter();var i=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(e.op==="count"){var o=Ve(e._result).count,s=o;i.forEach(u=>{var f=u.previousDocumentData&&e.doesDocumentDataMatch(u.previousDocumentData),h=e.doesDocumentDataMatch(u.documentData);!f&&h&&s++,f&&!h&&s--}),s!==o&&(t=!0,e._setResultData(s))}else{var l=Dj(e,i);l.runFullQueryAgain?n=!0:l.changed&&(t=!0,e._setResultData(l.newResults))}}}return n?e._execOverDatabase().then(u=>(e._latestChangeEvent=e.collection._changeEventBuffer.getCounter(),typeof u=="number"?((!e._result||u!==e._result.count)&&(t=!0,e._setResultData(u)),t):((!e._result||!uE(e.collection.schema.primaryPath,u,e._result.docsData))&&(t=!0,e._setResultData(u)),t))):Promise.resolve(t)}function MS(e,t){if(!t.sort)throw fe("SNH",{query:t});var n=_T(e,t);return{query:t,queryPlan:n}}async function Yj(e){var t=[],n=e.collection;if(e.isFindOneByIdQuery)if(Array.isArray(e.isFindOneByIdQuery)){var r=e.isFindOneByIdQuery;if(r=r.filter(h=>{var y=e.collection._docCache.getLatestDocumentDataIfExists(h);return y?(y._deleted||t.push(y),!1):!0}),r.length>0){var i=await n.storageInstance.findDocumentsById(r,!1);Hs(t,i)}}else{var o=e.isFindOneByIdQuery,s=e.collection._docCache.getLatestDocumentDataIfExists(o);if(!s){var l=await n.storageInstance.findDocumentsById([o],!1);l[0]&&(s=l[0])}s&&!s._deleted&&t.push(s)}else{var u=e.getPreparedQuery(),f=await n.storageInstance.query(u);t=f.documents}return t}function Jj(e,t){if(!t.skip&&t.selector&&Object.keys(t.selector).length===1&&t.selector[e]){var n=t.selector[e];if(typeof n=="string")return n;if(Object.keys(n).length===1&&typeof n.$eq=="string"||Object.keys(n).length===1&&Array.isArray(n.$eq)&&!n.$eq.find(r=>typeof r!="string"))return n.$eq}return!1}var Xj="_rxdb_internal";async function Zj(e,t){var n=await e.findDocumentsById([t],!1),r=n[0];if(r)return r}function hu(e,t,n,r){if(r)throw r.status===409?fe("CONFLICT",{collection:e.name,id:t,writeError:r,data:n}):r.status===422?fe("VD2",{collection:e.name,id:t,writeError:r,data:n}):r}function eP(e,t,n,r,i,o,s){for(var l=!!e.schema.attachments,u=[],f=[],h=[],y=Vu(10),g={id:y,events:[],checkpoint:null,context:i,startTime:sn(),endTime:0},S=g.events,E=[],P=[],A=[],w=n.size>0,b,k=r.length,C=function(){var z=r[T],U=z.document,q=z.previous,X=U[t],oe=U._deleted,Ce=q&&q._deleted,Ae=void 0;w&&(Ae=n.get(X));var ke;if(Ae){var Rn=Ae._rev;if(!q||q&&Rn!==q._rev){var Lr={isError:!0,status:409,documentId:X,writeRow:z,documentInDb:Ae};return h.push(Lr),1}var ee=l?Tf(z):z;l&&(oe?q&&Object.keys(q._attachments).forEach(Oe=>{P.push({documentId:X,attachmentId:Oe,digest:Ve(q)._attachments[Oe].digest})}):(Object.entries(U._attachments).find(([Oe,We])=>{var zt=q?q._attachments[Oe]:void 0;return!zt&&!We.data&&(ke={documentId:X,documentInDb:Ae,isError:!0,status:510,writeRow:z,attachmentId:Oe}),!0}),ke||Object.entries(U._attachments).forEach(([Oe,We])=>{var zt=q?q._attachments[Oe]:void 0;if(!zt)E.push({documentId:X,attachmentId:Oe,attachmentData:We,digest:We.digest});else{var ht=ee.document._attachments[Oe].digest;We.data&&zt.digest!==ht&&A.push({documentId:X,attachmentId:Oe,attachmentData:We,digest:We.digest})}}))),ke?h.push(ke):(l?f.push(Tf(ee)):f.push(ee),b=ee);var ae=null,ce=null,we=null;if(Ce&&!oe)we="INSERT",ae=l?Un(U):U;else if(q&&!Ce&&!oe)we="UPDATE",ae=l?Un(U):U,ce=q;else if(oe)we="DELETE",ae=Ve(U),ce=q;else throw fe("SNH",{args:{writeRow:z}});var Ke={documentId:X,documentData:ae,previousDocumentData:ce,operation:we};S.push(Ke)}else{var bn=!!oe;if(l&&Object.entries(U._attachments).forEach(([Oe,We])=>{We.data?E.push({documentId:X,attachmentId:Oe,attachmentData:We,digest:We.digest}):(ke={documentId:X,isError:!0,status:510,writeRow:z,attachmentId:Oe},h.push(ke))}),ke||(l?u.push(Tf(z)):u.push(z),b=z),!bn){var kt={documentId:X,operation:"INSERT",documentData:l?Un(U):U,previousDocumentData:l&&q?Un(q):q};S.push(kt)}}},T=0;T<k;T++)C();return{bulkInsertDocs:u,bulkUpdateDocs:f,newestRow:b,errors:h,eventBulk:g,attachmentsAdd:E,attachmentsRemove:P,attachmentsUpdate:A}}function Tf(e){return{previous:e.previous,document:Un(e.document)}}function tP(e){return atob(e).length}function nP(e){var t=e.data;if(!t)return e;var n={length:tP(t),digest:e.digest,type:e.type};return n}function Un(e){if(!e._attachments||Object.keys(e._attachments).length===0)return e;var t=ut(e);return t._attachments={},Object.entries(e._attachments).forEach(([n,r])=>{t._attachments[n]=nP(r)}),t}function Ju(e){return Object.assign({},e,{_meta:ut(e._meta)})}var BS=new WeakMap;function zS(e,t,n){ct.deepFreezeWhenDevMode(n);var r=wi(t.schema.primaryKey),i={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite(o,s){for(var l=e.token,u=new Array(o.length),f=sn(),h=0;h<o.length;h++){var y=o[h],g=Ju(y.document);g._meta.lwt=f;var S=y.previous;g._rev=Ad(l,S),u[h]={document:g,previous:S}}return un("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:u}),e.lockedRun(()=>t.bulkWrite(u,s)).then(E=>{var P={error:[]},A=Ar(r,u,E);BS.set(P,A);var w=E.error.length===0?[]:E.error.filter(k=>k.status===409&&!k.writeRow.previous&&!k.writeRow.document._deleted&&Ve(k.documentInDb)._deleted?!0:(P.error.push(k),!1));if(w.length>0){var b=w.map(k=>({previous:k.documentInDb,document:Object.assign({},k.writeRow.document,{_rev:Ad(e.token,k.documentInDb)})}));return e.lockedRun(()=>t.bulkWrite(b,s)).then(k=>{Hs(P.error,k.error);var C=Ar(r,b,k);return Hs(A,C),P})}return P})},query(o){return e.lockedRun(()=>t.query(o))},count(o){return e.lockedRun(()=>t.count(o))},findDocumentsById(o,s){return e.lockedRun(()=>t.findDocumentsById(o,s))},getAttachmentData(o,s,l){return e.lockedRun(()=>t.getAttachmentData(o,s,l))},getChangedDocumentsSince:t.getChangedDocumentsSince?(o,s)=>e.lockedRun(()=>t.getChangedDocumentsSince(Ve(o),s)):void 0,cleanup(o){return e.lockedRun(()=>t.cleanup(o))},remove(){return e.storageInstances.delete(i),e.lockedRun(()=>t.remove())},close(){return e.storageInstances.delete(i),e.lockedRun(()=>t.close())},changeStream(){return t.changeStream()},conflictResultionTasks(){return t.conflictResultionTasks()},resolveConflictResultionTask(o){if(o.output.isEqual)return t.resolveConflictResultionTask(o);var s=Object.assign({},o.output.documentData,{_meta:Ku(),_rev:Wu(),_attachments:{}}),l=ut(s);return delete l._meta,delete l._rev,delete l._attachments,t.resolveConflictResultionTask({id:o.id,output:{isEqual:!1,documentData:l}})}};return e.storageInstances.add(i),i}function rP(e){if(e.schema.keyCompression)throw fe("UT5",{args:{params:e}});if(iP(e.schema))throw fe("UT6",{args:{params:e}});if(e.schema.attachments&&e.schema.attachments.compression)throw fe("UT7",{args:{params:e}})}function iP(e){return!!(e.encrypted&&e.encrypted.length>0||e.attachments&&e.attachments.encrypted)}function Ar(e,t,n){var r=BS.get(n);if(r)return r;var i=[];if(n.error.length>0){for(var o=new Set,s=0;s<n.error.length;s++){var l=n.error[s];o.add(l.documentId)}for(var u=0;u<t.length;u++){var f=t[u].document;o.has(f[e])||i.push(Un(f))}}else{i.length=t.length-n.error.length;for(var h=0;h<t.length;h++){var y=t[h].document;i[h]=Un(y)}}return i}var oP=function(){function e(n,r,i,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=n,this.primaryPath=r,this.preWrite=i,this.postWrite=o}var t=e.prototype;return t.addWrite=function(r,i){var o=r[this.primaryPath],s=vi(this.queueByDocId,o,()=>[]),l=new Promise((u,f)=>{var h={lastKnownDocumentState:r,modifier:i,resolve:u,reject:f};Ve(s).push(h),this.triggerRun()});return l},t.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],i=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(i.entries()).map(async([s,l])=>{var u=sP(l.map(y=>y.lastKnownDocumentState)),f=u;for(var h of l)try{f=await h.modifier(ho(f))}catch(y){h.reject(y),h.reject=()=>{},h.resolve=()=>{}}try{await this.preWrite(f,u)}catch(y){l.forEach(g=>g.reject(y));return}r.push({previous:u,document:f})}));var o=r.length>0?await this.storageInstance.bulkWrite(r,"incremental-write"):{error:[]};return await Promise.all(Ar(this.primaryPath,r,o).map(s=>{var l=s[this.primaryPath];this.postWrite(s);var u=Gs(i,l);u.forEach(f=>f.resolve(s))})),o.error.forEach(s=>{var l=s.documentId,u=Gs(i,l),f=kx(s);if(f){var h=vi(this.queueByDocId,l,()=>[]);u.reverse().forEach(g=>{g.lastKnownDocumentState=Ve(f.documentInDb),Ve(h).unshift(g)})}else{var y=FE(s);u.forEach(g=>g.reject(y))}}),this.isRunning=!1,this.triggerRun()}},e}();function dv(e){var t=async n=>{var r=lE(n);r._deleted=n._deleted;var i=await e(r),o=Object.assign({},i,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:typeof i._deleted<"u"?i._deleted:n._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o};return t}function sP(e){var t=e[0],n=Qs(t._rev);return e.forEach(r=>{var i=Qs(r._rev);i>n&&(t=r,n=i)}),t}var Ch={get primaryPath(){var e=this;if(e.isInstanceOfRxDocument)return e.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){var e=this;if(e.isInstanceOfRxDocument)return e._data._rev},get deleted$(){var e=this;if(e.isInstanceOfRxDocument)return e.$.pipe(yn(t=>t._data._deleted))},get deleted$$(){var e=this,t=e.collection.database.getReactivityFactory();return t.fromObservable(e.deleted$,e.getLatest().deleted,e.collection.database)},get deleted(){var e=this;if(e.isInstanceOfRxDocument)return e._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){var e=this;return e.collection.$.pipe(Ut(t=>!t.isLocal),Ut(t=>t.documentId===this.primary),yn(t=>RC(t)),Yx(e.collection._docCache.getLatestDocumentData(this.primary)),Ld((t,n)=>t._rev===n._rev),yn(t=>this.collection._docCache.getCachedRxDocument(t)),Gx(gx))},get $$(){var e=this,t=e.collection.database.getReactivityFactory();return t.fromObservable(e.$,e.getLatest()._data,e.collection.database)},get$(e){if(ct.isDevMode()){if(e.includes(".item."))throw fe("DOC1",{path:e});if(e===this.primaryPath)throw fe("DOC2");if(this.collection.schema.finalFields.includes(e))throw fe("DOC3",{path:e});var t=Xs(this.collection.schema.jsonSchema,e);if(!t)throw fe("DOC4",{path:e})}return this.$.pipe(yn(n=>To(n,e)),Ld())},get$$(e){var t=this.get$(e),n=this.collection.database.getReactivityFactory();return n.fromObservable(t,this.getLatest().get(e),this.collection.database)},populate(e){var t=Xs(this.collection.schema.jsonSchema,e),n=this.get(e);if(!n)return jE;if(!t)throw fe("DOC5",{path:e});if(!t.ref)throw fe("DOC6",{path:e,schemaObj:t});var r=this.collection.database.collections[t.ref];if(!r)throw fe("DOC7",{ref:t.ref,path:e,schemaObj:t});return t.type==="array"?r.findByIds(n).exec().then(i=>{var o=i.values();return Array.from(o)}):r.findOne(n).exec()},get(e){return LS(this,e)},toJSON(e=!1){if(e)return ct.deepFreezeWhenDevMode(this._data);var t=ut(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,ct.deepFreezeWhenDevMode(t)},toMutableJSON(e=!1){return ho(this.toJSON(e))},update(e){throw je("update")},incrementalUpdate(e){throw je("update")},updateCRDT(e){throw je("crdt")},putAttachment(){throw je("attachments")},getAttachment(){throw je("attachments")},allAttachments(){throw je("attachments")},get allAttachments$(){throw je("attachments")},async modify(e,t){var n=this._data,r=await dv(e)(n);return this._saveData(r,n)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,dv(e)).then(n=>this.collection._docCache.getCachedRxDocument(n))},patch(e){var t=this._data,n=ho(t);return Object.entries(e).forEach(([r,i])=>{n[r]=i}),this._saveData(n,t)},incrementalPatch(e){return this.incrementalModify(t=>(Object.entries(e).forEach(([n,r])=>{t[n]=r}),t))},async _saveData(e,t){if(e=ut(e),this._data._deleted)throw fe("DOC11",{id:this.primary,document:this});await $S(this.collection,e,t);var n=[{previous:t,document:e}],r=await this.collection.storageInstance.bulkWrite(n,"rx-document-save-data"),i=r.error[0];return hu(this.collection,this.primary,e,i),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(Ar(this.collection.schema.primaryPath,n,r)[0])},remove(){var e=this.collection;if(this.deleted)return Promise.reject(fe("DOC13",{document:this,id:this.primary}));var t=ut(this._data),n;return e._runHooks("pre","remove",t,this).then(async()=>{t._deleted=!0;var r=[{previous:this._data,document:t}],i=await e.storageInstance.bulkWrite(r,"rx-document-remove"),o=i.error[0];return hu(e,this.primary,t,o),Ar(this.collection.schema.primaryPath,r,i)[0]}).then(r=>(n=r,this.collection._runHooks("post","remove",t,this))).then(()=>this.collection._docCache.getCachedRxDocument(n))},incrementalRemove(){return this.incrementalModify(async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e)).then(async e=>(await this.collection._runHooks("post","remove",e._data,e),e))},destroy(){throw fe("DOC14")}};function aP(e=Ch){var t=function(r,i){this.collection=r,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function lP(e,t,n){var r=new e(t,n);return un("createRxDocument",r),r}function $S(e,t,n){return t._meta=Object.assign({},n._meta,t._meta),ct.isDevMode()&&e.schema.validateChange(n,t),e._runHooks("pre","save",t,n)}function LS(e,t){return vi(e._propertyCache,t,()=>{var n=To(e._data,t);if(typeof n!="object"||n===null||Array.isArray(n))return ct.deepFreezeWhenDevMode(n);var r=new Proxy(ut(n),{get(i,o){if(typeof o!="string")return i[o];var s=o.charAt(o.length-1);if(s==="$")if(o.endsWith("$$")){var l=o.slice(0,-2);return e.get$$(ls(t+"."+l))}else{var u=o.slice(0,-1);return e.get$(ls(t+"."+u))}else if(s==="_"){var f=o.slice(0,-1);return e.populate(ls(t+"."+f))}else{var h=i[o];return typeof h=="number"||typeof h=="string"||typeof h=="boolean"?h:LS(e,ls(t+"."+o))}}});return r})}var bs="collection",Th="storage-token",uP="rx-migration-status",cP="RxInternalDocument",jh=Ex({version:0,title:cP,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[bs,Th,uP,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Jd(e,t){return lh(jh,{key:e,context:t})}async function FS(e){var t=MS(e.schema,{selector:{context:bs,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),n=await e.query(t),r=n.documents;return r}var US="storageToken",fP=Jd(US,Th);async function dP(e){var t=Vu(10),n=e.password?await e.hashFunction(JSON.stringify(e.password)):void 0,r={id:fP,context:Th,key:US,data:{rxdbVersion:e.rxdbVersion,token:t,instanceToken:e.token,passwordHash:n},_deleted:!1,_meta:Ku(),_rev:Wu(),_attachments:{}},i=[{document:r}],o=await e.internalStore.bulkWrite(i,"internal-add-storage-token");if(!o.error[0])return Ar("id",i,o)[0];var s=Ve(o.error[0]);if(s.isError&&kx(s)){var l=s;if(!pP(l.documentInDb.data.rxdbVersion,e.rxdbVersion))throw fe("DM5",{args:{database:e.name,databaseStateVersion:l.documentInDb.data.rxdbVersion,codeVersion:e.rxdbVersion}});if(n&&n!==l.documentInDb.data.passwordHash)throw fe("DB1",{passwordHash:n,existingPasswordHash:l.documentInDb.data.passwordHash});var u=l.documentInDb;return Ve(u)}throw s}function pP(e,t){if(!e||t.includes("beta")&&t!==e)return!1;var n=e.split(".")[0],r=t.split(".")[0];return n===r}function pv(e,t){return e+"-"+t.version}function ul(e,t){return t=ut(t),t=VE(e,t),typeof e.jsonSchema.primaryKey!="string"&&(t=UE(e.primaryPath,e.jsonSchema,t)),t._meta=Ku(),Object.prototype.hasOwnProperty.call(t,"_deleted")||(t._deleted=!1),Object.prototype.hasOwnProperty.call(t,"_attachments")||(t._attachments={}),Object.prototype.hasOwnProperty.call(t,"_rev")||(t._rev=Wu()),t}async function hP(e,t){t.multiInstance=e.multiInstance;var n=await e.storage.createStorageInstance(t);return n}async function KS(e,t,n,r,i,o,s){var l=await FS(t),u=l.filter(g=>g.data.name===i),f=[];u.forEach(g=>{f.push({collectionName:g.data.name,schema:g.data.schema,isCollection:!0}),g.data.connectedStorages.forEach(S=>f.push({collectionName:S.collectionName,isCollection:!1,schema:S.schema}))});var h=new Set;if(f=f.filter(g=>{var S=g.collectionName+"||"+g.schema.version;return h.has(S)?!1:(h.add(S),!0)}),await Promise.all(f.map(async g=>{var S=await e.createStorageInstance({collectionName:g.collectionName,databaseInstanceToken:n,databaseName:r,multiInstance:!1,options:{},schema:g.schema,password:o,devMode:ct.isDevMode()});await S.remove(),g.isCollection&&await ca("postRemoveRxCollection",{storage:e,databaseName:r,collectionName:i})})),s){var y=u.map(g=>{var S=Ju(g);return S._deleted=!0,S._meta.lwt=sn(),S._rev=Ad(n,g),{previous:g,document:S}});await t.bulkWrite(y,"rx-database-remove-collection-all")}}function en(e){if(e.destroyed)throw fe("COL21",{collection:e.name,version:e.schema.version})}var mP=function(){function e(n){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=n,this.subs.push(this.collection.database.eventBulks$.pipe(Ut(r=>r.collectionName===this.collection.name),Ut(r=>{var i=r.events[0];return!i.isLocal})).subscribe(r=>{this.tasks.add(()=>this._handleChangeEvents(r.events)),this.tasks.size<=1&&qu().then(()=>{this.processTasks()})}))}var t=e.prototype;return t.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},t._handleChangeEvents=function(r){var i=this.counter;this.counter=this.counter+r.length,r.length>this.limit?this.buffer=r.slice(r.length*-1):(Hs(this.buffer,r),this.buffer=this.buffer.slice(this.limit*-1));for(var o=i+1,s=this.eventCounterMap,l=0;l<r.length;l++){var u=r[l];s.set(u,o+l)}},t.getCounter=function(){return this.processTasks(),this.counter},t.getBuffer=function(){return this.processTasks(),this.buffer},t.getArrayIndexByPointer=function(r){this.processTasks();var i=this.buffer[0],o=this.eventCounterMap.get(i);if(r<o)return null;var s=r-o;return s},t.getFrom=function(r){this.processTasks();var i=[],o=this.getArrayIndexByPointer(r);if(o===null)return null;for(;;){var s=this.buffer[o];if(o++,s)i.push(s);else return i}},t.runFrom=function(r,i){this.processTasks();var o=this.getFrom(r);if(o===null)throw new Error("out of bounds");o.forEach(s=>i(s))},t.reduceByLastOfDoc=function(r){return this.processTasks(),r.slice(0)},t.destroy=function(){this.tasks.clear(),this.subs.forEach(r=>r.unsubscribe())},e}();function yP(e){return new mP(e)}var vP=new WeakMap;function gP(e){var t=e.schema.getDocumentPrototype(),n=wP(e),r=Ch,i={};return[t,n,r].forEach(o=>{var s=Object.getOwnPropertyNames(o);s.forEach(l=>{var u=Object.getOwnPropertyDescriptor(o,l),f=!0;(l.startsWith("_")||l.endsWith("_")||l.startsWith("$")||l.endsWith("$"))&&(f=!1),typeof u.value=="function"?Object.defineProperty(i,l,{get(){return u.value.bind(this)},enumerable:f,configurable:!1}):(u.enumerable=f,u.configurable=!1,u.writable&&(u.writable=!1),Object.defineProperty(i,l,u))})}),i}function xP(e){return vi(vP,e,()=>aP(gP(e)))}function SP(e,t,n){var r=lP(t,e,ct.deepFreezeWhenDevMode(n));return e._runHooksSync("post","create",n,r),un("postCreateRxDocument",r),r}function wP(e){var t={};return Object.entries(e.methods).forEach(([n,r])=>{t[n]=r}),t}var WS=function(e,t){var n=Un(e.newDocumentState),r=Un(e.realMasterState);return cu(n,r)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})},qS=["pre","post"],VS=["insert","save","remove","create"],hv=!1,HS=function(){function e(n,r,i,o,s={},l={},u={},f={},h={},y=RS,g={},S=WS){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Nj(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=n,this.name=r,this.schema=i,this.internalStorageInstance=o,this.instanceCreationOptions=s,this.migrationStrategies=l,this.methods=u,this.attachments=f,this.options=h,this.cacheReplacementPolicy=y,this.statics=g,this.conflictHandler=S,bP(this.asRxCollection)}var t=e.prototype;return t.prepare=async function(){this.storageInstance=zS(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new oP(this.storageInstance,this.schema.primaryPath,(u,f)=>$S(this,u,f),u=>this._runHooks("post","save",u));var r=this.database.eventBulks$.pipe(Ut(u=>u.collectionName===this.name));this.$=r.pipe(fa(u=>u.events)),this.checkpoint$=r.pipe(yn(u=>u.checkpoint)),this._changeEventBuffer=yP(this.asRxCollection);var i;this._docCache=new Fj(this.schema.primaryPath,this.database.eventBulks$.pipe(Ut(u=>u.collectionName===this.name&&!u.events[0].isLocal),yn(u=>u.events)),u=>(i||(i=xP(this.asRxCollection)),SP(this.asRxCollection,i,u)));var o=this.database.internalStore.changeStream().pipe(Ut(u=>{var f=this.name+"-"+this.schema.version,h=u.events.find(y=>y.documentData.context==="collection"&&y.documentData.key===f&&y.operation==="DELETE");return!!h})).subscribe(async()=>{await this.destroy(),await Promise.all(this.onRemove.map(u=>u()))});this._subs.push(o);var s=await this.database.storageToken,l=this.storageInstance.changeStream().subscribe(u=>{for(var f=new Array(u.events.length),h=u.events,y=this.name,g=ct.deepFreezeWhenDevMode,S=0;S<h.length;S++){var E=h[S];f[S]={documentId:E.documentId,collectionName:y,isLocal:!1,operation:E.operation,documentData:g(E.documentData),previousDocumentData:g(E.previousDocumentData)}}var P={id:u.id,internal:!1,collectionName:this.name,storageToken:s,events:f,databaseToken:this.database.token,checkpoint:u.checkpoint,context:u.context,endTime:u.endTime,startTime:u.startTime};this.database.$emit(P)});return this._subs.push(l),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(u=>{this.conflictHandler(u.input,u.context).then(f=>{this.storageInstance.resolveConflictResultionTask({id:u.id,output:f})})})),Ss},t.cleanup=function(r){throw en(this),je("cleanup")},t.migrationNeeded=function(){throw je("migration-schema")},t.getMigrationState=function(){throw je("migration-schema")},t.startMigration=function(r=10){return en(this),this.getMigrationState().startMigration(r)},t.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},t.insert=async function(r){en(this);var i=await this.bulkInsert([r]),o=i.error[0];hu(this,r[this.schema.primaryPath],r,o);var s=Ve(i.success[0]);return s},t.bulkInsert=async function(r){if(en(this),r.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,o=new Set,s;if(this.hasHooks("pre","insert"))s=await Promise.all(r.map(A=>{var w=ul(this.schema,A);return this._runHooks("pre","insert",w).then(()=>(o.add(w[i]),{document:w}))}));else{s=new Array(r.length);for(var l=this.schema,u=0;u<r.length;u++){var f=r[u],h=ul(l,f);o.add(h[i]),s[u]={document:h}}}if(o.size!==r.length)throw fe("COL22",{collection:this.name,args:{documents:r}});var y=await this.storageInstance.bulkWrite(s,"rx-collection-bulk-insert"),g,S=this,E={get success(){if(!g){var A=Ar(S.schema.primaryPath,s,y);g=DS(S._docCache,A)}return g},error:y.error};if(this.hasHooks("post","insert")){var P=new Map;s.forEach(A=>{var w=A.document;P.set(w[i],w)}),await Promise.all(E.success.map(A=>this._runHooks("post","insert",P.get(A.primary),A)))}return E},t.bulkRemove=async function(r){en(this);var i=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var o=await this.findByIds(r).exec(),s=[],l=new Map;Array.from(o.values()).forEach(S=>{var E=S.toMutableJSON(!0);s.push(E),l.set(S.primary,E)}),await Promise.all(s.map(S=>{var E=S[this.schema.primaryPath];return this._runHooks("pre","remove",S,o.get(E))}));var u=s.map(S=>{var E=ut(S);return E._deleted=!0,{previous:S,document:E}}),f=await this.storageInstance.bulkWrite(u,"rx-collection-bulk-remove"),h=Ar(this.schema.primaryPath,u,f),y=h.map(S=>S[i]);await Promise.all(y.map(S=>this._runHooks("post","remove",l.get(S),o.get(S))));var g=y.map(S=>Gs(o,S));return{success:g,error:f.error}},t.bulkUpsert=async function(r){en(this);var i=[],o=new Map;r.forEach(f=>{var h=ul(this.schema,f),y=h[this.schema.primaryPath];if(!y)throw fe("COL3",{primaryPath:this.schema.primaryPath,data:h,schema:this.schema.jsonSchema});o.set(y,h),i.push(h)});var s=await this.bulkInsert(i),l=s.success.slice(0),u=[];return await Promise.all(s.error.map(async f=>{if(f.status!==409)u.push(f);else{var h=f.documentId,y=Gs(o,h),g=Ve(f.documentInDb),S=this._docCache.getCachedRxDocuments([g])[0],E=await S.incrementalModify(()=>y);l.push(E)}})),{error:u,success:l}},t.upsert=async function(r){en(this);var i=await this.bulkUpsert([r]);return hu(this.asRxCollection,r[this.schema.primaryPath],r,i.error[0]),i.success[0]},t.incrementalUpsert=function(r){en(this);var i=ul(this.schema,r),o=i[this.schema.primaryPath];if(!o)throw fe("COL4",{data:r});var s=this._incrementalUpsertQueues.get(o);return s||(s=Ss),s=s.then(()=>kP(this,o,i)).then(l=>l.inserted?l.doc:_P(l.doc,i)),this._incrementalUpsertQueues.set(o,s),s},t.find=function(r){if(en(this),typeof r=="string")throw fe("COL5",{queryObj:r});r||(r=Pl());var i=ts("find",r,this);return i},t.findOne=function(r){if(en(this),typeof r=="number"||Array.isArray(r))throw El("COL6",{queryObj:r});var i;if(typeof r=="string")i=ts("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=Pl()),r.limit)throw fe("QU6");r=ut(r),r.limit=1,i=ts("findOne",r,this)}return i},t.count=function(r){en(this),r||(r=Pl());var i=ts("count",r,this);return i},t.findByIds=function(r){en(this);var i={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},o=ts("findByIds",i,this);return o},t.exportJSON=function(){throw je("json-dump")},t.importJSON=function(r){throw je("json-dump")},t.insertCRDT=function(r){throw je("crdt")},t.addPipeline=function(r){throw je("pipeline")},t.addHook=function(r,i,o,s=!1){if(typeof o!="function")throw El("COL7",{key:i,when:r});if(!qS.includes(r))throw El("COL8",{key:i,when:r});if(!VS.includes(i))throw fe("COL9",{key:i});if(r==="post"&&i==="create"&&s===!0)throw fe("COL10",{when:r,key:i,parallel:s});var l=o.bind(this),u=s?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][u].push(l)},t.getHooks=function(r,i){return!this.hooks[i]||!this.hooks[i][r]?{series:[],parallel:[]}:this.hooks[i][r]},t.hasHooks=function(r,i){if(!this.hooks[i]||!this.hooks[i][r])return!1;var o=this.getHooks(r,i);return o?o.series.length>0||o.parallel.length>0:!1},t._runHooks=function(r,i,o,s){var l=this.getHooks(r,i);if(!l)return Ss;var u=l.series.map(f=>()=>f(o,s));return OE(u).then(()=>Promise.all(l.parallel.map(f=>f(o,s))))},t._runHooksSync=function(r,i,o,s){if(this.hasHooks(r,i)){var l=this.getHooks(r,i);l&&l.series.forEach(u=>u(o,s))}},t.promiseWait=function(r){var i=new Promise(o=>{var s=setTimeout(()=>{this.timeouts.delete(s),o()},r);this.timeouts.add(s)});return i},t.destroy=async function(){return this.destroyed?oi:(await Promise.all(this.onDestroy.map(r=>r())),this.destroyed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],ca("postDestroyRxCollection",this).then(()=>!0))))},t.remove=async function(){await this.destroy(),await Promise.all(this.onRemove.map(r=>r())),await KS(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)},zr(e,[{key:"insert$",get:function(){return this.$.pipe(Ut(n=>n.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(Ut(n=>n.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(Ut(n=>n.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])}();function bP(e){if(!hv){hv=!0;var t=Object.getPrototypeOf(e);VS.forEach(n=>{qS.map(r=>{var i=r+hx(n);t[i]=function(o,s){return this.addHook(r,n,o,s)}})})}}function _P(e,t){return e.incrementalModify(n=>t)}function kP(e,t,n){var r=e._docCache.getLatestDocumentDataIfExists(t);return r?Promise.resolve({doc:e._docCache.getCachedRxDocuments([r])[0],inserted:!1}):e.findOne(t).exec().then(i=>i?{doc:i,inserted:!1}:e.insert(n).then(o=>({doc:o,inserted:!0})))}function EP({database:e,name:t,schema:n,instanceCreationOptions:r={},migrationStrategies:i={},autoMigrate:o=!0,statics:s={},methods:l={},attachments:u={},options:f={},localDocuments:h=!1,cacheReplacementPolicy:y=RS,conflictHandler:g=WS}){var S={databaseInstanceToken:e.token,databaseName:e.name,collectionName:t,schema:n.jsonSchema,options:r,multiInstance:e.multiInstance,password:e.password,devMode:ct.isDevMode()};return un("preCreateRxStorageInstance",S),hP(e,S).then(E=>{var P=new HS(e,t,n,E,r,i,l,u,f,y,s,g);return P.prepare().then(()=>{Object.entries(s).forEach(([w,b])=>{Object.defineProperty(P,w,{get:()=>b.bind(P)})});var A=Ss;return o&&P.schema.version!==0&&(A=P.migratePromise()),A}).then(()=>(un("createRxCollection",{collection:P,creator:{name:t,schema:n,storageInstance:E,instanceCreationOptions:r,migrationStrategies:i,methods:l,attachments:u,options:f,cacheReplacementPolicy:y,localDocuments:h,statics:s}}),P)).catch(A=>E.close().then(()=>Promise.reject(A)))})}var QS=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};QS.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Xd(this)},wrapCall:function(t){var n=this;this.lock();var r;try{r=t()}catch(i){throw this.unlock(),i}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i})},requestIdlePromise:function(t){var n=this;t=t||{};var r,i=new Promise(function(l){return r=l}),o=function(){jf(n,i),r()};if(i._manRes=o,t.timeout){var s=setTimeout(function(){i._manRes()},t.timeout);i._timeoutObj=s}return this._iC.add(i),Xd(this),i},cancelIdlePromise:function(t){jf(this,t)},requestIdleCallback:function(t,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return t()}),r},cancelIdleCallback:function(t){var n=this._hPM.get(t);this.cancelIdlePromise(n)},clear:function(){var t=this;this._iC.forEach(function(n){return jf(t,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function CP(e){if(e._iC.size!==0){var t=e._iC.values(),n=t.next().value;n._manRes(),setTimeout(function(){return Xd(e)},0)}}function jf(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var n=e._pHM.get(t);e._hPM.delete(n),e._pHM.delete(t)}e._iC.delete(t)}}function Xd(e){e._tryIR||e._iC.size===0||(e._tryIR=!0,setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}CP(e),e._tryIR=!1},0)},0))}class Ph{constructor(t){Ri(this,"ttl");Ri(this,"map",new Map);Ri(this,"_to",!1);this.ttl=t}has(t){return this.map.has(t)}add(t){this.map.set(t,GS()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,TP(this)},0))}clear(){this.map.clear()}}function TP(e){const t=GS()-e.ttl,n=e.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const i=r[0];if(r[1]<t)e.map.delete(i);else return}}function GS(){return Date.now()}var mu=new Set,YS=function(){function e(n,r,i,o,s,l,u=!1,f={},h,y,g,S,E){this.idleQueue=new QS,this.rxdbVersion=xx,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new Dr,this.observable$=this.eventBulks$.pipe(fa(P=>P.events)),this.storageToken=oi,this.storageTokenDocument=oi,this.emittedEventBulkIds=new Ph(60*1e3),this.name=n,this.token=r,this.storage=i,this.instanceCreationOptions=o,this.password=s,this.multiInstance=l,this.eventReduce=u,this.options=f,this.internalStore=h,this.hashFunction=y,this.cleanupPolicy=g,this.allowSlowCount=S,this.reactivity=E,this.name!=="pseudoInstance"&&(this.internalStore=zS(this.asRxDatabase,h,jh),this.storageTokenDocument=dP(this.asRxDatabase).catch(P=>this.startupErrors.push(P)),this.storageToken=this.storageTokenDocument.then(P=>P.data.token).catch(P=>this.startupErrors.push(P)))}var t=e.prototype;return t.getReactivityFactory=function(){if(!this.reactivity)throw fe("DB14",{database:this.name});return this.reactivity},t.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},t.removeCollectionDoc=async function(r,i){var o=await Zj(this.internalStore,Jd(pv(r,i),bs));if(!o)throw fe("SNH",{name:r,schema:i});var s=Ju(o);s._deleted=!0,await this.internalStore.bulkWrite([{document:s,previous:o}],"rx-database-remove-collection")},t.addCollections=async function(r){var i={},o={},s=[],l={};await Promise.all(Object.entries(r).map(async([h,y])=>{var g=h,S=y.schema;i[g]=S;var E=QE(S,this.hashFunction);if(o[g]=E,this.collections[h])throw fe("DB3",{name:h});var P=pv(h,S),A={id:Jd(P,bs),key:P,context:bs,data:{name:g,schemaHash:await E.hash,schema:E.jsonSchema,version:E.version,connectedStorages:[]},_deleted:!1,_meta:Ku(),_rev:Wu(),_attachments:{}};s.push({document:A});var w=Object.assign({},y,{name:g,schema:E,database:this}),b=ut(y);b.database=this,b.name=h,un("preCreateRxCollection",b),w.conflictHandler=b.conflictHandler,l[g]=w}));var u=await this.internalStore.bulkWrite(s,"rx-database-add-collection");await IP(this),await Promise.all(u.error.map(async h=>{if(h.status!==409)throw fe("DB12",{database:this.name,writeError:h});var y=Ve(h.documentInDb),g=y.data.name,S=o[g];if(y.data.schemaHash!==await S.hash)throw fe("DB6",{database:this.name,collection:g,previousSchemaHash:y.data.schemaHash,schemaHash:await S.hash,previousSchema:y.data.schema,schema:Ve(i[g])})}));var f={};return await Promise.all(Object.keys(r).map(async h=>{var y=l[h],g=await EP(y);f[h]=g,this.collections[h]=g,this[h]||Object.defineProperty(this,h,{get:()=>this.collections[h]})})),f},t.lockedRun=function(r){return this.idleQueue.wrapCall(r)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(r){throw je("json-dump")},t.addState=function(r){throw je("state")},t.importJSON=function(r){throw je("json-dump")},t.backup=function(r){throw je("backup")},t.leaderElector=function(){throw je("leader-election")},t.isLeader=function(){throw je("leader-election")},t.waitForLeadership=function(){throw je("leader-election")},t.migrationStates=function(){throw je("migration-schema")},t.destroy=async function(){return this.destroyed||(this.destroyed=!0,await ca("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map(r=>r.unsubscribe()),this.name==="pseudoInstance")?oi:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(r=>r()))).then(()=>Promise.all(Object.keys(this.collections).map(r=>this.collections[r]).map(r=>r.destroy()))).then(()=>this.internalStore.close()).then(()=>mu.delete(this.storage.name+"|"+this.name)).then(()=>!0)},t.remove=function(){return this.destroy().then(()=>OP(this.name,this.storage,this.password))},zr(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function jP(e,t){var n=t.name+"|"+e;if(mu.has(n))throw fe("DB8",{name:e,storage:t.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}async function JS(e,t,n,r,i,o){var s=await t.createStorageInstance({databaseInstanceToken:e,databaseName:n,collectionName:Xj,schema:jh,options:r,multiInstance:i,password:o,devMode:ct.isDevMode()});return s}function PP({storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i=!0,eventReduce:o=!0,ignoreDuplicate:s=!1,options:l={},cleanupPolicy:u,allowSlowCount:f=!1,localDocuments:h=!1,hashFunction:y=px,reactivity:g}){un("preCreateRxDatabase",{storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i,eventReduce:o,ignoreDuplicate:s,options:l,localDocuments:h}),s||jP(n,e),mu.add(e.name+"|"+n);var S=Vu(10);return JS(S,e,n,t,i,r).catch(E=>{throw mu.delete(e.name+"|"+n),E}).then(E=>{var P=new YS(n,S,e,t,r,i,o,l,E,y,u,f,g);return ca("createRxDatabase",{database:P,creator:{storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i,eventReduce:o,ignoreDuplicate:s,options:l,localDocuments:h}}).then(()=>P)})}async function OP(e,t,n){var r=Vu(10),i=await JS(r,t,e,{},!1,n),o=await FS(i),s=new Set;o.forEach(u=>s.add(u.data.name));var l=Array.from(s);return await Promise.all(l.map(u=>KS(t,i,r,e,u,n))),await ca("postRemoveRxDatabase",{databaseName:e,storage:t}),await i.remove(),l}async function IP(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}var RP={RxSchema:Tx.prototype,RxDocument:Ch,RxQuery:AS.prototype,RxCollection:HS.prototype,RxDatabase:YS.prototype},Pf=new Set,mv=new Set;function DP(e){if(un("preAddRxPlugin",{plugin:e,plugins:Pf}),!Pf.has(e)){{if(mv.has(e.name))throw fe("PL3",{name:e.name,plugin:e});Pf.add(e),mv.add(e.name)}if(!e.rxdb)throw El("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach(([t,n])=>n(RP[t])),e.overwritable&&Object.assign(ct,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(([t,n])=>{n.after&&Js[t].push(n.after),n.before&&Js[t].unshift(n.before)})}}function AP(e){return e&&typeof e.then=="function"}Promise.resolve(!1);Promise.resolve(!0);var fi=Promise.resolve();function XS(e,t){return e||(e=0),new Promise(function(n){return setTimeout(function(){return n(t)},e)})}function NP(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Oh(){return Math.random().toString(36).substring(2)}var Of=0;function ha(){var e=Date.now()*1e3;return e<=Of&&(e=Of+1),Of=e,e}var MP=ha,BP="native";function zP(e){var t={time:ha(),messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function $P(e){e.bc.close(),e.subFns=[]}function LP(e,t){try{return e.bc.postMessage(t,!1),fi}catch(n){return Promise.reject(n)}}function FP(e,t){e.messagesCallback=t}function UP(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function KP(){return 150}var WP={create:zP,close:$P,onMessage:FP,postMessage:LP,canBeUsed:UP,type:BP,averageResponseTime:KP,microSeconds:MP};function Ih(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var qP=ha,VP="pubkey.broadcast-channel-0-",er="messages",Xu={durability:"relaxed"},HP="idb";function ZS(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Rh(e){e.commit&&e.commit()}function QP(e){var t=ZS(),n=VP+e,r=t.open(n);return r.onupgradeneeded=function(i){var o=i.target.result;o.createObjectStore(er,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,o){r.onerror=function(s){return o(s)},r.onsuccess=function(){i(r.result)}})}function GP(e,t,n){var r=Date.now(),i={uuid:t,time:r,data:n},o=e.transaction([er],"readwrite",Xu);return new Promise(function(s,l){o.oncomplete=function(){return s()},o.onerror=function(f){return l(f)};var u=o.objectStore(er);u.add(i),Rh(o)})}function YP(e,t){var n=e.transaction(er,"readonly",Xu),r=n.objectStore(er),i=[],o=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var s=r.getAll(o);return new Promise(function(u,f){s.onerror=function(h){return f(h)},s.onsuccess=function(h){u(h.target.result)}})}function l(){try{return o=IDBKeyRange.bound(t+1,1/0),r.openCursor(o)}catch{return r.openCursor()}}return new Promise(function(u,f){var h=l();h.onerror=function(y){return f(y)},h.onsuccess=function(y){var g=y.target.result;g?g.value.id<t+1?g.continue(t+1):(i.push(g.value),g.continue()):(Rh(n),u(i))}})}function JP(e,t){if(e.closed)return Promise.resolve([]);var n=e.db.transaction(er,"readwrite",Xu),r=n.objectStore(er);return Promise.all(t.map(function(i){var o=r.delete(i);return new Promise(function(s){o.onsuccess=function(){return s()}})}))}function XP(e,t){var n=Date.now()-t,r=e.transaction(er,"readonly",Xu),i=r.objectStore(er),o=[];return new Promise(function(s){i.openCursor().onsuccess=function(l){var u=l.target.result;if(u){var f=u.value;f.time<n?(o.push(f),u.continue()):(Rh(r),s(o))}else s(o)}})}function ZP(e){return XP(e.db,e.options.idb.ttl).then(function(t){return JP(e,t.map(function(n){return n.id}))})}function eO(e,t){return t=Ih(t),QP(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Oh(),eMIs:new Ph(t.idb.ttl*2),writeBlockPromise:fi,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},ew(r),r})}function ew(e){e.closed||tw(e).then(function(){return XS(e.options.idb.fallbackInterval)}).then(function(){return ew(e)})}function tO(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function tw(e){return e.closed||!e.messagesCallback?fi:YP(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return tO(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),fi})}function nO(e){e.closed=!0,e.db.close()}function rO(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return GP(e.db,e.uuid,t)}).then(function(){NP(0,10)===0&&ZP(e)}),e.writeBlockPromise}function iO(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,tw(e)}function oO(){return!!ZS()}function sO(e){return e.idb.fallbackInterval*2}var aO={create:eO,close:nO,onMessage:iO,postMessage:rO,canBeUsed:oO,type:HP,averageResponseTime:sO,microSeconds:qP},lO=ha,uO="pubkey.broadcastChannel-",cO="localstorage";function nw(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function rw(e){return uO+e}function fO(e,t){return new Promise(function(n){XS().then(function(){var r=rw(e.channelName),i={token:Oh(),time:Date.now(),data:t,uuid:e.uuid},o=JSON.stringify(i);nw().setItem(r,o);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=r,s.newValue=o,window.dispatchEvent(s),n()})})}function dO(e,t){var n=rw(e),r=function(o){o.key===n&&t(JSON.parse(o.newValue))};return window.addEventListener("storage",r),r}function pO(e){window.removeEventListener("storage",e)}function hO(e,t){if(t=Ih(t),!iw())throw new Error("BroadcastChannel: localstorage cannot be used");var n=Oh(),r=new Ph(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=dO(e,function(o){i.messagesCallback&&o.uuid!==n&&(!o.token||r.has(o.token)||o.data.time&&o.data.time<i.messagesCallbackTime||(r.add(o.token),i.messagesCallback(o.data)))}),i}function mO(e){pO(e.listener)}function yO(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function iw(){var e=nw();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function vO(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}var gO={create:hO,close:mO,onMessage:yO,postMessage:fO,canBeUsed:iw,type:cO,averageResponseTime:vO,microSeconds:lO},ow=ha,xO="simulate",Dh=new Set;function SO(e){var t={time:ow(),name:e,messagesCallback:null};return Dh.add(t),t}function wO(e){Dh.delete(e)}var sw=5;function bO(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(Dh);r.forEach(function(i){i.name===e.name&&i!==e&&i.messagesCallback&&i.time<t.time&&i.messagesCallback(t)}),n()},sw)})}function _O(e,t){e.messagesCallback=t}function kO(){return!0}function EO(){return sw}var CO={create:SO,close:wO,onMessage:_O,postMessage:bO,canBeUsed:kO,type:xO,averageResponseTime:EO,microSeconds:ow},yv=[WP,aO,gO];function TO(e){var t=[].concat(e.methods,yv).filter(Boolean);if(e.type){if(e.type==="simulate")return CO;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(yv.map(function(i){return i.type})))}var aw=new Set,jO=0,Ah=function(t,n){this.id=jO++,aw.add(this),this.name=t,this.options=Ih(n),this.method=TO(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,PO(this)};Ah._pubkey=!0;Ah.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(t));return vv(this,"message",t)},postInternal:function(t){return vv(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};xv(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,gv(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};gv(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});xv(this,t,r)},close:function(){var t=this;if(!this.closed){aw.delete(this),this.closed=!0;var n=this._prepP?this._prepP:fi;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function vv(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},o=e._prepP?e._prepP:fi;return o.then(function(){var s=e.method.postMessage(e._state,i);return e._uMP.add(s),s.catch().then(function(){return e._uMP.delete(s)}),s})}function PO(e){var t=e.method.create(e.name,e.options);AP(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function lw(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function gv(e,t,n){e._addEL[t].push(n),OO(e)}function xv(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),IO(e)}function OO(e){if(!e._iL&&lw(e)){var t=function(i){e._addEL[i.type].forEach(function(o){i.time>=o.time&&o.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function IO(e){if(e._iL&&!lw(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}var yu=new Map;function RO(e,t,n,r){var i=yu.get(t);return i||(i={bc:new Ah(["RxDB:",e,n].join("|")),refs:new Set},yu.set(t,i)),i.refs.add(r),i.bc}function Sv(e,t){var n=yu.get(e);if(n&&(n.refs.delete(t),n.refs.size===0))return yu.delete(e),n.bc.close()}function DO(e,t,n,r){if(t.multiInstance){var i=RO(e,t.databaseInstanceToken,n.databaseName,n),o=new Dr,s=g=>{g.storageName===e&&g.databaseName===t.databaseName&&g.collectionName===t.collectionName&&g.version===t.schema.version&&o.next(g.eventBulk)};i.addEventListener("message",s);var l=n.changeStream(),u=!1,f=l.subscribe(g=>{u||i.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:g})});n.changeStream=function(){return o.asObservable().pipe(jC(l))};var h=n.close.bind(n);n.close=async function(){return u=!0,f.unsubscribe(),i.removeEventListener("message",s),await Sv(t.databaseInstanceToken,n),h()};var y=n.remove.bind(n);n.remove=async function(){return u=!0,f.unsubscribe(),i.removeEventListener("message",s),await Sv(t.databaseInstanceToken,n),y()}}}var uw={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ym,function(){var n=function(a,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(p[v]=m[v])})(a,c)},r=function(){return(r=Object.assign||function(a){for(var c,p=1,m=arguments.length;p<m;p++)for(var v in c=arguments[p])Object.prototype.hasOwnProperty.call(c,v)&&(a[v]=c[v]);return a}).apply(this,arguments)};function i(a,c,p){for(var m,v=0,x=c.length;v<x;v++)!m&&v in c||((m=m||Array.prototype.slice.call(c,0,v))[v]=c[v]);return a.concat(m||Array.prototype.slice.call(c))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ym,s=Object.keys,l=Array.isArray;function u(a,c){return typeof c!="object"||s(c).forEach(function(p){a[p]=c[p]}),a}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var f=Object.getPrototypeOf,h={}.hasOwnProperty;function y(a,c){return h.call(a,c)}function g(a,c){typeof c=="function"&&(c=c(f(a))),(typeof Reflect>"u"?s:Reflect.ownKeys)(c).forEach(function(p){E(a,p,c[p])})}var S=Object.defineProperty;function E(a,c,p,m){S(a,c,u(p&&y(p,"get")&&typeof p.get=="function"?{get:p.get,set:p.set,configurable:!0}:{value:p,configurable:!0,writable:!0},m))}function P(a){return{from:function(c){return a.prototype=Object.create(c.prototype),E(a.prototype,"constructor",a),{extend:g.bind(null,a.prototype)}}}}var A=Object.getOwnPropertyDescriptor,w=[].slice;function b(a,c,p){return w.call(a,c,p)}function k(a,c){return c(a)}function C(a){if(!a)throw new Error("Assertion Failed")}function T(a){o.setImmediate?setImmediate(a):setTimeout(a,0)}function z(a,c){if(typeof c=="string"&&y(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var p=[],m=0,v=c.length;m<v;++m){var x=z(a,c[m]);p.push(x)}return p}var _=c.indexOf(".");if(_!==-1){var j=a[c.substr(0,_)];return j==null?void 0:z(j,c.substr(_+1))}}function U(a,c,p){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){C(typeof p!="string"&&"length"in p);for(var m=0,v=c.length;m<v;++m)U(a,c[m],p[m])}else{var x,_,j=c.indexOf(".");j!==-1?(x=c.substr(0,j),(_=c.substr(j+1))===""?p===void 0?l(a)&&!isNaN(parseInt(x))?a.splice(x,1):delete a[x]:a[x]=p:U(j=!(j=a[x])||!y(a,x)?a[x]={}:j,_,p)):p===void 0?l(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=p}}function q(a){var c,p={};for(c in a)y(a,c)&&(p[c]=a[c]);return p}var X=[].concat;function oe(a){return X.apply([],a)}var An="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(oe([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return o[a]}),Ce=new Set(An.map(function(a){return o[a]})),Ae=null;function ke(a){return Ae=new WeakMap,a=function c(p){if(!p||typeof p!="object")return p;var m=Ae.get(p);if(m)return m;if(l(p)){m=[],Ae.set(p,m);for(var v=0,x=p.length;v<x;++v)m.push(c(p[v]))}else if(Ce.has(p.constructor))m=p;else{var _,j=f(p);for(_ in m=j===Object.prototype?{}:Object.create(j),Ae.set(p,m),p)y(p,_)&&(m[_]=c(p[_]))}return m}(a),Ae=null,a}var bn={}.toString;function kt(a){return bn.call(a).slice(8,-1)}var Rn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Lr=typeof Rn=="symbol"?function(a){var c;return a!=null&&(c=a[Rn])&&c.apply(a)}:function(){return null};function ee(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var ae={};function ce(a){var c,p,m,v;if(arguments.length===1){if(l(a))return a.slice();if(this===ae&&typeof a=="string")return[a];if(v=Lr(a)){for(p=[];!(m=v.next()).done;)p.push(m.value);return p}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(p=new Array(c);c--;)p[c]=a[c];return p}for(c=arguments.length,p=new Array(c);c--;)p[c]=arguments[c];return p}var we=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},No=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Zt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(No),Ke={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Oe(a,c){this.name=a,this.message=c}function We(a,c){return a+". Errors: "+Object.keys(c).map(function(p){return c[p].toString()}).filter(function(p,m,v){return v.indexOf(p)===m}).join(`
`)}function zt(a,c,p,m){this.failures=c,this.failedKeys=m,this.successCount=p,this.message=We(a,c)}function ht(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(p){return c[p]}),this.failuresByPos=c,this.message=We(a,this.failures)}P(Oe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),P(zt).from(Oe),P(ht).from(Oe);var ir=Zt.reduce(function(a,c){return a[c]=c+"Error",a},{}),Pw=Oe,le=Zt.reduce(function(a,c){var p=c+"Error";function m(v,x){this.name=p,v?typeof v=="string"?(this.message="".concat(v).concat(x?`
 `+x:""),this.inner=x||null):typeof v=="object"&&(this.message="".concat(v.name," ").concat(v.message),this.inner=v):(this.message=Ke[c]||p,this.inner=null)}return P(m).from(Pw),a[c]=m,a},{});le.Syntax=SyntaxError,le.Type=TypeError,le.Range=RangeError;var Mh=No.reduce(function(a,c){return a[c+"Error"]=le[c],a},{}),ma=Zt.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=le[c]),a},{});function Te(){}function Do(a){return a}function Ow(a,c){return a==null||a===Do?c:function(p){return c(a(p))}}function Fr(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function Iw(a,c){return a===Te?c:function(){var p=a.apply(this,arguments);p!==void 0&&(arguments[0]=p);var m=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var x=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?Fr(m,this.onsuccess):m),v&&(this.onerror=this.onerror?Fr(v,this.onerror):v),x!==void 0?x:p}}function Rw(a,c){return a===Te?c:function(){a.apply(this,arguments);var p=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Fr(p,this.onsuccess):p),m&&(this.onerror=this.onerror?Fr(m,this.onerror):m)}}function Dw(a,c){return a===Te?c:function(p){var m=a.apply(this,arguments);u(p,m);var v=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,p=c.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?Fr(v,this.onsuccess):v),x&&(this.onerror=this.onerror?Fr(x,this.onerror):x),m===void 0?p===void 0?void 0:p:u(m,p)}}function Aw(a,c){return a===Te?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function ec(a,c){return a===Te?c:function(){var p=a.apply(this,arguments);if(p&&typeof p.then=="function"){for(var m=this,v=arguments.length,x=new Array(v);v--;)x[v]=arguments[v];return p.then(function(){return c.apply(m,x)})}return c.apply(this,arguments)}}ma.ModifyError=zt,ma.DexieError=Oe,ma.BulkError=ht;var _n=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Bh(a){_n=a}var Ao={},zh=100,An=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,f(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,f(c),a]}(),No=An[0],Zt=An[1],An=An[2],Zt=Zt&&Zt.then,Ur=No&&No.constructor,tc=!!An,Mo=function(a,c){Bo.push([a,c]),ya&&(queueMicrotask(Mw),ya=!1)},nc=!0,ya=!0,Kr=[],va=[],rc=Do,or={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Te,pgp:!1,env:{},finalize:Te},se=or,Bo=[],Wr=0,ga=[];function ne(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=se;if(typeof a!="function"){if(a!==Ao)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&oc(this,this._value))}this._state=null,this._value=null,++c.ref,function p(m,v){try{v(function(x){if(m._state===null){if(x===m)throw new TypeError("A promise cannot be resolved with itself.");var _=m._lib&&Ei();x&&typeof x.then=="function"?p(m,function(j,I){x instanceof ne?x._then(j,I):x.then(j,I)}):(m._state=!0,m._value=x,Lh(m)),_&&Ci()}},oc.bind(null,m))}catch(x){oc(m,x)}}(this,a)}var ic={get:function(){var a=se,c=ba;function p(m,v){var x=this,_=!a.global&&(a!==se||c!==ba),j=_&&!ar(),I=new ne(function(D,B){sc(x,new $h(Uh(m,a,_,j),Uh(v,a,_,j),D,B,a))});return this._consoleTask&&(I._consoleTask=this._consoleTask),I}return p.prototype=Ao,p},set:function(a){E(this,"then",a&&a.prototype===Ao?ic:{get:function(){return a},set:ic.set})}};function $h(a,c,p,m,v){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=p,this.reject=m,this.psd=v}function oc(a,c){var p,m;va.push(c),a._state===null&&(p=a._lib&&Ei(),c=rc(c),a._state=!1,a._value=c,m=a,Kr.some(function(v){return v._value===m._value})||Kr.push(m),Lh(a),p&&Ci())}function Lh(a){var c=a._listeners;a._listeners=[];for(var p=0,m=c.length;p<m;++p)sc(a,c[p]);var v=a._PSD;--v.ref||v.finalize(),Wr===0&&(++Wr,Mo(function(){--Wr==0&&ac()},[]))}function sc(a,c){if(a._state!==null){var p=a._state?c.onFulfilled:c.onRejected;if(p===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++Wr,Mo(Nw,[p,a,c])}else a._listeners.push(c)}function Nw(a,c,p){try{var m,v=c._value;!c._state&&va.length&&(va=[]),m=_n&&c._consoleTask?c._consoleTask.run(function(){return a(v)}):a(v),c._state||va.indexOf(v)!==-1||function(x){for(var _=Kr.length;_;)if(Kr[--_]._value===x._value)return Kr.splice(_,1)}(c),p.resolve(m)}catch(x){p.reject(x)}finally{--Wr==0&&ac(),--p.psd.ref||p.psd.finalize()}}function Mw(){qr(or,function(){Ei()&&Ci()})}function Ei(){var a=nc;return ya=nc=!1,a}function Ci(){var a,c,p;do for(;0<Bo.length;)for(a=Bo,Bo=[],p=a.length,c=0;c<p;++c){var m=a[c];m[0].apply(null,m[1])}while(0<Bo.length);ya=nc=!0}function ac(){var a=Kr;Kr=[],a.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=ga.slice(0),p=c.length;p;)c[--p]()}function xa(a){return new ne(Ao,!1,a)}function Ne(a,c){var p=se;return function(){var m=Ei(),v=se;try{return lr(p,!0),a.apply(this,arguments)}catch(x){c&&c(x)}finally{lr(v,!1),m&&Ci()}}}g(ne.prototype,{then:ic,_then:function(a,c){sc(this,new $h(null,null,a,c,se))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,p=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?p:xa)(m)}):this.then(null,function(m){return(m&&m.name===c?p:xa)(m)})},finally:function(a){return this.then(function(c){return ne.resolve(a()).then(function(){return c})},function(c){return ne.resolve(a()).then(function(){return xa(c)})})},timeout:function(a,c){var p=this;return a<1/0?new ne(function(m,v){var x=setTimeout(function(){return v(new le.Timeout(c))},a);p.then(m,v).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&E(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),or.env=Fh(),g(ne,{all:function(){var a=ce.apply(null,arguments).map(_a);return new ne(function(c,p){a.length===0&&c([]);var m=a.length;a.forEach(function(v,x){return ne.resolve(v).then(function(_){a[x]=_,--m||c(a)},p)})})},resolve:function(a){return a instanceof ne?a:a&&typeof a.then=="function"?new ne(function(c,p){a.then(c,p)}):new ne(Ao,!0,a)},reject:xa,race:function(){var a=ce.apply(null,arguments).map(_a);return new ne(function(c,p){a.map(function(m){return ne.resolve(m).then(c,p)})})},PSD:{get:function(){return se},set:function(a){return se=a}},totalEchoes:{get:function(){return ba}},newPSD:sr,usePSD:qr,scheduler:{get:function(){return Mo},set:function(a){Mo=a}},rejectionMapper:{get:function(){return rc},set:function(a){rc=a}},follow:function(a,c){return new ne(function(p,m){return sr(function(v,x){var _=se;_.unhandleds=[],_.onunhandled=x,_.finalize=Fr(function(){var j,I=this;j=function(){I.unhandleds.length===0?v():x(I.unhandleds[0])},ga.push(function D(){j(),ga.splice(ga.indexOf(D),1)}),++Wr,Mo(function(){--Wr==0&&ac()},[])},_.finalize),a()},c,p,m)})}}),Ur&&(Ur.allSettled&&E(ne,"allSettled",function(){var a=ce.apply(null,arguments).map(_a);return new ne(function(c){a.length===0&&c([]);var p=a.length,m=new Array(p);a.forEach(function(v,x){return ne.resolve(v).then(function(_){return m[x]={status:"fulfilled",value:_}},function(_){return m[x]={status:"rejected",reason:_}}).then(function(){return--p||c(m)})})})}),Ur.any&&typeof AggregateError<"u"&&E(ne,"any",function(){var a=ce.apply(null,arguments).map(_a);return new ne(function(c,p){a.length===0&&p(new AggregateError([]));var m=a.length,v=new Array(m);a.forEach(function(x,_){return ne.resolve(x).then(function(j){return c(j)},function(j){v[_]=j,--m||p(new AggregateError(v))})})})}),Ur.withResolvers&&(ne.withResolvers=Ur.withResolvers));var nt={awaits:0,echoes:0,id:0},Bw=0,Sa=[],wa=0,ba=0,zw=0;function sr(a,c,p,m){var v=se,x=Object.create(v);return x.parent=v,x.ref=0,x.global=!1,x.id=++zw,or.env,x.env=tc?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},c&&u(x,c),++v.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},m=qr(x,a,p,m),x.ref===0&&x.finalize(),m}function Ti(){return nt.id||(nt.id=++Bw),++nt.awaits,nt.echoes+=zh,nt.id}function ar(){return!!nt.awaits&&(--nt.awaits==0&&(nt.id=0),nt.echoes=nt.awaits*zh,!0)}function _a(a){return nt.echoes&&a&&a.constructor===Ur?(Ti(),a.then(function(c){return ar(),c},function(c){return ar(),He(c)})):a}function $w(){var a=Sa[Sa.length-1];Sa.pop(),lr(a,!1)}function lr(a,c){var p,m=se;(c?!nt.echoes||wa++&&a===se:!wa||--wa&&a===se)||queueMicrotask(c?(function(v){++ba,nt.echoes&&--nt.echoes!=0||(nt.echoes=nt.awaits=nt.id=0),Sa.push(se),lr(v,!0)}).bind(null,a):$w),a!==se&&(se=a,m===or&&(or.env=Fh()),tc&&(p=or.env.Promise,c=a.env,(m.global||a.global)&&(Object.defineProperty(o,"Promise",c.PromiseProp),p.all=c.all,p.race=c.race,p.resolve=c.resolve,p.reject=c.reject,c.allSettled&&(p.allSettled=c.allSettled),c.any&&(p.any=c.any))))}function Fh(){var a=o.Promise;return tc?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function qr(a,c,p,m,v){var x=se;try{return lr(a,!0),c(p,m,v)}finally{lr(x,!1)}}function Uh(a,c,p,m){return typeof a!="function"?a:function(){var v=se;p&&Ti(),lr(c,!0);try{return a.apply(this,arguments)}finally{lr(v,!1),m&&queueMicrotask(ar)}}}function lc(a){Promise===Ur&&nt.echoes===0?wa===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Zt).indexOf("[native code]")===-1&&(Ti=ar=Te);var He=ne.reject,Vr="",Dn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Kh="String expected.",ji=[],ka="__dbnames",uc="readonly",cc="readwrite";function Hr(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var Wh={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ea(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=ke(c))[a],c}}function qh(){throw le.Type()}function ve(a,c){try{var p=Vh(a),m=Vh(c);if(p!==m)return p==="Array"?1:m==="Array"?-1:p==="binary"?1:m==="binary"?-1:p==="string"?1:m==="string"?-1:p==="Date"?1:m!=="Date"?NaN:-1;switch(p){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(v,x){for(var _=v.length,j=x.length,I=_<j?_:j,D=0;D<I;++D)if(v[D]!==x[D])return v[D]<x[D]?-1:1;return _===j?0:_<j?-1:1}(Hh(a),Hh(c));case"Array":return function(v,x){for(var _=v.length,j=x.length,I=_<j?_:j,D=0;D<I;++D){var B=ve(v[D],x[D]);if(B!==0)return B}return _===j?0:_<j?-1:1}(a,c)}}catch{}return NaN}function Vh(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=kt(a),a==="ArrayBuffer"?"binary":a)}function Hh(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Qh=(Ie.prototype._trans=function(a,c,p){var m=this._tx||se.trans,v=this.name,x=_n&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function _(D,B,O){if(!O.schema[v])throw new le.NotFound("Table "+v+" not part of transaction");return c(O.idbtrans,O)}var j=Ei();try{var I=m&&m.db._novip===this.db._novip?m===se.trans?m._promise(a,_,p):sr(function(){return m._promise(a,_,p)},{trans:m,transless:se.transless||se}):function D(B,O,L,R){if(B.idbdb&&(B._state.openComplete||se.letThrough||B._vip)){var M=B._createTransaction(O,L,B._dbSchema);try{M.create(),B._state.PR1398_maxLoop=3}catch($){return $.name===ir.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return D(B,O,L,R)})):He($)}return M._promise(O,function($,N){return sr(function(){return se.trans=M,R($,N,M)})}).then(function($){if(O==="readwrite")try{M.idbtrans.commit()}catch{}return O==="readonly"?$:M._completion.then(function(){return $})})}if(B._state.openComplete)return He(new le.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return He(new le.DatabaseClosed);B.open().catch(Te)}return B._state.dbReadyPromise.then(function(){return D(B,O,L,R)})}(this.db,a,[this.name],_);return x&&(I._consoleTask=x,I=I.catch(function(D){return console.trace(D),He(D)})),I}finally{j&&Ci()}},Ie.prototype.get=function(a,c){var p=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?He(new le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return p.core.get({trans:m,key:a}).then(function(v){return p.hook.reading.fire(v)})}).then(c)},Ie.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(l(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=s(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(j){if(j.compound&&c.every(function(D){return 0<=j.keyPath.indexOf(D)})){for(var I=0;I<c.length;++I)if(c.indexOf(j.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(j,I){return j.keyPath.length-I.keyPath.length})[0];if(p&&this.db._maxKey!==Vr){var x=p.keyPath.slice(0,c.length);return this.where(x).equals(x.map(function(I){return a[I]}))}!p&&_n&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName;function v(j,I){return ve(j,I)===0}var _=c.reduce(function(O,I){var D=O[0],B=O[1],O=m[I],L=a[I];return[D||O,D||!O?Hr(B,O&&O.multi?function(R){return R=z(R,I),l(R)&&R.some(function(M){return v(L,M)})}:function(R){return v(L,z(R,I))}):B]},[null,null]),x=_[0],_=_[1];return x?this.where(x.name).equals(a[x.keyPath]).filter(_):p?this.filter(_):this.where(c).equals("")},Ie.prototype.filter=function(a){return this.toCollection().and(a)},Ie.prototype.count=function(a){return this.toCollection().count(a)},Ie.prototype.offset=function(a){return this.toCollection().offset(a)},Ie.prototype.limit=function(a){return this.toCollection().limit(a)},Ie.prototype.each=function(a){return this.toCollection().each(a)},Ie.prototype.toArray=function(a){return this.toCollection().toArray(a)},Ie.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ie.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,l(a)?"[".concat(a.join("+"),"]"):a))},Ie.prototype.reverse=function(){return this.toCollection().reverse()},Ie.prototype.mapToClass=function(a){var c,p=this.db,m=this.name;function v(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof qh&&(function(I,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function B(){this.constructor=I}n(I,D),I.prototype=D===null?Object.create(D):(B.prototype=D.prototype,new B)}(v,c=a),Object.defineProperty(v.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),v.prototype.table=function(){return m},a=v);for(var x=new Set,_=a.prototype;_;_=f(_))Object.getOwnPropertyNames(_).forEach(function(I){return x.add(I)});function j(I){if(!I)return I;var D,B=Object.create(a.prototype);for(D in I)if(!x.has(D))try{B[D]=I[D]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=j,this.hook("reading",j),a},Ie.prototype.defineClass=function(){return this.mapToClass(function(a){u(this,a)})},Ie.prototype.add=function(a,c){var p=this,m=this.schema.primKey,v=m.auto,x=m.keyPath,_=a;return x&&v&&(_=Ea(x)(a)),this._trans("readwrite",function(j){return p.core.mutate({trans:j,type:"add",keys:c!=null?[c]:null,values:[_]})}).then(function(j){return j.numFailures?ne.reject(j.failures[0]):j.lastResult}).then(function(j){if(x)try{U(a,x,j)}catch{}return j})},Ie.prototype.update=function(a,c){return typeof a!="object"||l(a)?this.where(":id").equals(a).modify(c):(a=z(a,this.schema.primKey.keyPath),a===void 0?He(new le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},Ie.prototype.put=function(a,c){var p=this,m=this.schema.primKey,v=m.auto,x=m.keyPath,_=a;return x&&v&&(_=Ea(x)(a)),this._trans("readwrite",function(j){return p.core.mutate({trans:j,type:"put",values:[_],keys:c!=null?[c]:null})}).then(function(j){return j.numFailures?ne.reject(j.failures[0]):j.lastResult}).then(function(j){if(x)try{U(a,x,j)}catch{}return j})},Ie.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(p){return c.core.mutate({trans:p,type:"delete",keys:[a]})}).then(function(p){return p.numFailures?ne.reject(p.failures[0]):void 0})},Ie.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:Wh})}).then(function(c){return c.numFailures?ne.reject(c.failures[0]):void 0})},Ie.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(p){return c.core.getMany({keys:a,trans:p}).then(function(m){return m.map(function(v){return c.hook.reading.fire(v)})})})},Ie.prototype.bulkAdd=function(a,c,p){var m=this,v=Array.isArray(c)?c:void 0,x=(p=p||(v?void 0:c))?p.allKeys:void 0;return this._trans("readwrite",function(_){var D=m.schema.primKey,j=D.auto,D=D.keyPath;if(D&&v)throw new le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==a.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var I=a.length,D=D&&j?a.map(Ea(D)):a;return m.core.mutate({trans:_,type:"add",keys:v,values:D,wantResults:x}).then(function(M){var O=M.numFailures,L=M.results,R=M.lastResult,M=M.failures;if(O===0)return x?L:R;throw new ht("".concat(m.name,".bulkAdd(): ").concat(O," of ").concat(I," operations failed"),M)})})},Ie.prototype.bulkPut=function(a,c,p){var m=this,v=Array.isArray(c)?c:void 0,x=(p=p||(v?void 0:c))?p.allKeys:void 0;return this._trans("readwrite",function(_){var D=m.schema.primKey,j=D.auto,D=D.keyPath;if(D&&v)throw new le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==a.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var I=a.length,D=D&&j?a.map(Ea(D)):a;return m.core.mutate({trans:_,type:"put",keys:v,values:D,wantResults:x}).then(function(M){var O=M.numFailures,L=M.results,R=M.lastResult,M=M.failures;if(O===0)return x?L:R;throw new ht("".concat(m.name,".bulkPut(): ").concat(O," of ").concat(I," operations failed"),M)})})},Ie.prototype.bulkUpdate=function(a){var c=this,p=this.core,m=a.map(function(_){return _.key}),v=a.map(function(_){return _.changes}),x=[];return this._trans("readwrite",function(_){return p.getMany({trans:_,keys:m,cache:"clone"}).then(function(j){var I=[],D=[];a.forEach(function(O,L){var R=O.key,M=O.changes,$=j[L];if($){for(var N=0,F=Object.keys(M);N<F.length;N++){var K=F[N],W=M[K];if(K===c.schema.primKey.keyPath){if(ve(W,R)!==0)throw new le.Constraint("Cannot update primary key in bulkUpdate()")}else U($,K,W)}x.push(L),I.push(R),D.push($)}});var B=I.length;return p.mutate({trans:_,type:"put",keys:I,values:D,updates:{keys:m,changeSpecs:v}}).then(function(O){var L=O.numFailures,R=O.failures;if(L===0)return B;for(var M=0,$=Object.keys(R);M<$.length;M++){var N,F=$[M],K=x[Number(F)];K!=null&&(N=R[F],delete R[F],R[K]=N)}throw new ht("".concat(c.name,".bulkUpdate(): ").concat(L," of ").concat(B," operations failed"),R)})})})},Ie.prototype.bulkDelete=function(a){var c=this,p=a.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:a})}).then(function(_){var v=_.numFailures,x=_.lastResult,_=_.failures;if(v===0)return x;throw new ht("".concat(c.name,".bulkDelete(): ").concat(v," of ").concat(p," operations failed"),_)})},Ie);function Ie(){}function zo(a){function c(_,j){if(j){for(var I=arguments.length,D=new Array(I-1);--I;)D[I-1]=arguments[I];return p[_].subscribe.apply(null,D),a}if(typeof _=="string")return p[_]}var p={};c.addEventType=x;for(var m=1,v=arguments.length;m<v;++m)x(arguments[m]);return c;function x(_,j,I){if(typeof _!="object"){var D;j=j||Aw;var B={subscribers:[],fire:I=I||Te,subscribe:function(O){B.subscribers.indexOf(O)===-1&&(B.subscribers.push(O),B.fire=j(B.fire,O))},unsubscribe:function(O){B.subscribers=B.subscribers.filter(function(L){return L!==O}),B.fire=B.subscribers.reduce(j,I)}};return p[_]=c[_]=B}s(D=_).forEach(function(O){var L=D[O];if(l(L))x(O,D[O][0],D[O][1]);else{if(L!=="asap")throw new le.InvalidArgument("Invalid event config");var R=x(O,Do,function(){for(var M=arguments.length,$=new Array(M);M--;)$[M]=arguments[M];R.subscribers.forEach(function(N){T(function(){N.apply(null,$)})})})}})}}function $o(a,c){return P(c).from({prototype:a}),c}function Pi(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function fc(a,c){a.filter=Hr(a.filter,c)}function dc(a,c,p){var m=a.replayFilter;a.replayFilter=m?function(){return Hr(m(),c())}:c,a.justLimit=p&&!m}function Ca(a,c){if(a.isPrimKey)return c.primaryKey;var p=c.getIndexByKeyPath(a.index);if(!p)throw new le.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return p}function Gh(a,c,p){var m=Ca(a,c.schema);return c.openCursor({trans:p,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:m,range:a.range}})}function Ta(a,c,p,m){var v=a.replayFilter?Hr(a.filter,a.replayFilter()):a.filter;if(a.or){var x={},_=function(j,I,D){var B,O;v&&!v(I,D,function(L){return I.stop(L)},function(L){return I.fail(L)})||((O=""+(B=I.primaryKey))=="[object ArrayBuffer]"&&(O=""+new Uint8Array(B)),y(x,O)||(x[O]=!0,c(j,I,D)))};return Promise.all([a.or._iterate(_,p),Yh(Gh(a,m,p),a.algorithm,_,!a.keysOnly&&a.valueMapper)])}return Yh(Gh(a,m,p),Hr(a.algorithm,v),c,!a.keysOnly&&a.valueMapper)}function Yh(a,c,p,m){var v=Ne(m?function(x,_,j){return p(m(x),_,j)}:p);return a.then(function(x){if(x)return x.start(function(){var _=function(){return x.continue()};c&&!c(x,function(j){return _=j},function(j){x.stop(j),_=Te},function(j){x.fail(j),_=Te})||v(x.value,x,function(j){return _=j}),_()})})}var An=Symbol(),Lo=(Jh.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(l(c))return i(i([],l(a)?a:[],!0),c).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var p=this.remove;if(l(p))return l(a)?a.filter(function(m){return!p.includes(m)}).sort():[];if(typeof p=="number")return Number(a)-p;if(typeof p=="bigint")try{return BigInt(a)-p}catch{return BigInt(0)-p}throw new TypeError("Invalid subtrahend ".concat(p))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},Jh);function Jh(a){Object.assign(this,a)}var Lw=(Se.prototype._read=function(a,c){var p=this._ctx;return p.error?p.table._trans(null,He.bind(null,p.error)):p.table._trans("readonly",a).then(c)},Se.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,He.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},Se.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=Hr(c.algorithm,a)},Se.prototype._iterate=function(a,c){return Ta(this._ctx,a,c,this._ctx.table.core)},Se.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return a&&u(p,a),c._ctx=p,c},Se.prototype.raw=function(){return this._ctx.valueMapper=null,this},Se.prototype.each=function(a){var c=this._ctx;return this._read(function(p){return Ta(c,a,p,c.table.core)})},Se.prototype.count=function(a){var c=this;return this._read(function(p){var m=c._ctx,v=m.table.core;if(Pi(m,!0))return v.count({trans:p,query:{index:Ca(m,v.schema),range:m.range}}).then(function(_){return Math.min(_,m.limit)});var x=0;return Ta(m,function(){return++x,!1},p,v).then(function(){return x})}).then(a)},Se.prototype.sortBy=function(a,c){var p=a.split(".").reverse(),m=p[0],v=p.length-1;function x(I,D){return D?x(I[p[D]],D-1):I[m]}var _=this._ctx.dir==="next"?1:-1;function j(I,D){return ve(x(I,v),x(D,v))*_}return this.toArray(function(I){return I.sort(j)}).then(c)},Se.prototype.toArray=function(a){var c=this;return this._read(function(p){var m=c._ctx;if(m.dir==="next"&&Pi(m,!0)&&0<m.limit){var v=m.valueMapper,x=Ca(m,m.table.core.schema);return m.table.core.query({trans:p,limit:m.limit,values:!0,query:{index:x,range:m.range}}).then(function(j){return j=j.result,v?j.map(v):j})}var _=[];return Ta(m,function(j){return _.push(j)},p,m.table.core).then(function(){return _})},a)},Se.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,Pi(c)?dc(c,function(){var p=a;return function(m,v){return p===0||(p===1?--p:v(function(){m.advance(p),p=0}),!1)}}):dc(c,function(){var p=a;return function(){return--p<0}})),this},Se.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),dc(this._ctx,function(){var c=a;return function(p,m,v){return--c<=0&&m(v),0<=c}},!0),this},Se.prototype.until=function(a,c){return fc(this._ctx,function(p,m,v){return!a(p.value)||(m(v),c)}),this},Se.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},Se.prototype.last=function(a){return this.reverse().first(a)},Se.prototype.filter=function(a){var c;return fc(this._ctx,function(p){return a(p.value)}),(c=this._ctx).isMatch=Hr(c.isMatch,a),this},Se.prototype.and=function(a){return this.filter(a)},Se.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},Se.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Se.prototype.desc=function(){return this.reverse()},Se.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(p,m){a(m.key,m)})},Se.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},Se.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(p,m){a(m.primaryKey,m)})},Se.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var p=[];return this.each(function(m,v){p.push(v.key)}).then(function(){return p}).then(a)},Se.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&Pi(c,!0)&&0<c.limit)return this._read(function(m){var v=Ca(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:v,range:c.range}})}).then(function(m){return m.result}).then(a);c.keysOnly=!c.isMatch;var p=[];return this.each(function(m,v){p.push(v.primaryKey)}).then(function(){return p}).then(a)},Se.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},Se.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},Se.prototype.lastKey=function(a){return this.reverse().firstKey(a)},Se.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return fc(this._ctx,function(v){var m=v.primaryKey.toString(),v=y(c,m);return c[m]=!0,!v}),this},Se.prototype.modify=function(a){var c=this,p=this._ctx;return this._write(function(m){var v,x,_;_=typeof a=="function"?a:(v=s(a),x=v.length,function(N){for(var F=!1,K=0;K<x;++K){var W=v[K],V=a[W],Q=z(N,W);V instanceof Lo?(U(N,W,V.execute(Q)),F=!0):Q!==V&&(U(N,W,V),F=!0)}return F});var j=p.table.core,O=j.schema.primaryKey,I=O.outbound,D=O.extractKey,B=200,O=c.db._options.modifyChunkSize;O&&(B=typeof O=="object"?O[j.name]||O["*"]||200:O);function L(N,W){var K=W.failures,W=W.numFailures;M+=N-W;for(var V=0,Q=s(K);V<Q.length;V++){var Z=Q[V];R.push(K[Z])}}var R=[],M=0,$=[];return c.clone().primaryKeys().then(function(N){function F(W){var V=Math.min(B,N.length-W);return j.getMany({trans:m,keys:N.slice(W,W+V),cache:"immutable"}).then(function(Q){for(var Z=[],G=[],Y=I?[]:null,te=[],J=0;J<V;++J){var re=Q[J],pe={value:ke(re),primKey:N[W+J]};_.call(pe,pe.value,pe)!==!1&&(pe.value==null?te.push(N[W+J]):I||ve(D(re),D(pe.value))===0?(G.push(pe.value),I&&Y.push(N[W+J])):(te.push(N[W+J]),Z.push(pe.value)))}return Promise.resolve(0<Z.length&&j.mutate({trans:m,type:"add",values:Z}).then(function(he){for(var me in he.failures)te.splice(parseInt(me),1);L(Z.length,he)})).then(function(){return(0<G.length||K&&typeof a=="object")&&j.mutate({trans:m,type:"put",keys:Y,values:G,criteria:K,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<W}).then(function(he){return L(G.length,he)})}).then(function(){return(0<te.length||K&&a===pc)&&j.mutate({trans:m,type:"delete",keys:te,criteria:K,isAdditionalChunk:0<W}).then(function(he){return L(te.length,he)})}).then(function(){return N.length>W+V&&F(W+B)})})}var K=Pi(p)&&p.limit===1/0&&(typeof a!="function"||a===pc)&&{index:p.index,range:p.range};return F(0).then(function(){if(0<R.length)throw new zt("Error modifying one or more objects",R,M,$);return N.length})})})},Se.prototype.delete=function(){var a=this._ctx,c=a.range;return Pi(a)&&(a.isPrimKey||c.type===3)?this._write(function(p){var m=a.table.core.schema.primaryKey,v=c;return a.table.core.count({trans:p,query:{index:m,range:v}}).then(function(x){return a.table.core.mutate({trans:p,type:"deleteRange",range:v}).then(function(_){var j=_.failures;if(_.lastResult,_.results,_=_.numFailures,_)throw new zt("Could not delete some values",Object.keys(j).map(function(I){return j[I]}),x-_);return x-_})})}):this.modify(pc)},Se);function Se(){}var pc=function(a,c){return c.value=null};function Fw(a,c){return a<c?-1:a===c?0:1}function Uw(a,c){return c<a?-1:a===c?0:1}function $t(a,c,p){return a=a instanceof Zh?new a.Collection(a):a,a._ctx.error=new(p||TypeError)(c),a}function Oi(a){return new a.Collection(a,function(){return Xh("")}).limit(0)}function ja(a,c,p,m){var v,x,_,j,I,D,B,O=p.length;if(!p.every(function(M){return typeof M=="string"}))return $t(a,Kh);function L(M){v=M==="next"?function(N){return N.toUpperCase()}:function(N){return N.toLowerCase()},x=M==="next"?function(N){return N.toLowerCase()}:function(N){return N.toUpperCase()},_=M==="next"?Fw:Uw;var $=p.map(function(N){return{lower:x(N),upper:v(N)}}).sort(function(N,F){return _(N.lower,F.lower)});j=$.map(function(N){return N.upper}),I=$.map(function(N){return N.lower}),B=(D=M)==="next"?"":m}L("next"),a=new a.Collection(a,function(){return ur(j[0],I[O-1]+m)}),a._ondirectionchange=function(M){L(M)};var R=0;return a._addAlgorithm(function(M,$,N){var F=M.key;if(typeof F!="string")return!1;var K=x(F);if(c(K,I,R))return!0;for(var W=null,V=R;V<O;++V){var Q=function(Z,G,Y,te,J,re){for(var pe=Math.min(Z.length,te.length),he=-1,me=0;me<pe;++me){var Lt=G[me];if(Lt!==te[me])return J(Z[me],Y[me])<0?Z.substr(0,me)+Y[me]+Y.substr(me+1):J(Z[me],te[me])<0?Z.substr(0,me)+te[me]+Y.substr(me+1):0<=he?Z.substr(0,he)+G[he]+Y.substr(he+1):null;J(Z[me],Lt)<0&&(he=me)}return pe<te.length&&re==="next"?Z+Y.substr(Z.length):pe<Z.length&&re==="prev"?Z.substr(0,Y.length):he<0?null:Z.substr(0,he)+te[he]+Y.substr(he+1)}(F,K,j[V],I[V],_,D);Q===null&&W===null?R=V+1:(W===null||0<_(W,Q))&&(W=Q)}return $(W!==null?function(){M.continue(W+B)}:N),!1}),a}function ur(a,c,p,m){return{type:2,lower:a,upper:c,lowerOpen:p,upperOpen:m}}function Xh(a){return{type:1,lower:a,upper:a}}var Zh=(Object.defineProperty(rt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),rt.prototype.between=function(a,c,p,m){p=p!==!1,m=m===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(p||m)&&(!p||!m)?Oi(this):new this.Collection(this,function(){return ur(a,c,!p,!m)})}catch{return $t(this,Dn)}},rt.prototype.equals=function(a){return a==null?$t(this,Dn):new this.Collection(this,function(){return Xh(a)})},rt.prototype.above=function(a){return a==null?$t(this,Dn):new this.Collection(this,function(){return ur(a,void 0,!0)})},rt.prototype.aboveOrEqual=function(a){return a==null?$t(this,Dn):new this.Collection(this,function(){return ur(a,void 0,!1)})},rt.prototype.below=function(a){return a==null?$t(this,Dn):new this.Collection(this,function(){return ur(void 0,a,!1,!0)})},rt.prototype.belowOrEqual=function(a){return a==null?$t(this,Dn):new this.Collection(this,function(){return ur(void 0,a)})},rt.prototype.startsWith=function(a){return typeof a!="string"?$t(this,Kh):this.between(a,a+Vr,!0,!0)},rt.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):ja(this,function(c,p){return c.indexOf(p[0])===0},[a],Vr)},rt.prototype.equalsIgnoreCase=function(a){return ja(this,function(c,p){return c===p[0]},[a],"")},rt.prototype.anyOfIgnoreCase=function(){var a=ce.apply(ae,arguments);return a.length===0?Oi(this):ja(this,function(c,p){return p.indexOf(c)!==-1},a,"")},rt.prototype.startsWithAnyOfIgnoreCase=function(){var a=ce.apply(ae,arguments);return a.length===0?Oi(this):ja(this,function(c,p){return p.some(function(m){return c.indexOf(m)===0})},a,Vr)},rt.prototype.anyOf=function(){var a=this,c=ce.apply(ae,arguments),p=this._cmp;try{c.sort(p)}catch{return $t(this,Dn)}if(c.length===0)return Oi(this);var m=new this.Collection(this,function(){return ur(c[0],c[c.length-1])});m._ondirectionchange=function(x){p=x==="next"?a._ascending:a._descending,c.sort(p)};var v=0;return m._addAlgorithm(function(x,_,j){for(var I=x.key;0<p(I,c[v]);)if(++v===c.length)return _(j),!1;return p(I,c[v])===0||(_(function(){x.continue(c[v])}),!1)}),m},rt.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},rt.prototype.noneOf=function(){var a=ce.apply(ae,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return $t(this,Dn)}var c=a.reduce(function(p,m){return p?p.concat([[p[p.length-1][1],m]]):[[-1/0,m]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},rt.prototype.inAnyRange=function(F,c){var p=this,m=this._cmp,v=this._ascending,x=this._descending,_=this._min,j=this._max;if(F.length===0)return Oi(this);if(!F.every(function(K){return K[0]!==void 0&&K[1]!==void 0&&v(K[0],K[1])<=0}))return $t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",le.InvalidArgument);var I=!c||c.includeLowers!==!1,D=c&&c.includeUppers===!0,B,O=v;function L(K,W){return O(K[0],W[0])}try{(B=F.reduce(function(K,W){for(var V=0,Q=K.length;V<Q;++V){var Z=K[V];if(m(W[0],Z[1])<0&&0<m(W[1],Z[0])){Z[0]=_(Z[0],W[0]),Z[1]=j(Z[1],W[1]);break}}return V===Q&&K.push(W),K},[])).sort(L)}catch{return $t(this,Dn)}var R=0,M=D?function(K){return 0<v(K,B[R][1])}:function(K){return 0<=v(K,B[R][1])},$=I?function(K){return 0<x(K,B[R][0])}:function(K){return 0<=x(K,B[R][0])},N=M,F=new this.Collection(this,function(){return ur(B[0][0],B[B.length-1][1],!I,!D)});return F._ondirectionchange=function(K){O=K==="next"?(N=M,v):(N=$,x),B.sort(L)},F._addAlgorithm(function(K,W,V){for(var Q,Z=K.key;N(Z);)if(++R===B.length)return W(V),!1;return!M(Q=Z)&&!$(Q)||(p._cmp(Z,B[R][1])===0||p._cmp(Z,B[R][0])===0||W(function(){O===v?K.continue(B[R][0]):K.continue(B[R][1])}),!1)}),F},rt.prototype.startsWithAnyOf=function(){var a=ce.apply(ae,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?Oi(this):this.inAnyRange(a.map(function(c){return[c,c+Vr]})):$t(this,"startsWithAnyOf() only works with strings")},rt);function rt(){}function kn(a){return Ne(function(c){return Fo(c),a(c.target.error),!1})}function Fo(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Uo="storagemutated",hc="x-storagemutated-1",cr=zo(null,Uo),Kw=(En.prototype._lock=function(){return C(!se.global),++this._reculock,this._reculock!==1||se.global||(se.lockOwnerFor=this),this},En.prototype._unlock=function(){if(C(!se.global),--this._reculock==0)for(se.global||(se.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{qr(a[1],a[0])}catch{}}return this},En.prototype._locked=function(){return this._reculock&&se.lockOwnerFor!==this},En.prototype.create=function(a){var c=this;if(!this.mode)return this;var p=this.db.idbdb,m=this.db._state.dbOpenError;if(C(!this.idbtrans),!a&&!p)switch(m&&m.name){case"DatabaseClosedError":throw new le.DatabaseClosed(m);case"MissingAPIError":throw new le.MissingAPI(m.message,m);default:throw new le.OpenFailed(m)}if(!this.active)throw new le.TransactionInactive;return C(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||p).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ne(function(v){Fo(v),c._reject(a.error)}),a.onabort=Ne(function(v){Fo(v),c.active&&c._reject(new le.Abort(a.error)),c.active=!1,c.on("abort").fire(v)}),a.oncomplete=Ne(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&cr.storagemutated.fire(a.mutatedParts)}),this},En.prototype._promise=function(a,c,p){var m=this;if(a==="readwrite"&&this.mode!=="readwrite")return He(new le.ReadOnly("Transaction is readonly"));if(!this.active)return He(new le.TransactionInactive);if(this._locked())return new ne(function(x,_){m._blockedFuncs.push([function(){m._promise(a,c,p).then(x,_)},se])});if(p)return sr(function(){var x=new ne(function(_,j){m._lock();var I=c(_,j,m);I&&I.then&&I.then(_,j)});return x.finally(function(){return m._unlock()}),x._lib=!0,x});var v=new ne(function(x,_){var j=c(x,_,m);j&&j.then&&j.then(x,_)});return v._lib=!0,v},En.prototype._root=function(){return this.parent?this.parent._root():this},En.prototype.waitFor=function(a){var c,p=this._root(),m=ne.resolve(a);p._waitingFor?p._waitingFor=p._waitingFor.then(function(){return m}):(p._waitingFor=m,p._waitingQueue=[],c=p.idbtrans.objectStore(p.storeNames[0]),function x(){for(++p._spinCount;p._waitingQueue.length;)p._waitingQueue.shift()();p._waitingFor&&(c.get(-1/0).onsuccess=x)}());var v=p._waitingFor;return new ne(function(x,_){m.then(function(j){return p._waitingQueue.push(Ne(x.bind(null,j)))},function(j){return p._waitingQueue.push(Ne(_.bind(null,j)))}).finally(function(){p._waitingFor===v&&(p._waitingFor=null)})})},En.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new le.Abort))},En.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(y(c,a))return c[a];var p=this.schema[a];if(!p)throw new le.NotFound("Table "+a+" not part of transaction");return p=new this.db.Table(a,p,this),p.core=this.db.core.table(a),c[a]=p},En);function En(){}function mc(a,c,p,m,v,x,_){return{name:a,keyPath:c,unique:p,multi:m,auto:v,compound:x,src:(p&&!_?"&":"")+(m?"*":"")+(v?"++":"")+em(c)}}function em(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function yc(a,c,p){return{name:a,primKey:c,indexes:p,mappedClass:null,idxByName:(m=function(v){return[v.name,v]},p.reduce(function(v,x,_){return _=m(x,_),_&&(v[_[0]]=_[1]),v},{}))};var m}var Ko=function(a){try{return a.only([[]]),Ko=function(){return[[]]},[[]]}catch{return Ko=function(){return Vr},Vr}};function vc(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(p){return p[c]}:function(p){return z(p,c)}:function(p){return z(p,a)};var c}function tm(a){return[].slice.call(a)}var Ww=0;function Wo(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function qw(a,c,I){function m(N){if(N.type===3)return null;if(N.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=N.lower,M=N.upper,$=N.lowerOpen,N=N.upperOpen;return R===void 0?M===void 0?null:c.upperBound(M,!!N):M===void 0?c.lowerBound(R,!!$):c.bound(R,M,!!$,!!N)}function v(L){var R,M=L.name;return{name:M,schema:L,mutate:function($){var N=$.trans,F=$.type,K=$.keys,W=$.values,V=$.range;return new Promise(function(Q,Z){Q=Ne(Q);var G=N.objectStore(M),Y=G.keyPath==null,te=F==="put"||F==="add";if(!te&&F!=="delete"&&F!=="deleteRange")throw new Error("Invalid operation type: "+F);var J,re=(K||W||{length:1}).length;if(K&&W&&K.length!==W.length)throw new Error("Given keys array must have same length as given values array.");if(re===0)return Q({numFailures:0,failures:{},results:[],lastResult:void 0});function pe(Et){++Lt,Fo(Et)}var he=[],me=[],Lt=0;if(F==="deleteRange"){if(V.type===4)return Q({numFailures:Lt,failures:me,results:[],lastResult:void 0});V.type===3?he.push(J=G.clear()):he.push(J=G.delete(m(V)))}else{var Y=te?Y?[W,K]:[W,null]:[K,null],de=Y[0],yt=Y[1];if(te)for(var vt=0;vt<re;++vt)he.push(J=yt&&yt[vt]!==void 0?G[F](de[vt],yt[vt]):G[F](de[vt])),J.onerror=pe;else for(vt=0;vt<re;++vt)he.push(J=G[F](de[vt])),J.onerror=pe}function Fa(Et){Et=Et.target.result,he.forEach(function(Yr,Nc){return Yr.error!=null&&(me[Nc]=Yr.error)}),Q({numFailures:Lt,failures:me,results:F==="delete"?K:he.map(function(Yr){return Yr.result}),lastResult:Et})}J.onerror=function(Et){pe(Et),Fa(Et)},J.onsuccess=Fa})},getMany:function($){var N=$.trans,F=$.keys;return new Promise(function(K,W){K=Ne(K);for(var V,Q=N.objectStore(M),Z=F.length,G=new Array(Z),Y=0,te=0,J=function(he){he=he.target,G[he._pos]=he.result,++te===Y&&K(G)},re=kn(W),pe=0;pe<Z;++pe)F[pe]!=null&&((V=Q.get(F[pe]))._pos=pe,V.onsuccess=J,V.onerror=re,++Y);Y===0&&K(G)})},get:function($){var N=$.trans,F=$.key;return new Promise(function(K,W){K=Ne(K);var V=N.objectStore(M).get(F);V.onsuccess=function(Q){return K(Q.target.result)},V.onerror=kn(W)})},query:(R=D,function($){return new Promise(function(N,F){N=Ne(N);var K,W,V,Y=$.trans,Q=$.values,Z=$.limit,J=$.query,G=Z===1/0?void 0:Z,te=J.index,J=J.range,Y=Y.objectStore(M),te=te.isPrimaryKey?Y:Y.index(te.name),J=m(J);if(Z===0)return N({result:[]});R?((G=Q?te.getAll(J,G):te.getAllKeys(J,G)).onsuccess=function(re){return N({result:re.target.result})},G.onerror=kn(F)):(K=0,W=!Q&&"openKeyCursor"in te?te.openKeyCursor(J):te.openCursor(J),V=[],W.onsuccess=function(re){var pe=W.result;return pe?(V.push(Q?pe.value:pe.primaryKey),++K===Z?N({result:V}):void pe.continue()):N({result:V})},W.onerror=kn(F))})}),openCursor:function($){var N=$.trans,F=$.values,K=$.query,W=$.reverse,V=$.unique;return new Promise(function(Q,Z){Q=Ne(Q);var te=K.index,G=K.range,Y=N.objectStore(M),Y=te.isPrimaryKey?Y:Y.index(te.name),te=W?V?"prevunique":"prev":V?"nextunique":"next",J=!F&&"openKeyCursor"in Y?Y.openKeyCursor(m(G),te):Y.openCursor(m(G),te);J.onerror=kn(Z),J.onsuccess=Ne(function(re){var pe,he,me,Lt,de=J.result;de?(de.___id=++Ww,de.done=!1,pe=de.continue.bind(de),he=(he=de.continuePrimaryKey)&&he.bind(de),me=de.advance.bind(de),Lt=function(){throw new Error("Cursor not stopped")},de.trans=N,de.stop=de.continue=de.continuePrimaryKey=de.advance=function(){throw new Error("Cursor not started")},de.fail=Ne(Z),de.next=function(){var yt=this,vt=1;return this.start(function(){return vt--?yt.continue():yt.stop()}).then(function(){return yt})},de.start=function(yt){function vt(){if(J.result)try{yt()}catch(Et){de.fail(Et)}else de.done=!0,de.start=function(){throw new Error("Cursor behind last entry")},de.stop()}var Fa=new Promise(function(Et,Yr){Et=Ne(Et),J.onerror=kn(Yr),de.fail=Yr,de.stop=function(Nc){de.stop=de.continue=de.continuePrimaryKey=de.advance=Lt,Et(Nc)}});return J.onsuccess=Ne(function(Et){J.onsuccess=vt,vt()}),de.continue=pe,de.continuePrimaryKey=he,de.advance=me,vt(),Fa},Q(de)):Q(null)},Z)})},count:function($){var N=$.query,F=$.trans,K=N.index,W=N.range;return new Promise(function(V,Q){var Z=F.objectStore(M),G=K.isPrimaryKey?Z:Z.index(K.name),Z=m(W),G=Z?G.count(Z):G.count();G.onsuccess=Ne(function(Y){return V(Y.target.result)}),G.onerror=kn(Q)})}}}var x,_,j,B=(_=I,j=tm((x=a).objectStoreNames),{schema:{name:x.name,tables:j.map(function(L){return _.objectStore(L)}).map(function(L){var R=L.keyPath,N=L.autoIncrement,M=l(R),$={},N={name:L.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:R==null,compound:M,keyPath:R,autoIncrement:N,unique:!0,extractKey:vc(R)},indexes:tm(L.indexNames).map(function(F){return L.index(F)}).map(function(V){var K=V.name,W=V.unique,Q=V.multiEntry,V=V.keyPath,Q={name:K,compound:l(V),keyPath:V,unique:W,multiEntry:Q,extractKey:vc(V)};return $[Wo(V)]=Q}),getIndexByKeyPath:function(F){return $[Wo(F)]}};return $[":id"]=N.primaryKey,R!=null&&($[Wo(R)]=N.primaryKey),N})},hasGetAll:0<j.length&&"getAll"in _.objectStore(j[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),I=B.schema,D=B.hasGetAll,B=I.tables.map(v),O={};return B.forEach(function(L){return O[L.name]=L}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(L){if(!O[L])throw new Error("Table '".concat(L,"' not found"));return O[L]},MIN_KEY:-1/0,MAX_KEY:Ko(c),schema:I}}function Vw(a,c,p,m){var v=p.IDBKeyRange;return p.indexedDB,{dbcore:(m=qw(c,v,m),a.dbcore.reduce(function(x,_){return _=_.create,r(r({},x),_(x))},m))}}function Pa(a,m){var p=m.db,m=Vw(a._middlewares,p,a._deps,m);a.core=m.dbcore,a.tables.forEach(function(v){var x=v.name;a.core.schema.tables.some(function(_){return _.name===x})&&(v.core=a.core.table(x),a[x]instanceof a.Table&&(a[x].core=v.core))})}function Oa(a,c,p,m){p.forEach(function(v){var x=m[v];c.forEach(function(_){var j=function I(D,B){return A(D,B)||(D=f(D))&&I(D,B)}(_,v);(!j||"value"in j&&j.value===void 0)&&(_===a.Transaction.prototype||_ instanceof a.Transaction?E(_,v,{get:function(){return this.table(v)},set:function(I){S(this,v,{value:I,writable:!0,configurable:!0,enumerable:!0})}}):_[v]=new a.Table(v,x))})})}function gc(a,c){c.forEach(function(p){for(var m in p)p[m]instanceof a.Table&&delete p[m]})}function Hw(a,c){return a._cfg.version-c._cfg.version}function Qw(a,c,p,m){var v=a._dbSchema;p.objectStoreNames.contains("$meta")&&!v.$meta&&(v.$meta=yc("$meta",rm("")[0],[]),a._storeNames.push("$meta"));var x=a._createTransaction("readwrite",a._storeNames,v);x.create(p),x._completion.catch(m);var _=x._reject.bind(x),j=se.transless||se;sr(function(){return se.trans=x,se.transless=j,c!==0?(Pa(a,p),D=c,((I=x).storeNames.includes("$meta")?I.table("$meta").get("version").then(function(B){return B??D}):ne.resolve(D)).then(function(B){return L=B,R=x,M=p,$=[],B=(O=a)._versions,N=O._dbSchema=Ra(0,O.idbdb,M),(B=B.filter(function(F){return F._cfg.version>=L})).length!==0?(B.forEach(function(F){$.push(function(){var K=N,W=F._cfg.dbschema;Da(O,K,M),Da(O,W,M),N=O._dbSchema=W;var V=xc(K,W);V.add.forEach(function(te){Sc(M,te[0],te[1].primKey,te[1].indexes)}),V.change.forEach(function(te){if(te.recreate)throw new le.Upgrade("Not yet support for changing primary key");var J=M.objectStore(te.name);te.add.forEach(function(re){return Ia(J,re)}),te.change.forEach(function(re){J.deleteIndex(re.name),Ia(J,re)}),te.del.forEach(function(re){return J.deleteIndex(re)})});var Q=F._cfg.contentUpgrade;if(Q&&F._cfg.version>L){Pa(O,M),R._memoizedTables={};var Z=q(W);V.del.forEach(function(te){Z[te]=K[te]}),gc(O,[O.Transaction.prototype]),Oa(O,[O.Transaction.prototype],s(Z),Z),R.schema=Z;var G,Y=we(Q);return Y&&Ti(),V=ne.follow(function(){var te;(G=Q(R))&&Y&&(te=ar.bind(null,null),G.then(te,te))}),G&&typeof G.then=="function"?ne.resolve(G):V.then(function(){return G})}}),$.push(function(K){var W,V,Q=F._cfg.dbschema;W=Q,V=K,[].slice.call(V.db.objectStoreNames).forEach(function(Z){return W[Z]==null&&V.db.deleteObjectStore(Z)}),gc(O,[O.Transaction.prototype]),Oa(O,[O.Transaction.prototype],O._storeNames,O._dbSchema),R.schema=O._dbSchema}),$.push(function(K){O.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(O.idbdb.version/10)===F._cfg.version?(O.idbdb.deleteObjectStore("$meta"),delete O._dbSchema.$meta,O._storeNames=O._storeNames.filter(function(W){return W!=="$meta"})):K.objectStore("$meta").put(F._cfg.version,"version"))})}),function F(){return $.length?ne.resolve($.shift()(R.idbtrans)).then(F):ne.resolve()}().then(function(){nm(N,M)})):ne.resolve();var O,L,R,M,$,N}).catch(_)):(s(v).forEach(function(B){Sc(p,B,v[B].primKey,v[B].indexes)}),Pa(a,p),void ne.follow(function(){return a.on.populate.fire(x)}).catch(_));var I,D})}function Gw(a,c){nm(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var p=Ra(0,a.idbdb,c);Da(a,a._dbSchema,c);for(var m=0,v=xc(p,a._dbSchema).change;m<v.length;m++){var x=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var j=c.objectStore(_.name);_.add.forEach(function(I){_n&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(I.src)),Ia(j,I)})}(v[m]);if(typeof x=="object")return x.value}}function xc(a,c){var p,m={del:[],add:[],change:[]};for(p in a)c[p]||m.del.push(p);for(p in c){var v=a[p],x=c[p];if(v){var _={name:p,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(v.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||v.primKey.auto!==x.primKey.auto)_.recreate=!0,m.change.push(_);else{var j=v.idxByName,I=x.idxByName,D=void 0;for(D in j)I[D]||_.del.push(D);for(D in I){var B=j[D],O=I[D];B?B.src!==O.src&&_.change.push(O):_.add.push(O)}(0<_.del.length||0<_.add.length||0<_.change.length)&&m.change.push(_)}}else m.add.push([p,x])}return m}function Sc(a,c,p,m){var v=a.db.createObjectStore(c,p.keyPath?{keyPath:p.keyPath,autoIncrement:p.auto}:{autoIncrement:p.auto});return m.forEach(function(x){return Ia(v,x)}),v}function nm(a,c){s(a).forEach(function(p){c.db.objectStoreNames.contains(p)||(_n&&console.debug("Dexie: Creating missing table",p),Sc(c,p,a[p].primKey,a[p].indexes))})}function Ia(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function Ra(a,c,p){var m={};return b(c.objectStoreNames,0).forEach(function(v){for(var x=p.objectStore(v),_=mc(em(D=x.keyPath),D||"",!0,!1,!!x.autoIncrement,D&&typeof D!="string",!0),j=[],I=0;I<x.indexNames.length;++I){var B=x.index(x.indexNames[I]),D=B.keyPath,B=mc(B.name,D,!!B.unique,!!B.multiEntry,!1,D&&typeof D!="string",!1);j.push(B)}m[v]=yc(v,_,j)}),m}function Da(a,c,p){for(var m=p.db.objectStoreNames,v=0;v<m.length;++v){var x=m[v],_=p.objectStore(x);a._hasGetAll="getAll"in _;for(var j=0;j<_.indexNames.length;++j){var I=_.indexNames[j],D=_.index(I).keyPath,B=typeof D=="string"?D:"["+b(D).join("+")+"]";!c[x]||(D=c[x].idxByName[B])&&(D.name=I,delete c[x].idxByName[B],c[x].idxByName[I]=D)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function rm(a){return a.split(",").map(function(c,p){var m=(c=c.trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return mc(m,v||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(v),p===0)})}var Yw=(Aa.prototype._parseStoresSpec=function(a,c){s(a).forEach(function(p){if(a[p]!==null){var m=rm(a[p]),v=m.shift();if(v.unique=!0,v.multi)throw new le.Schema("Primary key cannot be multi-valued");m.forEach(function(x){if(x.auto)throw new le.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new le.Schema("Index must have a name and cannot be an empty string")}),c[p]=yc(p,v,m)}})},Aa.prototype.stores=function(p){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,p):p;var p=c._versions,m={},v={};return p.forEach(function(x){u(m,x._cfg.storesSource),v=x._cfg.dbschema={},x._parseStoresSpec(m,v)}),c._dbSchema=v,gc(c,[c._allTables,c,c.Transaction.prototype]),Oa(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],s(v),v),c._storeNames=s(v),this},Aa.prototype.upgrade=function(a){return this._cfg.contentUpgrade=ec(this._cfg.contentUpgrade||Te,a),this},Aa);function Aa(){}function wc(a,c){var p=a._dbNamesDB;return p||(p=a._dbNamesDB=new Nn(ka,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),p.table("dbnames")}function bc(a){return a&&typeof a.databases=="function"}function _c(a){return sr(function(){return se.letThrough=!0,a()})}function kc(a){return!("from"in a)}var mt=function(a,c){if(!this){var p=new mt;return a&&"d"in a&&u(p,a),p}u(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function qo(a,c,p){var m=ve(c,p);if(!isNaN(m)){if(0<m)throw RangeError();if(kc(a))return u(a,{from:c,to:p,d:1});var v=a.l,m=a.r;if(ve(p,a.from)<0)return v?qo(v,c,p):a.l={from:c,to:p,d:1,l:null,r:null},om(a);if(0<ve(c,a.to))return m?qo(m,c,p):a.r={from:c,to:p,d:1,l:null,r:null},om(a);ve(c,a.from)<0&&(a.from=c,a.l=null,a.d=m?m.d+1:1),0<ve(p,a.to)&&(a.to=p,a.r=null,a.d=a.l?a.l.d+1:1),p=!a.r,v&&!a.l&&Vo(a,v),m&&p&&Vo(a,m)}}function Vo(a,c){kc(c)||function p(m,I){var x=I.from,_=I.to,j=I.l,I=I.r;qo(m,x,_),j&&p(m,j),I&&p(m,I)}(a,c)}function im(a,c){var p=Na(c),m=p.next();if(m.done)return!1;for(var v=m.value,x=Na(a),_=x.next(v.from),j=_.value;!m.done&&!_.done;){if(ve(j.from,v.to)<=0&&0<=ve(j.to,v.from))return!0;ve(v.from,j.from)<0?v=(m=p.next(j.from)).value:j=(_=x.next(v.from)).value}return!1}function Na(a){var c=kc(a)?null:{s:0,n:a};return{next:function(p){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&ve(p,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||ve(p,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function om(a){var c,p,m=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((p=a.l)===null||p===void 0?void 0:p.d)||0),v=1<m?"r":m<-1?"l":"";v&&(c=v=="r"?"l":"r",p=r({},a),m=a[v],a.from=m.from,a.to=m.to,a[v]=m[v],p[v]=m[c],(a[c]=p).d=sm(p)),a.d=sm(a)}function sm(p){var c=p.r,p=p.l;return(c?p?Math.max(c.d,p.d):c.d:p?p.d:0)+1}function Ma(a,c){return s(c).forEach(function(p){a[p]?Vo(a[p],c[p]):a[p]=function m(v){var x,_,j={};for(x in v)y(v,x)&&(_=v[x],j[x]=!_||typeof _!="object"||Ce.has(_.constructor)?_:m(_));return j}(c[p])}),a}function Ec(a,c){return a.all||c.all||Object.keys(a).some(function(p){return c[p]&&im(c[p],a[p])})}g(mt.prototype,((Zt={add:function(a){return Vo(this,a),this},addKey:function(a){return qo(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(p){return qo(c,p,p)}),this},hasKey:function(a){var c=Na(this).next(a).value;return c&&ve(c.from,a)<=0&&0<=ve(c.to,a)}})[Rn]=function(){return Na(this)},Zt));var Qr={},Cc={},Tc=!1;function Ba(a){Ma(Cc,a),Tc||(Tc=!0,setTimeout(function(){Tc=!1,jc(Cc,!(Cc={}))},0))}function jc(a,c){c===void 0&&(c=!1);var p=new Set;if(a.all)for(var m=0,v=Object.values(Qr);m<v.length;m++)am(_=v[m],a,p,c);else for(var x in a){var _,j=/^idb\:\/\/(.*)\/(.*)\//.exec(x);j&&(x=j[1],j=j[2],(_=Qr["idb://".concat(x,"/").concat(j)])&&am(_,a,p,c))}p.forEach(function(I){return I()})}function am(a,c,p,m){for(var v=[],x=0,_=Object.entries(a.queries.query);x<_.length;x++){for(var j=_[x],I=j[0],D=[],B=0,O=j[1];B<O.length;B++){var L=O[B];Ec(c,L.obsSet)?L.subscribers.forEach(function(N){return p.add(N)}):m&&D.push(L)}m&&v.push([I,D])}if(m)for(var R=0,M=v;R<M.length;R++){var $=M[R],I=$[0],D=$[1];a.queries.query[I]=D}}function Jw(a){var c=a._state,p=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?He(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,v=Math.round(10*a.verno),x=!1;function _(){if(c.openCanceller!==m)throw new le.DatabaseClosed("db.open() was cancelled")}function j(){return new ne(function(L,R){if(_(),!p)throw new le.MissingAPI;var M=a.name,$=c.autoSchema||!v?p.open(M):p.open(M,v);if(!$)throw new le.MissingAPI;$.onerror=kn(R),$.onblocked=Ne(a._fireOnBlocked),$.onupgradeneeded=Ne(function(N){var F;B=$.transaction,c.autoSchema&&!a._options.allowEmptyDB?($.onerror=Fo,B.abort(),$.result.close(),(F=p.deleteDatabase(M)).onsuccess=F.onerror=Ne(function(){R(new le.NoSuchDatabase("Database ".concat(M," doesnt exist")))})):(B.onerror=kn(R),N=N.oldVersion>Math.pow(2,62)?0:N.oldVersion,O=N<1,a.idbdb=$.result,x&&Gw(a,B),Qw(a,N/10,B,R))},R),$.onsuccess=Ne(function(){B=null;var N,F,K,W,V,Q=a.idbdb=$.result,Z=b(Q.objectStoreNames);if(0<Z.length)try{var G=Q.transaction((W=Z).length===1?W[0]:W,"readonly");if(c.autoSchema)F=Q,K=G,(N=a).verno=F.version/10,K=N._dbSchema=Ra(0,F,K),N._storeNames=b(F.objectStoreNames,0),Oa(N,[N._allTables],s(K),K);else if(Da(a,a._dbSchema,G),((V=xc(Ra(0,(V=a).idbdb,G),V._dbSchema)).add.length||V.change.some(function(Y){return Y.add.length||Y.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Q.close(),v=Q.version+1,x=!0,L(j());Pa(a,G)}catch{}ji.push(a),Q.onversionchange=Ne(function(Y){c.vcFired=!0,a.on("versionchange").fire(Y)}),Q.onclose=Ne(function(Y){a.on("close").fire(Y)}),O&&(V=a._deps,G=M,Q=V.indexedDB,V=V.IDBKeyRange,bc(Q)||G===ka||wc(Q,V).put({name:G}).catch(Te)),L()},R)}).catch(function(L){switch(L==null?void 0:L.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),j();break;case"VersionError":if(0<v)return v=0,j()}return ne.reject(L)})}var I,D=c.dbReadyResolve,B=null,O=!1;return ne.race([m,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(L){function R(){return indexedDB.databases().finally(L)}I=setInterval(R,100),R()}).finally(function(){return clearInterval(I)}):Promise.resolve()).then(j)]).then(function(){return _(),c.onReadyBeingFired=[],ne.resolve(_c(function(){return a.on.ready.fire(a.vip)})).then(function L(){if(0<c.onReadyBeingFired.length){var R=c.onReadyBeingFired.reduce(ec,Te);return c.onReadyBeingFired=[],ne.resolve(_c(function(){return R(a.vip)})).then(L)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(L){c.dbOpenError=L;try{B&&B.abort()}catch{}return m===c.openCanceller&&a._close(),He(L)}).finally(function(){c.openComplete=!0,D()}).then(function(){var L;return O&&(L={},a.tables.forEach(function(R){R.schema.indexes.forEach(function(M){M.name&&(L["idb://".concat(a.name,"/").concat(R.name,"/").concat(M.name)]=new mt(-1/0,[[[]]]))}),L["idb://".concat(a.name,"/").concat(R.name,"/")]=L["idb://".concat(a.name,"/").concat(R.name,"/:dels")]=new mt(-1/0,[[[]]])}),cr(Uo).fire(L),jc(L,!0)),a})}function Pc(a){function c(x){return a.next(x)}var p=v(c),m=v(function(x){return a.throw(x)});function v(x){return function(I){var j=x(I),I=j.value;return j.done?I:I&&typeof I.then=="function"?I.then(p,m):l(I)?Promise.all(I).then(p,m):p(I)}}return v(c)()}function za(a,c,p){for(var m=l(a)?a.slice():[a],v=0;v<p;++v)m.push(c);return m}var Xw={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(c){var p=a.table(c),m=p.schema,v={},x=[];function _(O,L,R){var M=Wo(O),$=v[M]=v[M]||[],N=O==null?0:typeof O=="string"?1:O.length,F=0<L,F=r(r({},R),{name:F?"".concat(M,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:F,keyTail:L,keyLength:N,extractKey:vc(O),unique:!F&&R.unique});return $.push(F),F.isPrimaryKey||x.push(F),1<N&&_(N===2?O[0]:O.slice(0,N-1),L+1,R),$.sort(function(K,W){return K.keyTail-W.keyTail}),F}c=_(m.primaryKey.keyPath,0,m.primaryKey),v[":id"]=[c];for(var j=0,I=m.indexes;j<I.length;j++){var D=I[j];_(D.keyPath,0,D)}function B(O){var L,R=O.query.index;return R.isVirtual?r(r({},O),{query:{index:R.lowLevelIndex,range:(L=O.query.range,R=R.keyTail,{type:L.type===1?2:L.type,lower:za(L.lower,L.lowerOpen?a.MAX_KEY:a.MIN_KEY,R),lowerOpen:!0,upper:za(L.upper,L.upperOpen?a.MIN_KEY:a.MAX_KEY,R),upperOpen:!0})}}):O}return r(r({},p),{schema:r(r({},m),{primaryKey:c,indexes:x,getIndexByKeyPath:function(O){return(O=v[Wo(O)])&&O[0]}}),count:function(O){return p.count(B(O))},query:function(O){return p.query(B(O))},openCursor:function(O){var L=O.query.index,R=L.keyTail,M=L.isVirtual,$=L.keyLength;return M?p.openCursor(B(O)).then(function(F){return F&&N(F)}):p.openCursor(O);function N(F){return Object.create(F,{continue:{value:function(K){K!=null?F.continue(za(K,O.reverse?a.MAX_KEY:a.MIN_KEY,R)):O.unique?F.continue(F.key.slice(0,$).concat(O.reverse?a.MIN_KEY:a.MAX_KEY,R)):F.continue()}},continuePrimaryKey:{value:function(K,W){F.continuePrimaryKey(za(K,a.MAX_KEY,R),W)}},primaryKey:{get:function(){return F.primaryKey}},key:{get:function(){var K=F.key;return $===1?K[0]:K.slice(0,$)}},value:{get:function(){return F.value}}})}}})}})}};function Oc(a,c,p,m){return p=p||{},m=m||"",s(a).forEach(function(v){var x,_,j;y(c,v)?(x=a[v],_=c[v],typeof x=="object"&&typeof _=="object"&&x&&_?(j=kt(x))!==kt(_)?p[m+v]=c[v]:j==="Object"?Oc(x,_,p,m+v+"."):x!==_&&(p[m+v]=c[v]):x!==_&&(p[m+v]=c[v])):p[m+v]=void 0}),s(c).forEach(function(v){y(a,v)||(p[m+v]=c[v])}),p}function Ic(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var Zw={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(c){var p=a.table(c),m=p.schema.primaryKey;return r(r({},p),{mutate:function(v){var x=se.trans,_=x.table(c).hook,j=_.deleting,I=_.creating,D=_.updating;switch(v.type){case"add":if(I.fire===Te)break;return x._promise("readwrite",function(){return B(v)},!0);case"put":if(I.fire===Te&&D.fire===Te)break;return x._promise("readwrite",function(){return B(v)},!0);case"delete":if(j.fire===Te)break;return x._promise("readwrite",function(){return B(v)},!0);case"deleteRange":if(j.fire===Te)break;return x._promise("readwrite",function(){return function O(L,R,M){return p.query({trans:L,values:!1,query:{index:m,range:R},limit:M}).then(function($){var N=$.result;return B({type:"delete",keys:N,trans:L}).then(function(F){return 0<F.numFailures?Promise.reject(F.failures[0]):N.length<M?{failures:[],numFailures:0,lastResult:void 0}:O(L,r(r({},R),{lower:N[N.length-1],lowerOpen:!0}),M)})})}(v.trans,v.range,1e4)},!0)}return p.mutate(v);function B(O){var L,R,M,$=se.trans,N=O.keys||Ic(m,O);if(!N)throw new Error("Keys missing");return(O=O.type==="add"||O.type==="put"?r(r({},O),{keys:N}):r({},O)).type!=="delete"&&(O.values=i([],O.values)),O.keys&&(O.keys=i([],O.keys)),L=p,M=N,((R=O).type==="add"?Promise.resolve([]):L.getMany({trans:R.trans,keys:M,cache:"immutable"})).then(function(F){var K=N.map(function(W,V){var Q,Z,G,Y=F[V],te={onerror:null,onsuccess:null};return O.type==="delete"?j.fire.call(te,W,Y,$):O.type==="add"||Y===void 0?(Q=I.fire.call(te,W,O.values[V],$),W==null&&Q!=null&&(O.keys[V]=W=Q,m.outbound||U(O.values[V],m.keyPath,W))):(Q=Oc(Y,O.values[V]),(Z=D.fire.call(te,Q,W,Y,$))&&(G=O.values[V],Object.keys(Z).forEach(function(J){y(G,J)?G[J]=Z[J]:U(G,J,Z[J])}))),te});return p.mutate(O).then(function(W){for(var V=W.failures,Q=W.results,Z=W.numFailures,W=W.lastResult,G=0;G<N.length;++G){var Y=(Q||N)[G],te=K[G];Y==null?te.onerror&&te.onerror(V[G]):te.onsuccess&&te.onsuccess(O.type==="put"&&F[G]?O.values[G]:Y)}return{failures:V,results:Q,numFailures:Z,lastResult:W}}).catch(function(W){return K.forEach(function(V){return V.onerror&&V.onerror(W)}),Promise.reject(W)})})}}})}})}};function lm(a,c,p){try{if(!c||c.keys.length<a.length)return null;for(var m=[],v=0,x=0;v<c.keys.length&&x<a.length;++v)ve(c.keys[v],a[x])===0&&(m.push(p?ke(c.values[v]):c.values[v]),++x);return m.length===a.length?m:null}catch{return null}}var eb={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var p=a.table(c);return r(r({},p),{getMany:function(m){if(!m.cache)return p.getMany(m);var v=lm(m.keys,m.trans._cache,m.cache==="clone");return v?ne.resolve(v):p.getMany(m).then(function(x){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?ke(x):x},x})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),p.mutate(m)}})}}}};function um(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function cm(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var tb={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,p=new mt(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(m,v,x){if(se.subscr&&v!=="readonly")throw new le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(se.querier));return a.transaction(m,v,x)},table:function(m){var v=a.table(m),x=v.schema,_=x.primaryKey,O=x.indexes,j=_.extractKey,I=_.outbound,D=_.autoIncrement&&O.filter(function(R){return R.compound&&R.keyPath.includes(_.keyPath)}),B=r(r({},v),{mutate:function(R){function M(J){return J="idb://".concat(c,"/").concat(m,"/").concat(J),W[J]||(W[J]=new mt)}var $,N,F,K=R.trans,W=R.mutatedParts||(R.mutatedParts={}),V=M(""),Q=M(":dels"),Z=R.type,te=R.type==="deleteRange"?[R.range]:R.type==="delete"?[R.keys]:R.values.length<50?[Ic(_,R).filter(function(J){return J}),R.values]:[],G=te[0],Y=te[1],te=R.trans._cache;return l(G)?(V.addKeys(G),(te=Z==="delete"||G.length===Y.length?lm(G,te):null)||Q.addKeys(G),(te||Y)&&($=M,N=te,F=Y,x.indexes.forEach(function(J){var re=$(J.name||"");function pe(me){return me!=null?J.extractKey(me):null}function he(me){return J.multiEntry&&l(me)?me.forEach(function(Lt){return re.addKey(Lt)}):re.addKey(me)}(N||F).forEach(function(me,yt){var de=N&&pe(N[yt]),yt=F&&pe(F[yt]);ve(de,yt)!==0&&(de!=null&&he(de),yt!=null&&he(yt))})}))):G?(Y={from:(Y=G.lower)!==null&&Y!==void 0?Y:a.MIN_KEY,to:(Y=G.upper)!==null&&Y!==void 0?Y:a.MAX_KEY},Q.add(Y),V.add(Y)):(V.add(p),Q.add(p),x.indexes.forEach(function(J){return M(J.name).add(p)})),v.mutate(R).then(function(J){return!G||R.type!=="add"&&R.type!=="put"||(V.addKeys(J.results),D&&D.forEach(function(re){for(var pe=R.values.map(function(de){return re.extractKey(de)}),he=re.keyPath.findIndex(function(de){return de===_.keyPath}),me=0,Lt=J.results.length;me<Lt;++me)pe[me][he]=J.results[me];M(re.name).addKeys(pe)})),K.mutatedParts=Ma(K.mutatedParts||{},W),J})}}),O=function(M){var $=M.query,M=$.index,$=$.range;return[M,new mt((M=$.lower)!==null&&M!==void 0?M:a.MIN_KEY,($=$.upper)!==null&&$!==void 0?$:a.MAX_KEY)]},L={get:function(R){return[_,new mt(R.key)]},getMany:function(R){return[_,new mt().addKeys(R.keys)]},count:O,query:O,openCursor:O};return s(L).forEach(function(R){B[R]=function(M){var $=se.subscr,N=!!$,F=um(se,v)&&cm(R,M)?M.obsSet={}:$;if(N){var K=function(Y){return Y="idb://".concat(c,"/").concat(m,"/").concat(Y),F[Y]||(F[Y]=new mt)},W=K(""),V=K(":dels"),$=L[R](M),N=$[0],$=$[1];if((R==="query"&&N.isPrimaryKey&&!M.values?V:K(N.name||"")).add($),!N.isPrimaryKey){if(R!=="count"){var Q=R==="query"&&I&&M.values&&v.query(r(r({},M),{values:!1}));return v[R].apply(this,arguments).then(function(Y){if(R==="query"){if(I&&M.values)return Q.then(function(pe){return pe=pe.result,W.addKeys(pe),Y});var te=M.values?Y.result.map(j):Y.result;(M.values?W:V).addKeys(te)}else if(R==="openCursor"){var J=Y,re=M.values;return J&&Object.create(J,{key:{get:function(){return V.addKey(J.primaryKey),J.key}},primaryKey:{get:function(){var pe=J.primaryKey;return V.addKey(pe),pe}},value:{get:function(){return re&&W.addKey(J.primaryKey),J.value}}})}return Y})}V.add(p)}}return v[R].apply(this,arguments)}}),B}})}};function fm(a,c,p){if(p.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return p.numFailures===m?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(v,x){return!(x in p.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(v,x){return!(x in p.failures)})),c)}function Rc(a,c){return p=a,((m=c).lower===void 0||(m.lowerOpen?0<ve(p,m.lower):0<=ve(p,m.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?ve(a,c.upper)<0:ve(a,c.upper)<=0));var p,m}function dm(a,c,L,m,v,x){if(!L||L.length===0)return a;var _=c.query.index,j=_.multiEntry,I=c.query.range,D=m.schema.primaryKey.extractKey,B=_.extractKey,O=(_.lowLevelIndex||_).extractKey,L=L.reduce(function(R,M){var $=R,N=[];if(M.type==="add"||M.type==="put")for(var F=new mt,K=M.values.length-1;0<=K;--K){var W,V=M.values[K],Q=D(V);F.hasKey(Q)||(W=B(V),(j&&l(W)?W.some(function(J){return Rc(J,I)}):Rc(W,I))&&(F.addKey(Q),N.push(V)))}switch(M.type){case"add":var Z=new mt().addKeys(c.values?R.map(function(re){return D(re)}):R),$=R.concat(c.values?N.filter(function(re){return re=D(re),!Z.hasKey(re)&&(Z.addKey(re),!0)}):N.map(function(re){return D(re)}).filter(function(re){return!Z.hasKey(re)&&(Z.addKey(re),!0)}));break;case"put":var G=new mt().addKeys(M.values.map(function(re){return D(re)}));$=R.filter(function(re){return!G.hasKey(c.values?D(re):re)}).concat(c.values?N:N.map(function(re){return D(re)}));break;case"delete":var Y=new mt().addKeys(M.keys);$=R.filter(function(re){return!Y.hasKey(c.values?D(re):re)});break;case"deleteRange":var te=M.range;$=R.filter(function(re){return!Rc(D(re),te)})}return $},a);return L===a?a:(L.sort(function(R,M){return ve(O(R),O(M))||ve(D(R),D(M))}),c.limit&&c.limit<1/0&&(L.length>c.limit?L.length=c.limit:a.length===c.limit&&L.length<c.limit&&(v.dirty=!0)),x?Object.freeze(L):L)}function pm(a,c){return ve(a.lower,c.lower)===0&&ve(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function nb(a,c){return function(p,m,v,x){if(p===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=ve(p,m))===0){if(v&&x)return 0;if(v)return 1;if(x)return-1}return m}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(p,m,v,x){if(p===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=ve(p,m))===0){if(v&&x)return 0;if(v)return-1;if(x)return 1}return m}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function rb(a,c,p,m){a.subscribers.add(p),m.addEventListener("abort",function(){var v,x;a.subscribers.delete(p),a.subscribers.size===0&&(v=a,x=c,setTimeout(function(){v.subscribers.size===0&&ee(x,v)},3e3))})}var ib={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return r(r({},a),{transaction:function(p,m,v){var x,_,j=a.transaction(p,m,v);return m==="readwrite"&&(_=(x=new AbortController).signal,v=function(I){return function(){if(x.abort(),m==="readwrite"){for(var D=new Set,B=0,O=p;B<O.length;B++){var L=O[B],R=Qr["idb://".concat(c,"/").concat(L)];if(R){var M=a.table(L),$=R.optimisticOps.filter(function(re){return re.trans===j});if(j._explicit&&I&&j.mutatedParts)for(var N=0,F=Object.values(R.queries.query);N<F.length;N++)for(var K=0,W=(Z=F[N]).slice();K<W.length;K++)Ec((G=W[K]).obsSet,j.mutatedParts)&&(ee(Z,G),G.subscribers.forEach(function(re){return D.add(re)}));else if(0<$.length){R.optimisticOps=R.optimisticOps.filter(function(re){return re.trans!==j});for(var V=0,Q=Object.values(R.queries.query);V<Q.length;V++)for(var Z,G,Y,te=0,J=(Z=Q[V]).slice();te<J.length;te++)(G=J[te]).res!=null&&j.mutatedParts&&(I&&!G.dirty?(Y=Object.isFrozen(G.res),Y=dm(G.res,G.req,$,M,G,Y),G.dirty?(ee(Z,G),G.subscribers.forEach(function(re){return D.add(re)})):Y!==G.res&&(G.res=Y,G.promise=ne.resolve({result:Y}))):(G.dirty&&ee(Z,G),G.subscribers.forEach(function(re){return D.add(re)})))}}}D.forEach(function(re){return re()})}}},j.addEventListener("abort",v(!1),{signal:_}),j.addEventListener("error",v(!1),{signal:_}),j.addEventListener("complete",v(!0),{signal:_})),j},table:function(p){var m=a.table(p),v=m.schema.primaryKey;return r(r({},m),{mutate:function(x){var _=se.trans;if(v.outbound||_.db._options.cache==="disabled"||_.explicit||_.idbtrans.mode!=="readwrite")return m.mutate(x);var j=Qr["idb://".concat(c,"/").concat(p)];return j?(_=m.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Ic(v,x).some(function(I){return I==null}))?(j.optimisticOps.push(x),x.mutatedParts&&Ba(x.mutatedParts),_.then(function(I){0<I.numFailures&&(ee(j.optimisticOps,x),(I=fm(0,x,I))&&j.optimisticOps.push(I),x.mutatedParts&&Ba(x.mutatedParts))}),_.catch(function(){ee(j.optimisticOps,x),x.mutatedParts&&Ba(x.mutatedParts)})):_.then(function(I){var D=fm(0,r(r({},x),{values:x.values.map(function(B,O){var L;return I.failures[O]?B:(B=(L=v.keyPath)!==null&&L!==void 0&&L.includes(".")?ke(B):r({},B),U(B,v.keyPath,I.results[O]),B)})}),I);j.optimisticOps.push(D),queueMicrotask(function(){return x.mutatedParts&&Ba(x.mutatedParts)})}),_):m.mutate(x)},query:function(x){if(!um(se,m)||!cm("query",x))return m.query(x);var _=((D=se.trans)===null||D===void 0?void 0:D.db._options.cache)==="immutable",O=se,j=O.requery,I=O.signal,D=function(M,$,N,F){var K=Qr["idb://".concat(M,"/").concat($)];if(!K)return[];if(!($=K.queries[N]))return[null,!1,K,null];var W=$[(F.query?F.query.index.name:null)||""];if(!W)return[null,!1,K,null];switch(N){case"query":var V=W.find(function(Q){return Q.req.limit===F.limit&&Q.req.values===F.values&&pm(Q.req.query.range,F.query.range)});return V?[V,!0,K,W]:[W.find(function(Q){return("limit"in Q.req?Q.req.limit:1/0)>=F.limit&&(!F.values||Q.req.values)&&nb(Q.req.query.range,F.query.range)}),!1,K,W];case"count":return V=W.find(function(Q){return pm(Q.req.query.range,F.query.range)}),[V,!!V,K,W]}}(c,p,"query",x),B=D[0],O=D[1],L=D[2],R=D[3];return B&&O?B.obsSet=x.obsSet:(O=m.query(x).then(function(M){var $=M.result;if(B&&(B.res=$),_){for(var N=0,F=$.length;N<F;++N)Object.freeze($[N]);Object.freeze($)}else M.result=ke($);return M}).catch(function(M){return R&&B&&ee(R,B),Promise.reject(M)}),B={obsSet:x.obsSet,promise:O,subscribers:new Set,type:"query",req:x,dirty:!1},R?R.push(B):(R=[B],(L=L||(Qr["idb://".concat(c,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=R)),rb(B,R,j,I),B.promise.then(function(M){return{result:dm(M.result,x,L==null?void 0:L.optimisticOps,m,B,_)}})}})}})}};function $a(a,c){return new Proxy(a,{get:function(p,m,v){return m==="db"?c:Reflect.get(p,m,v)}})}var Nn=(Qe.prototype.version=function(a){if(isNaN(a)||a<.1)throw new le.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,p=c.filter(function(m){return m._cfg.version===a})[0];return p||(p=new this.Version(a),c.push(p),c.sort(Hw),p.stores({}),this._state.autoSchema=!1,p)},Qe.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||se.letThrough||this._vip)?a():new ne(function(p,m){if(c._state.openComplete)return m(new le.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new le.DatabaseClosed);c.open().catch(Te)}c._state.dbReadyPromise.then(p,m)}).then(a)},Qe.prototype.use=function(a){var c=a.stack,p=a.create,m=a.level,v=a.name;return v&&this.unuse({stack:c,name:v}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:p,level:m??10,name:v}),a.sort(function(x,_){return x.level-_.level}),this},Qe.prototype.unuse=function(a){var c=a.stack,p=a.name,m=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(v){return m?v.create!==m:!!p&&v.name!==p})),this},Qe.prototype.open=function(){var a=this;return qr(or,function(){return Jw(a)})},Qe.prototype._close=function(){var a=this._state,c=ji.indexOf(this);if(0<=c&&ji.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new ne(function(p){a.dbReadyResolve=p}),a.openCanceller=new ne(function(p,m){a.cancelOpen=m}))},Qe.prototype.close=function(p){var c=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,p=this._state;c?(p.isBeingOpened&&p.cancelOpen(new le.DatabaseClosed),this._close(),p.autoOpen=!1,p.dbOpenError=new le.DatabaseClosed):(this._close(),p.autoOpen=this._options.autoOpen||p.isBeingOpened,p.openComplete=!1,p.dbOpenError=null)},Qe.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var p=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new ne(function(v,x){function _(){c.close(a);var j=c._deps.indexedDB.deleteDatabase(c.name);j.onsuccess=Ne(function(){var I,D,B;I=c._deps,D=c.name,B=I.indexedDB,I=I.IDBKeyRange,bc(B)||D===ka||wc(B,I).delete(D).catch(Te),v()}),j.onerror=kn(x),j.onblocked=c._fireOnBlocked}if(p)throw new le.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(_):_()})},Qe.prototype.backendDB=function(){return this.idbdb},Qe.prototype.isOpen=function(){return this.idbdb!==null},Qe.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},Qe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Qe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Qe.prototype,"tables",{get:function(){var a=this;return s(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),Qe.prototype.transaction=function(){var a=(function(c,p,m){var v=arguments.length;if(v<2)throw new le.InvalidArgument("Too few arguments");for(var x=new Array(v-1);--v;)x[v-1]=arguments[v];return m=x.pop(),[c,oe(x),m]}).apply(this,arguments);return this._transaction.apply(this,a)},Qe.prototype._transaction=function(a,c,p){var m=this,v=se.trans;v&&v.db===this&&a.indexOf("!")===-1||(v=null);var x,_,j=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(_=c.map(function(D){if(D=D instanceof m.Table?D.name:D,typeof D!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return D}),a=="r"||a===uc)x=uc;else{if(a!="rw"&&a!=cc)throw new le.InvalidArgument("Invalid transaction mode: "+a);x=cc}if(v){if(v.mode===uc&&x===cc){if(!j)throw new le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v=null}v&&_.forEach(function(D){if(v&&v.storeNames.indexOf(D)===-1){if(!j)throw new le.SubTransaction("Table "+D+" not included in parent transaction.");v=null}}),j&&v&&!v.active&&(v=null)}}catch(D){return v?v._promise(null,function(B,O){O(D)}):He(D)}var I=(function D(B,O,L,R,M){return ne.resolve().then(function(){var $=se.transless||se,N=B._createTransaction(O,L,B._dbSchema,R);if(N.explicit=!0,$={trans:N,transless:$},R)N.idbtrans=R.idbtrans;else try{N.create(),N.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(W){return W.name===ir.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return D(B,O,L,null,M)})):He(W)}var F,K=we(M);return K&&Ti(),$=ne.follow(function(){var W;(F=M.call(N,N))&&(K?(W=ar.bind(null,null),F.then(W,W)):typeof F.next=="function"&&typeof F.throw=="function"&&(F=Pc(F)))},$),(F&&typeof F.then=="function"?ne.resolve(F).then(function(W){return N.active?W:He(new le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):$.then(function(){return F})).then(function(W){return R&&N._resolve(),N._completion.then(function(){return W})}).catch(function(W){return N._reject(W),He(W)})})}).bind(null,this,x,_,v,p);return v?v._promise(x,I,"lock"):se.trans?qr(se.transless,function(){return m._whenReady(I)}):this._whenReady(I)},Qe.prototype.table=function(a){if(!y(this._allTables,a))throw new le.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},Qe);function Qe(a,c){var p=this;this._middlewares={},this.verno=0;var m=Qe.dependencies;this._options=c=r({addons:Qe.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v,x,_,j,I,D={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Te,dbReadyPromise:null,cancelOpen:Te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};D.dbReadyPromise=new ne(function(O){D.dbReadyResolve=O}),D.openCanceller=new ne(function(O,L){D.cancelOpen=L}),this._state=D,this.name=a,this.on=zo(this,"populate","blocked","versionchange","close",{ready:[ec,Te]}),this.on.ready.subscribe=k(this.on.ready.subscribe,function(O){return function(L,R){Qe.vip(function(){var M,$=p._state;$.openComplete?($.dbOpenError||ne.resolve().then(L),R&&O(L)):$.onReadyBeingFired?($.onReadyBeingFired.push(L),R&&O(L)):(O(L),M=p,R||O(function N(){M.on.ready.unsubscribe(L),M.on.ready.unsubscribe(N)}))})}}),this.Collection=(v=this,$o(Lw.prototype,function(F,N){this.db=v;var R=Wh,M=null;if(N)try{R=N()}catch(K){M=K}var $=F._ctx,N=$.table,F=N.hook.reading.fire;this._ctx={table:N,index:$.index,isPrimKey:!$.index||N.schema.primKey.keyPath&&$.index===N.schema.primKey.name,range:R,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:M,or:$.or,valueMapper:F!==Do?F:null}})),this.Table=(x=this,$o(Qh.prototype,function(O,L,R){this.db=x,this._tx=R,this.name=O,this.schema=L,this.hook=x._allTables[O]?x._allTables[O].hook:zo(null,{creating:[Iw,Te],reading:[Ow,Do],updating:[Dw,Te],deleting:[Rw,Te]})})),this.Transaction=(_=this,$o(Kw.prototype,function(O,L,R,M,$){var N=this;this.db=_,this.mode=O,this.storeNames=L,this.schema=R,this.chromeTransactionDurability=M,this.idbtrans=null,this.on=zo(this,"complete","error","abort"),this.parent=$||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(F,K){N._resolve=F,N._reject=K}),this._completion.then(function(){N.active=!1,N.on.complete.fire()},function(F){var K=N.active;return N.active=!1,N.on.error.fire(F),N.parent?N.parent._reject(F):K&&N.idbtrans&&N.idbtrans.abort(),He(F)})})),this.Version=(j=this,$o(Yw.prototype,function(O){this.db=j,this._cfg={version:O,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,$o(Zh.prototype,function(O,L,R){if(this.db=I,this._ctx={table:O,index:L===":id"?null:L,or:R},this._cmp=this._ascending=ve,this._descending=function(M,$){return ve($,M)},this._max=function(M,$){return 0<ve(M,$)?M:$},this._min=function(M,$){return ve(M,$)<0?M:$},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new le.MissingAPI})),this.on("versionchange",function(O){0<O.newVersion?console.warn("Another connection wants to upgrade database '".concat(p.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(p.name,"'. Closing db now to resume the delete request.")),p.close({disableAutoOpen:!1})}),this.on("blocked",function(O){!O.newVersion||O.newVersion<O.oldVersion?console.warn("Dexie.delete('".concat(p.name,"') was blocked")):console.warn("Upgrade '".concat(p.name,"' blocked by other connection holding version ").concat(O.oldVersion/10))}),this._maxKey=Ko(c.IDBKeyRange),this._createTransaction=function(O,L,R,M){return new p.Transaction(O,L,R,p._options.chromeTransactionDurability,M)},this._fireOnBlocked=function(O){p.on("blocked").fire(O),ji.filter(function(L){return L.name===p.name&&L!==p&&!L._state.vcFired}).map(function(L){return L.on("versionchange").fire(O)})},this.use(eb),this.use(ib),this.use(tb),this.use(Xw),this.use(Zw);var B=new Proxy(this,{get:function(O,L,R){if(L==="_vip")return!0;if(L==="table")return function($){return $a(p.table($),B)};var M=Reflect.get(O,L,R);return M instanceof Qh?$a(M,B):L==="tables"?M.map(function($){return $a($,B)}):L==="_createTransaction"?function(){return $a(M.apply(this,arguments),B)}:M}});this.vip=B,m.forEach(function(O){return O(p)})}var La,Zt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ob=(Dc.prototype.subscribe=function(a,c,p){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:p})},Dc.prototype[Zt]=function(){return this},Dc);function Dc(a){this._subscribe=a}try{La={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{La={indexedDB:null,IDBKeyRange:null}}function hm(a){var c,p=!1,m=new ob(function(v){var x=we(a),_,j=!1,I={},D={},B={get closed(){return j},unsubscribe:function(){j||(j=!0,_&&_.abort(),O&&cr.storagemutated.unsubscribe(R))}};v.start&&v.start(B);var O=!1,L=function(){return lc(M)},R=function($){Ma(I,$),Ec(D,I)&&L()},M=function(){var $,N,F;!j&&La.indexedDB&&(I={},$={},_&&_.abort(),_=new AbortController,F=function(K){var W=Ei();try{x&&Ti();var V=sr(a,K);return V=x?V.finally(ar):V}finally{W&&Ci()}}(N={subscr:$,signal:_.signal,requery:L,querier:a,trans:null}),Promise.resolve(F).then(function(K){p=!0,c=K,j||N.signal.aborted||(I={},function(W){for(var V in W)if(y(W,V))return;return 1}(D=$)||O||(cr(Uo,R),O=!0),lc(function(){return!j&&v.next&&v.next(K)}))},function(K){p=!1,["DatabaseClosedError","AbortError"].includes(K==null?void 0:K.name)||j||lc(function(){j||v.error&&v.error(K)})}))};return setTimeout(L,0),B});return m.hasValue=function(){return p},m.getValue=function(){return c},m}var Gr=Nn;function Ac(a){var c=fr;try{fr=!0,cr.storagemutated.fire(a),jc(a,!0)}finally{fr=c}}g(Gr,r(r({},ma),{delete:function(a){return new Gr(a,{addons:[]}).delete()},exists:function(a){return new Gr(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=Gr.dependencies,p=c.indexedDB,c=c.IDBKeyRange,(bc(p)?Promise.resolve(p.databases()).then(function(m){return m.map(function(v){return v.name}).filter(function(v){return v!==ka})}):wc(p,c).toCollection().primaryKeys()).then(a)}catch{return He(new le.MissingAPI)}var c,p},defineClass:function(){return function(a){u(this,a)}},ignoreTransaction:function(a){return se.trans?qr(se.transless,a):a()},vip:_c,async:function(a){return function(){try{var c=Pc(a.apply(this,arguments));return c&&typeof c.then=="function"?c:ne.resolve(c)}catch(p){return He(p)}}},spawn:function(a,c,p){try{var m=Pc(a.apply(p,c||[]));return m&&typeof m.then=="function"?m:ne.resolve(m)}catch(v){return He(v)}},currentTransaction:{get:function(){return se.trans||null}},waitFor:function(a,c){return c=ne.resolve(typeof a=="function"?Gr.ignoreTransaction(a):a).timeout(c||6e4),se.trans?se.trans.waitFor(c):c},Promise:ne,debug:{get:function(){return _n},set:function(a){Bh(a)}},derive:P,extend:u,props:g,override:k,Events:zo,on:cr,liveQuery:hm,extendObservabilitySet:Ma,getByKeyPath:z,setByKeyPath:U,delByKeyPath:function(a,c){typeof c=="string"?U(a,c,void 0):"length"in c&&[].map.call(c,function(p){U(a,p,void 0)})},shallowClone:q,deepClone:ke,getObjectDiff:Oc,cmp:ve,asap:T,minKey:-1/0,addons:[],connections:ji,errnames:ir,dependencies:La,cache:Qr,semVer:"4.0.10",version:"4.0.10".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,p){return a+c/Math.pow(10,2*p)})})),Gr.maxKey=Ko(Gr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(cr(Uo,function(a){fr||(a=new CustomEvent(hc,{detail:a}),fr=!0,dispatchEvent(a),fr=!1)}),addEventListener(hc,function(a){a=a.detail,fr||Ac(a)}));var Ii,fr=!1,mm=function(){};return typeof BroadcastChannel<"u"&&((mm=function(){(Ii=new BroadcastChannel(hc)).onmessage=function(a){return a.data&&Ac(a.data)}})(),typeof Ii.unref=="function"&&Ii.unref(),cr(Uo,function(a){fr||Ii.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!Nn.disableBfCache&&a.persisted){_n&&console.debug("Dexie: handling persisted pagehide"),Ii!=null&&Ii.close();for(var c=0,p=ji;c<p.length;c++)p[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!Nn.disableBfCache&&a.persisted&&(_n&&console.debug("Dexie: handling persisted pageshow"),mm(),Ac({all:new mt(-1/0,[[]])}))})),ne.rejectionMapper=function(a,c){return!a||a instanceof Oe||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Mh[a.name]?a:(c=new Mh[a.name](c||a.message,a),"stack"in a&&E(c,"stack",{get:function(){return this.inner.stack}}),c)},Bh(_n),r(Nn,Object.freeze({__proto__:null,Dexie:Nn,liveQuery:hm,Entity:qh,cmp:ve,PropModSymbol:An,PropModification:Lo,replacePrefix:function(a,c){return new Lo({replacePrefix:[a,c]})},add:function(a){return new Lo({add:a})},remove:function(a){return new Lo({remove:a})},default:Nn,RangeSet:mt,mergeRanges:Vo,rangesOverlap:im}),{default:Nn}),Nn})})(uw);var AO=uw.exports;const Zd=Nv(AO),wv=Symbol.for("Dexie"),vu=globalThis[wv]||(globalThis[wv]=Zd);if(Zd.semVer!==vu.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Zd.semVer} and ${vu.semVer}`);const{liveQuery:TR,mergeRanges:jR,rangesOverlap:PR,RangeSet:OR,cmp:IR,Entity:RR,PropModSymbol:DR,PropModification:AR,replacePrefix:NR,add:MR,remove:BR}=vu;var gu="docs",NO="changes",bv="attachments",cw="dexie",_v=new Map,Ol=new Map;function MO(e,t,n,r){var i="rxdb-dexie-"+e+"--"+r.version+"--"+t,o=vi(_v,i,()=>{var s=(async()=>{var l=ut(n);l.autoOpen=!1;var u=new vu(i,l),f={[gu]:$O(r),[NO]:"++sequence, id",[bv]:"id"};return u.version(1).stores(f),await u.open(),{dexieDb:u,dexieTable:u[gu],dexieAttachmentsTable:u[bv],booleanIndexes:LO(r)}})();return _v.set(i,o),Ol.set(o,0),s});return o}async function BO(e){var t=await e,n=Ol.get(e),r=n-1;r===0?(t.dexieDb.close(),Ol.delete(e)):Ol.set(e,r)}var ep="__";function Ro(e){var t=e.split(".");if(t.length>1)return t.map(r=>Ro(r)).join(".");if(e.startsWith("|")){var n=e.substring(1);return ep+n}else return e}function fw(e){var t=e.split(".");if(t.length>1)return t.map(r=>fw(r)).join(".");if(e.startsWith(ep)){var n=e.substring(ep.length);return"|"+n}else return e}function zO(e,t){if(!t)return t;var n=ut(t);return n=tp(n),e.forEach(r=>{var i=To(t,r),o=i?"1":"0",s=Ro(r);vx(n,s,o)}),n}function dw(e,t){return t&&(t=ut(t),t=np(t),e.forEach(n=>{var r=To(t,n),i=r==="1";vx(t,n,i)}),t)}function tp(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(n=>tp(n));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="object"&&(r=tp(r)),t[Ro(n)]=r}),t}}function np(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(n=>np(n));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([n,r])=>{(typeof r=="object"||Array.isArray(e))&&(r=np(r)),t[fw(n)]=r}),t}}function $O(e){var t=[],n=wi(e.primaryKey);t.push([n]),t.push(["_deleted",n]),e.indexes&&e.indexes.forEach(o=>{var s=oh(o);t.push(s)}),t.push(["_meta.lwt",n]),t.push(["_meta.lwt"]),t=t.map(o=>o.map(s=>Ro(s)));var r=t.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");r=r.filter((o,s,l)=>l.indexOf(o)===s);var i=r.join(", ");return i}async function kv(e,t){var n=await e,r=await n.dexieTable.bulkGet(t);return r.map(i=>dw(n.booleanIndexes,i))}function cl(e,t){return e+"||"+t}function LO(e){var t=new Set,n=[];return e.indexes?(e.indexes.forEach(r=>{var i=oh(r);i.forEach(o=>{if(!t.has(o)){t.add(o);var s=Xs(e,o);s.type==="boolean"&&n.push(o)}})}),n.push("_deleted"),oE(n)):n}function Ev(e){return e===ro?-1/0:e}function Cv(e,t,n){if(e.includes(t)){var r=n===no||n===!0?"1":"0";return r}else return n}function pw(e,t,n){if(!n){if(typeof window>"u")throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var r=t.startKeys.map((s,l)=>{var u=t.index[l];return Cv(e,u,s)}).map(Ev),i=t.endKeys.map((s,l)=>{var u=t.index[l];return Cv(e,u,s)}).map(Ev),o=n.bound(r,i,!t.inclusiveStart,!t.inclusiveEnd);return o}async function Tv(e,t){var n=await e.internals,r=t.query,i=r.skip?r.skip:0,o=r.limit?r.limit:1/0,s=i+o,l=t.queryPlan,u=!1;l.selectorSatisfiedByIndex||(u=Eh(e.schema,t.query));var f=pw(n.booleanIndexes,l,n.dexieDb._options.IDBKeyRange),h=l.index,y=[];if(await n.dexieDb.transaction("r",n.dexieTable,async S=>{var E=S.idbtrans,P=E.objectStore(gu),A,w;w="["+h.map(k=>Ro(k)).join("+")+"]",A=P.index(w);var b=A.openCursor(f);await new Promise(k=>{b.onsuccess=function(C){var T=C.target.result;if(T){var z=dw(n.booleanIndexes,T.value);(!u||u(z))&&y.push(z),l.sortSatisfiedByIndex&&y.length===s?k():T.continue()}else k()}})}),!l.sortSatisfiedByIndex){var g=IS(e.schema,t.query);y=y.sort(g)}return y=y.slice(i,s),{documents:y}}async function FO(e,t){var n=await e.internals,r=t.queryPlan,i=r.index,o=pw(n.booleanIndexes,r,n.dexieDb._options.IDBKeyRange),s=-1;return await n.dexieDb.transaction("r",n.dexieTable,async l=>{var u=l.idbtrans,f=u.objectStore(gu),h,y;y="["+i.map(S=>Ro(S)).join("+")+"]",h=f.index(y);var g=h.count(o);s=await new Promise((S,E)=>{g.onsuccess=function(){S(g.result)},g.onerror=P=>E(P)})}),s}var UO=sn(),If=!1,KO=function(){function e(n,r,i,o,s,l,u,f){this.changes$=new Dr,this.instanceId=UO++,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=o,this.internals=s,this.options=l,this.settings=u,this.devMode=f,this.primaryPath=wi(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(r,i){Xr(this),!If&&(!xf.premium||typeof xf.premium!="string"||await px(xf.premium)!==AE)&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),If=!0,r.forEach(h=>{if(!h.document._rev||h.previous&&!h.previous._rev)throw fe("SNH",{args:{row:h}})});var o=await this.internals,s={error:[]};this.devMode&&(r=r.map(h=>{var y=Ju(h.document);return{previous:h.previous,document:y}}));var l=r.map(h=>h.document[this.primaryPath]),u;if(await o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,async()=>{var h=new Map,y=await kv(this.internals,l);y.forEach(E=>{var P=E;return P&&h.set(P[this.primaryPath],P),P}),u=eP(this,this.primaryPath,h,r,i),s.error=u.errors;var g=[];u.bulkInsertDocs.forEach(E=>{g.push(E.document)}),u.bulkUpdateDocs.forEach(E=>{g.push(E.document)}),g=g.map(E=>zO(o.booleanIndexes,E)),g.length>0&&await o.dexieTable.bulkPut(g);var S=[];u.attachmentsAdd.forEach(E=>{S.push({id:cl(E.documentId,E.attachmentId),data:E.attachmentData.data})}),u.attachmentsUpdate.forEach(E=>{S.push({id:cl(E.documentId,E.attachmentId),data:E.attachmentData.data})}),await o.dexieAttachmentsTable.bulkPut(S),await o.dexieAttachmentsTable.bulkDelete(u.attachmentsRemove.map(E=>cl(E.documentId,E.attachmentId)))}),u=Ve(u),u.eventBulk.events.length>0){var f=Ve(u.newestRow).document;u.eventBulk.checkpoint={id:f[this.primaryPath],lwt:f._meta.lwt},u.eventBulk.endTime=sn(),this.changes$.next(u.eventBulk)}return s},t.findDocumentsById=async function(r,i){Xr(this);var o=await this.internals,s=[];return await o.dexieDb.transaction("r",o.dexieTable,async()=>{var l=await kv(this.internals,r);l.forEach(u=>{u&&(!u._deleted||i)&&s.push(u)})}),s},t.query=function(r){return Xr(this),Tv(this,r)},t.count=async function(r){if(r.queryPlan.selectorSatisfiedByIndex){var i=await FO(this,r);return{count:i,mode:"fast"}}else{var o=await Tv(this,r);return{count:o.documents.length,mode:"slow"}}},t.changeStream=function(){return Xr(this),this.changes$.asObservable()},t.cleanup=async function(r){Xr(this);var i=await this.internals;return await i.dexieDb.transaction("rw",i.dexieTable,async()=>{var o=sn()-r,s=await i.dexieTable.where("_meta.lwt").below(o).toArray(),l=[];s.forEach(u=>{u._deleted==="1"&&l.push(u[this.primaryPath])}),await i.dexieTable.bulkDelete(l)}),!0},t.getAttachmentData=async function(r,i,o){Xr(this);var s=await this.internals,l=cl(r,i);return await s.dexieDb.transaction("r",s.dexieAttachmentsTable,async()=>{var u=await s.dexieAttachmentsTable.get(l);if(u)return u.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+i)})},t.remove=async function(){Xr(this);var r=await this.internals;return await r.dexieTable.clear(),this.close()},t.close=function(){return this.closed?this.closed:(this.closed=(async()=>{this.changes$.complete(),await BO(this.internals)})(),this.closed)},t.conflictResultionTasks=function(){return new Dr},t.resolveConflictResultionTask=async function(r){},e}();async function WO(e,t,n){var r=MO(t.databaseName,t.collectionName,n,t.schema),i=new KO(e,t.databaseName,t.collectionName,t.schema,r,t.options,n,t.devMode);return await DO(cw,t,i),Promise.resolve(i)}function Xr(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var qO=function(){function e(n){this.name=cw,this.rxdbVersion=xx,this.settings=n}var t=e.prototype;return t.createStorageInstance=function(r){return rP(r),WO(this,r,this.settings)},e}();function VO(e={}){var t=new qO(e);return t}const Zu=e=>_t((t,n,r)=>{let i=0;if(n instanceof Array)for(const o of n)i=i|1<<o;else i=n;return e(t&i,i)}),HO=Zu((e,t)=>e==0),QO=Zu((e,t)=>e==t),GO=Zu((e,t)=>e<t),YO=Zu((e,t)=>e>0),JO=Object.freeze(Object.defineProperty({__proto__:null,$all:jj,$and:hS,$bitsAllClear:HO,$bitsAllSet:QO,$bitsAnyClear:GO,$bitsAnySet:YO,$elemMatch:TS,$eq:vS,$exists:PS,$expr:Ej,$gt:gS,$gte:xS,$in:SS,$jsonSchema:Cj,$lt:wS,$lte:bS,$mod:ES,$ne:_S,$nin:kS,$nor:mS,$not:yS,$or:kh,$regex:CS,$size:jS,$type:OS,$where:Tj},Symbol.toStringTag,{value:"Module"})),Nh=(e,t)=>{switch(e){case"deep":return Ud(t);case"copy":return du(t)?new Date(t):Xe(t)?[...t]:ze(t)?{...t}:t;default:return t}},XO=/^[a-z]+[a-zA-Z0-9]*$/;function hw(e){if(!e.includes(".$"))return[{parent:e,selector:e},[]];const t=e.indexOf(".$"),n=e.indexOf("]"),r=e.substring(0,t),i=e.substring(t+3,n);Je(i===""||XO.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");const o=e.substring(n+2),[s,l]=o?hw(o):[];return[{selector:e,parent:r,child:i||"$",next:s},[i,...l||[]].filter(Boolean)]}const Bt=(e,t,n,r,i)=>{const{parent:o,child:s,next:l}=t;if(!s){let f=!1;return ta(e,o,(y,g)=>f=!!r(y,g)||f,i),f}const u=Oo(e,o);return Xe(u)?u.map((f,h)=>n[s]&&!n[s].test({[s]:f})?!1:l?Bt(f,l,n,r,i):r(u,h)).some(Boolean):!1};function Xt(e,t,n,r){const i=[];for(const[o,s]of Object.entries(e)){const[l,u]=hw(o);if(!u.length)r(s,l,{})&&i.push(l.parent);else{const f={};t.forEach(y=>{Object.keys(y).forEach(g=>{u.forEach(S=>{(g===S||g.startsWith(S+"."))&&(f[S]=f[S]||{},Object.assign(f[S],{[g]:y[g]}))})})});const h={};for(const[y,g]of Object.entries(f))h[y]=new Zn(g,n.queryOptions);r(s,l,h)&&i.push(l.parent)}}return i}const ZO=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>{const l={$each:[i]};return ze(i)&&Ht(i,"$each")&&Object.assign(l,i),Bt(e,o,s,(u,f)=>{const h=u[f]||(u[f]=[]);return bh([h,l.$each]).length===l.$each.length?!1:(u[f]=Nh(r.cloneMode,$T(h.concat(l.$each))),!0)},{buildGraph:!0})}),eI=new Set(["and","or","xor"]),tI=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>{const l=Object.keys(i);return Je(l.length===1&&eI.has(l[0]),`Invalid bit operator '${l[0]}'. Must be one of 'and', 'or', or 'xor'.`),Bt(e,o,s,(u,f)=>{let h=u[f];const y=i[l[0]];if(h!==void 0&&!(Kt(h)&&Kt(y)))return!1;switch(h=h||0,l[0]){case"and":u[f]=h&y;break;case"or":u[f]=h|y;break;case"xor":u[f]=h^y;break}return u[f]!==h},{buildGraph:!0})}),nI=(e,t,n=[],r={})=>{const i=Date.now();return Xt(t,n,r,(o,s,l)=>Bt(e,s,l,(u,f)=>(u[f]=i,!0),{buildGraph:!0}))},rI=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>{if(!o.child){const l=Oo(e,o.parent);Je(l===void 0||Kt(l),"cannot apply $inc to a value of non-numeric type")}return Bt(e,o,s,(l,u)=>(l[u]=(l[u]||(l[u]=0))+i,!0),{buildGraph:!0})}),iI=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>Bt(e,o,s,(l,u)=>l[u]!==void 0&&Mt(l[u],i)>-1?!1:(l[u]=i,!0),{buildGraph:!0})),oI=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>Bt(e,o,s,(l,u)=>l[u]!==void 0&&Mt(l[u],i)<1?!1:(l[u]=i,!0),{buildGraph:!0})),sI=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>Bt(e,o,s,(l,u)=>{const f=l[u];return l[u]=l[u]===void 0?0:l[u]*i,l[u]!==f},{buildGraph:!0})),aI=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>Bt(e,o,s,(l,u)=>{const f=l[u];return Je(Xe(f),`path '${o.selector}' contains an element of non-array type.`),f.length?(i===-1?f.splice(0,1):f.pop(),!0):!1})),mw=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>{const l=!ze(i)||Object.keys(i).some(ki),u=new Zn(l?{k:i}:i,r.queryOptions),f=l?h=>u.test({k:h}):h=>u.test(h);return Bt(e,o,s,(h,y)=>{const g=h[y],S=new Array;return g.map(P=>{const A=f(P);return A||S.push(P),A}).some(Boolean)?(h[y]=S,!0):!1})}),lI=(e,t,n=[],r={})=>{const i={};return Object.entries(t).forEach(([o,s])=>{i[o]={$in:s}}),mw(e,i,n,r)},uI=Object.freeze(["$each","$slice","$sort","$position"]),cI=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>{const l={$each:[i]};return ze(i)&&uI.some(u=>Ht(i,u))&&Object.assign(l,i),Bt(e,o,s,(u,f)=>{const h=u[f]||(u[f]=[]),y=h.slice(0,l.$slice||h.length),g=h.length,S=Kt(l.$position)?l.$position:h.length;if(h.splice(S,0,...Nh(r.cloneMode,l.$each)),l.$sort){const E=ze(l.$sort)?Object.keys(l.$sort||{}).pop():"",P=E?l.$sort[E]:l.$sort,A=E?w=>Oo(w,E):w=>w;h.sort((w,b)=>P*Mt(A(w),A(b)))}return Kt(l.$slice)&&(l.$slice<0?h.splice(0,h.length+l.$slice):h.splice(l.$slice)),g!=h.length||!In(y,h)},{descendArray:!0,buildGraph:!0})}),yw=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>Bt(e,o,s,(l,u)=>In(l[u],i)?!1:(l[u]=Nh(r.cloneMode,i),!0),{buildGraph:!0})),fI=(e,t,n=[],r={})=>{const i=[],o=Xt(t,n,r,(s,l,u)=>Bt(e,l,u,(f,h)=>Ht(f,h)?(i.push(...yw(e,{[s]:f[h]},n,r)),delete f[h],!0):!1));return Array.from(new Set(o.concat(i)))},dI=(e,t,n=[],r={})=>Xt(t,n,r,(i,o,s)=>Bt(e,o,s,(l,u)=>Ht(l,u)?(Xe(l)?l[u]=null:delete l[u],!0):!1)),jv=Object.freeze(Object.defineProperty({__proto__:null,$addToSet:ZO,$bit:tI,$currentDate:nI,$inc:rI,$max:iI,$min:oI,$mul:sI,$pop:aI,$pull:mw,$pullAll:lI,$push:cI,$rename:fI,$set:yw,$unset:dI},Symbol.toStringTag,{value:"Module"}));function vw(e){return e={...e,queryOptions:pu(e.queryOptions)},e.queryOptions.context.addQueryOps(JO).addExpressionOps(pj).addExpressionOps(wj),(t,n,r=[],i={},o={})=>{const s=Object.assign({cloneMode:"copy"},e,o);Object.assign(s,{queryOptions:pu(Object.assign({useStrictMode:!1},s==null?void 0:s.queryOptions))}),r=r||[],i=i||{};const l=Object.entries(n);Je(l.length===1,"Update expression must contain only one operator.");const[u,f]=l[0];Je(Ht(jv,u),`Update operator '${u}' is not supported.`);const h=jv[u];return Object.keys(i).length&&!(i instanceof Zn?i:new Zn(i,s.queryOptions)).test(t)?[]:h(t,f,r,s)}}vw({});var Rf;function gw(e,t){if(!Rf){var n=vw({cloneMode:"none"});Rf=(r,i)=>{var o=ho(r);return n(o,i),o}}return Rf(e,t)}function pI(e){return this.incrementalModify(t=>{var n=gw(t,e);return n})}function hI(e){var t=this._data,n=gw(t,e);return this._saveData(n,t)}async function mI(e){return Ni(this.asRxQuery,t=>t.update(e))}var yI={name:"update",rxdb:!0,prototypes:{RxDocument:e=>{e.update=hI,e.incrementalUpdate=pI},RxQuery:e=>{e.update=mI}}};const vI={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},title:{type:"string"},parentServiceId:{type:["string","null"]},serviceType:{type:"string"},variant:{type:["string","null"]},includedIn:{type:"array",items:{type:"string"}},unit:{type:"string"},maxProductivityPerDay:{type:["number","null"]},standardQuantity:{type:["number","null"]},standardTime:{type:["number","null"]},standardValuePerUnit:{type:["number","null"]},formula:{type:["string","null"]},materialStandard:{type:["string","null"]},waitTime:{type:["number","null"]},minTime:{type:["number","null"]},efficiencyStart:{type:["number","null"]},efficiencyCap:{type:["number","null"]},efficiencyStepPercent:{type:["number","null"]},materialType:{type:["string","null"]},materialValue:{type:["number","null"]},materialOnboardingCompleted:{type:["boolean","null"]},includedSubServices:{type:"array",items:{type:"string"}},configOnboardingCompleted:{type:["boolean","null"]},subServiceConfigOnboardingCompleted:{type:["boolean","null"]},createdAt:{type:"number"},updatedAt:{type:"number"}},required:["id","title","serviceType","unit"],indexes:["parentServiceId","serviceType","includedIn"]},gI={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},title:{type:"string"},affectsArea:{type:"array",items:{type:"string"}},requiredService:{type:["string","null"]},affectsService:{type:"array",items:{type:"string"}},category:{type:["string","null"]},objectType:{type:"array",items:{type:"string"}},inputType:{type:["string","null"]},source:{type:["string","null"]},uxDescription:{type:["string","null"]},factor:{type:["number","null"]},onboardingCompleted:{type:["boolean","null"]},createdAt:{type:"number"},updatedAt:{type:"number"}},required:["id","title"],indexes:["affectsService","objectType"]},xI={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},factor:{type:"number"},affectsArea:{type:"array",items:{type:"string"}},affectsService:{type:"array",items:{type:"string"}},category:{type:"string"},objectType:{type:"string"},inputType:{type:"string"},source:{type:"string"},createdAt:{type:"number"},updatedAt:{type:"number"}},required:["id","name","factor","objectType"],indexes:["objectType","category","name"]},SI={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},type:{type:"string"},floorArea:{type:"number"},height:{type:"number"},services:{type:"array",items:{type:"string"}},specialNotes:{type:"array",items:{type:"string"}},createdAt:{type:"number"},updatedAt:{type:"number"}},required:["id","name","type","floorArea","height"],indexes:["type"]},wI={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},objectId:{type:"string"},serviceId:{type:"string"},quantity:{type:"number"},quantityType:{type:"string"},baseTime:{type:"number"},efficiency:{type:"number"},finalTime:{type:"number"},laborCost:{type:["number","null"]},materialCost:{type:["number","null"]},totalCost:{type:["number","null"]},factors:{type:"object"},specialNotes:{type:"array",items:{type:"string"}},createdAt:{type:"number"}},required:["id","objectId","serviceId"],indexes:["objectId","serviceId"]},bI={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},day:{type:"number"},hours:{type:"number"},employees:{type:"number"},calculationIds:{type:"array",items:{type:"string"}},waitTimes:{type:"array",items:{type:"object"}},parallelWork:{type:"array",items:{type:"object"}},createdAt:{type:"number"}},required:["id","day"],indexes:["day"]},_I={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},laborRate:{type:"number"},dailyHours:{type:"number"},dailyHoursFriday:{type:"number"},weeklyHours:{type:"number"},minTimeAlone:{type:"number"},siteSetup:{type:"number"},siteClearance:{type:"number"},onboardingCompleted:{type:"boolean"},createdAt:{type:"number"},updatedAt:{type:"number"}},required:["id"]},xu={id:"company_settings",laborRate:65,dailyHours:8.25,dailyHoursFriday:7,weeklyHours:40,minTimeAlone:90,siteSetup:60,siteClearance:60,onboardingCompleted:!1,createdAt:Date.now(),updatedAt:Date.now()};let _s=null;DP(yI);async function kI(){if(_s)return _s;try{const e=await PP({name:"offercalculator_v6_sub_services",storage:VO(),ignoreDuplicate:!0});return await e.addCollections({services:{schema:vI},specialServices:{schema:gI},factors:{schema:xI},objects:{schema:SI},calculations:{schema:wI},workflows:{schema:bI},companySettings:{schema:_I}}),_s=e,console.log(" RxDB initialized successfully"),e}catch(e){throw console.error(" Error initializing RxDB:",e),e}}function be(){if(!_s)throw console.error("Database not initialized. Call initDatabase() first."),new Error("Database not initialized. Call initDatabase() first.");return _s}const EI=[{id:"service_baustelleneinrichtung",title:"Baustelleneinrichtung",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"Anfahrt, Ausladen, Wege sichern",includedIn:[],unit:"h",maxProductivityPerDay:null,standardQuantity:1,standardTime:45,standardValuePerUnit:45,formula:"Mindestzeit, sonst Standardmodus (pro Raum/Flche/Tag)",materialStandard:"1,02",materialType:"percent",materialValue:2,waitTime:0,minTime:45,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_mindestzeit_tag",title:"Mindestzeit am Tag",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"",includedIn:[],unit:"h",maxProductivityPerDay:null,standardQuantity:1,standardTime:90,standardValuePerUnit:90,formula:"aus dem Onboarding",materialStandard:"",materialType:"none",materialValue:0,waitTime:0,minTime:90,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_abdecken_boden",title:"Abdecken (Boden)",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"Abkleben, Folie/Fleece, Rnder fixieren",includedIn:["service_overholungsanstrich","service_neuanstrich_frisch","service_neuanstrich_raufaser","service_neuanstrich_malervlies","service_mustertapete","service_malervlies","service_raufaser","service_tapete_entfernen"],unit:"m",maxProductivityPerDay:110,standardQuantity:15,standardTime:45,standardValuePerUnit:3,formula:"3,0 min/m (45 min  15 m)  Praxiswert",materialStandard:"1,1",waitTime:0,minTime:90,efficiencyStart:60,efficiencyCap:120,efficiencyStepPercent:1},{id:"service_duebelloecher",title:"Dbellcher schlieen (<10% der Flche)",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"Dbellcher schlieen, nachschleifen und vorbessern",includedIn:[],unit:"m",maxProductivityPerDay:250,standardQuantity:40,standardTime:20,standardValuePerUnit:.5,formula:"0,5 min/m (20 min / 40 m)",materialStandard:"1,1",waitTime:30,minTime:90,efficiencyStart:100,efficiencyCap:250,efficiencyStepPercent:1},{id:"service_teilspachtelung",title:"Teilspachtelung",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"punktuell spachteln, schleifen, grundieren",includedIn:["service_raufaser"],unit:"m",maxProductivityPerDay:180,standardQuantity:40,standardTime:510,standardValuePerUnit:12.75,formula:"12,75 min/m (510 min  40 m)",materialStandard:"+5 %",waitTime:240,minTime:null,efficiencyStart:40,efficiencyCap:80,efficiencyStepPercent:1},{id:"service_vollflaechenspachtelung",title:"Vollflchenspachtelung  1 mm",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"vollflchig spachteln, Trocknung, schleifen",includedIn:["service_tuerfluegel_lackieren","service_fensterfluegel_innen","service_fensterfluegel_aussen","service_malervlies","service_mustertapete","service_neuanstrich_frisch"],unit:"m",maxProductivityPerDay:70,standardQuantity:40,standardTime:480,standardValuePerUnit:12,formula:"Spachtel 4,6h + Schliff 1,8h  6,4h  8,0h inkl. Rstzeit",materialStandard:"+10 %",waitTime:480,minTime:null,efficiencyStart:40,efficiencyCap:70,efficiencyStepPercent:1},{id:"service_zusaetzlicher_grundanstrich",title:"Zustzlicher Grundanstrich",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"",includedIn:[],unit:"m",maxProductivityPerDay:180,standardQuantity:40,standardTime:160,standardValuePerUnit:4,formula:"4,0 min/m (160 min  40 m)",materialStandard:"1,2",waitTime:60,minTime:null,efficiencyStart:50,efficiencyCap:160,efficiencyStepPercent:1},{id:"service_isoliergrundierung",title:"Isoliergrundierung",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"",includedIn:[],unit:"m",maxProductivityPerDay:180,standardQuantity:40,standardTime:160,standardValuePerUnit:4,formula:"4,0 min/m (160 min  40 m)",materialStandard:"1,2",waitTime:90,minTime:null,efficiencyStart:50,efficiencyCap:160,efficiencyStepPercent:1},{id:"service_grundierung_standard",title:"Grundierung (Standard)",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"staubfrei, Grund auftragen",includedIn:["service_raufaser","service_malervlies","service_mustertapete","service_neuanstrich_frisch","service_neuanstrich_raufaser","service_neuanstrich_malervlies"],unit:"m",maxProductivityPerDay:190,standardQuantity:40,standardTime:140,standardValuePerUnit:3.5,formula:"3,5 min/m (140 min  40 m)",materialStandard:"+5 %",waitTime:0,minTime:null,efficiencyStart:45,efficiencyCap:150,efficiencyStepPercent:1},{id:"service_boden_wasserfest",title:"Boden wasserfest schtzen",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"Folie + dicht verkleben",includedIn:["service_tapete_entfernen"],unit:"m",maxProductivityPerDay:77,standardQuantity:15,standardTime:30,standardValuePerUnit:2,formula:"2,0 min/m (70 % von 3,0 min/m)",materialStandard:"+2 %",waitTime:0,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_tapete_entfernen",title:"Tapeten entfernen (Wnde + Decken)",parentServiceId:"service_belaege_entfernen",serviceType:"Unterleistung Backend, Shop Leistung",variant:"Einweichen, abziehen, entsorgen",includedIn:[],unit:"m",maxProductivityPerDay:60,standardQuantity:40,standardTime:330,standardValuePerUnit:8.25,formula:"8,25 min/m (330 min  40 m)",materialStandard:"0,50 /m",waitTime:15,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_farbliche_grundierung",title:"Farbliche Grundierung",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"Grundton zur Tapete",includedIn:["service_mustertapete"],unit:"m",maxProductivityPerDay:180,standardQuantity:40,standardTime:160,standardValuePerUnit:4,formula:"4,0 min/m (160 min  40 m)",materialStandard:"+20 %",waitTime:90,minTime:null,efficiencyStart:50,efficiencyCap:160,efficiencyStepPercent:1},{id:"service_kleisterauftrag",title:"Kleisterauftrag",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"wand-/bahnenweise einkleistern",includedIn:["service_raufaser","service_malervlies","service_mustertapete"],unit:"m",maxProductivityPerDay:220,standardQuantity:40,standardTime:150,standardValuePerUnit:3.75,formula:"3,75 min/m ( Zeit von Tapezieren)",materialStandard:"+2 %",waitTime:0,minTime:null,efficiencyStart:80,efficiencyCap:240,efficiencyStepPercent:1},{id:"service_tapezieren",title:"Tapezieren",parentServiceId:"",serviceType:"Shop Titel Leistung",variant:"zuschneiden, kleben, andrcken",includedIn:[],unit:"m",maxProductivityPerDay:110,standardQuantity:40,standardTime:300,standardValuePerUnit:7.5,formula:"7,5 min/m (300 min  40 m)",materialStandard:"+10 %",waitTime:0,minTime:null,efficiencyStart:60,efficiencyCap:120,efficiencyStepPercent:1},{id:"service_raufaser",title:"Raufaser",parentServiceId:"service_tapezieren",serviceType:"Shop Leistung, Unterleistung Backend",variant:"",includedIn:[],unit:"m",maxProductivityPerDay:null,standardQuantity:null,standardTime:null,standardValuePerUnit:null,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_malervlies",title:"Malervlies",parentServiceId:"service_tapezieren",serviceType:"Shop Leistung, Unterleistung Backend",variant:"",includedIn:[],unit:"m",maxProductivityPerDay:null,standardQuantity:null,standardTime:null,standardValuePerUnit:null,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_mustertapete",title:"Mustertapete",parentServiceId:"service_tapezieren",serviceType:"Shop Leistung",variant:"Muster ausrichten, kleben",includedIn:[],unit:"m",maxProductivityPerDay:30,standardQuantity:20,standardTime:330,standardValuePerUnit:16.5,formula:"16,5 min/m (330 min  20 m)",materialStandard:"10 % + Rollenpreis",waitTime:0,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_anstrich",title:"Anstrich Decken und Wnde",parentServiceId:"",serviceType:"Shop Titel Leistung",variant:"",includedIn:[],unit:"m",maxProductivityPerDay:null,standardQuantity:null,standardTime:null,standardValuePerUnit:null,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_overholungsanstrich",title:"berholungsanstrich - Streichen (Wnde + Decken)",parentServiceId:"service_anstrich",serviceType:"Shop Leistung",variant:"Bauteile (ohne Boden) abkleben, beschneiden, rollen",includedIn:[],unit:"m",maxProductivityPerDay:150,standardQuantity:40,standardTime:180,standardValuePerUnit:4.5,formula:"4,5 min/m (180 min  40 m)",materialStandard:"1,2",waitTime:120,minTime:90,efficiencyStart:60,efficiencyCap:150,efficiencyStepPercent:1},{id:"service_neuanstrich_frisch",title:"Streichen auf frisch gespachtelt",parentServiceId:"service_anstrich",serviceType:"Shop Leistung",variant:"Voranstrich + Schlussanstrich getrennt",includedIn:[],unit:"m",maxProductivityPerDay:150,standardQuantity:40,standardTime:360,standardValuePerUnit:9,formula:"Vor 3,5h + Nach 2,5h mit Trocknung",materialStandard:"+15 %",waitTime:1440,minTime:null,efficiencyStart:60,efficiencyCap:150,efficiencyStepPercent:1},{id:"service_neuanstrich_raufaser",title:"Streichen auf Raufasertapete",parentServiceId:"service_anstrich",serviceType:"Shop Leistung",variant:"Raufaser",includedIn:[],unit:"m",maxProductivityPerDay:150,standardQuantity:40,standardTime:345,standardValuePerUnit:8.625,formula:"Nachstruktur beeinflusst Zeit",materialStandard:"+15 %",waitTime:120,minTime:null,efficiencyStart:60,efficiencyCap:150,efficiencyStepPercent:1},{id:"service_neuanstrich_malervlies",title:"Streichen auf Malervliestapete",parentServiceId:"service_anstrich",serviceType:"Shop Leistung",variant:"Malervlies",includedIn:[],unit:"m",maxProductivityPerDay:150,standardQuantity:41,standardTime:360,standardValuePerUnit:8.78,formula:"Nachstruktur beeinflusst Zeit",materialStandard:"+15 %",waitTime:120,minTime:null,efficiencyStart:60,efficiencyCap:150,efficiencyStepPercent:1},{id:"service_lackieren",title:"Lackieren",parentServiceId:"",serviceType:"Shop Titel Leistung",variant:"schleifen + grundieren, Trocknung, endlackieren",includedIn:[],unit:"Stk",maxProductivityPerDay:4.5,standardQuantity:1,standardTime:210,standardValuePerUnit:210,formula:"1,75h + 1,75h ber 2 Tage",materialStandard:"+22 %",waitTime:360,minTime:null,efficiencyStart:3,efficiencyCap:10,efficiencyStepPercent:1},{id:"service_tuerfluegel_lackieren",title:"Trflgel lackieren (mit Zarge)",parentServiceId:"service_lackieren",serviceType:"Shop Leistung",variant:"schleifen + grundieren, Trocknung, endlackieren",includedIn:[],unit:"Stk",maxProductivityPerDay:4.5,standardQuantity:2,standardTime:210,standardValuePerUnit:105,formula:"1,75h + 1,75h ber 2 Tage",materialStandard:"+22 %",waitTime:420,minTime:null,efficiencyStart:3,efficiencyCap:10,efficiencyStepPercent:1},{id:"service_tuerfluegel_schleifen",title:"Trflgel schleifen",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_tuerfluegel_lackieren"],unit:"Stk",maxProductivityPerDay:4.5,standardQuantity:3,standardTime:210,standardValuePerUnit:70,formula:"1,75h + 1,75h ber 2 Tage",materialStandard:"+22 %",waitTime:480,minTime:null,efficiencyStart:3,efficiencyCap:10,efficiencyStepPercent:1},{id:"service_tuerfluegel_grundieren",title:"Trflgel grundieren",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_tuerfluegel_lackieren"],unit:"Stk",maxProductivityPerDay:4.5,standardQuantity:4,standardTime:210,standardValuePerUnit:52.5,formula:"1,75h + 1,75h ber 2 Tage",materialStandard:"+22 %",waitTime:540,minTime:null,efficiencyStart:3,efficiencyCap:10,efficiencyStepPercent:1},{id:"service_tuerfluegel_schlusslackieren",title:"Trflgel schlusslackieren",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_tuerfluegel_lackieren"],unit:"Stk",maxProductivityPerDay:4.5,standardQuantity:5,standardTime:210,standardValuePerUnit:42,formula:"1,75h + 1,75h ber 2 Tage",materialStandard:"+22 %",waitTime:600,minTime:null,efficiencyStart:3,efficiencyCap:10,efficiencyStepPercent:1},{id:"service_fensterfluegel_innen",title:"Fensterflgel lackieren  je Seite innen (mittel < 1,5 m)",parentServiceId:"service_lackieren",serviceType:"Shop Leistung",variant:"abkleben, schleifen, grundieren, lackieren",includedIn:[],unit:"Stk",maxProductivityPerDay:3.5,standardQuantity:2,standardTime:345,standardValuePerUnit:172.5,formula:"72 min/m (180 min  2,5 m)",materialStandard:"+22 %",waitTime:360,minTime:null,efficiencyStart:3,efficiencyCap:10,efficiencyStepPercent:1},{id:"service_fensterfluegel_innen_schleifen",title:"Fensterflgel innen schleifen",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_fensterfluegel_innen"],unit:"Stk",maxProductivityPerDay:10,standardQuantity:2,standardTime:90,standardValuePerUnit:45,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_fensterfluegel_innen_grundieren",title:"Fensterflgel innen grundieren",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_fensterfluegel_innen"],unit:"Stk",maxProductivityPerDay:3.5,standardQuantity:2,standardTime:120,standardValuePerUnit:60,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_fensterfluegel_innen_schlusslackieren",title:"Fensterflgel innen schlusslackieren",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_fensterfluegel_innen"],unit:"Stk",maxProductivityPerDay:3.5,standardQuantity:2,standardTime:135,standardValuePerUnit:67.5,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_fensterfluegel_aussen",title:"Fensterflgel lackieren  je Seite auen (mittel < 1,5 m)",parentServiceId:"service_lackieren",serviceType:"Shop Leistung",variant:"wie innen, strker beansprucht",includedIn:[],unit:"Stk",maxProductivityPerDay:3.5,standardQuantity:2,standardTime:210,standardValuePerUnit:105,formula:"84 min/m (210 min  2,5 m)",materialStandard:"+22 %",waitTime:360,minTime:null,efficiencyStart:3,efficiencyCap:10,efficiencyStepPercent:1},{id:"service_fensterfluegel_aussen_schleifen",title:"Fensterflgel auen schleifen",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_fensterfluegel_aussen"],unit:"Stk",maxProductivityPerDay:null,standardQuantity:2,standardTime:150,standardValuePerUnit:75,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_fensterfluegel_aussen_grundieren",title:"Fensterflgel auen grundieren",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_fensterfluegel_aussen"],unit:"Stk",maxProductivityPerDay:null,standardQuantity:2,standardTime:135,standardValuePerUnit:67.5,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_fensterfluegel_aussen_schlusslackieren",title:"Fensterflgel auen schlusslackieren",parentServiceId:"service_lackieren",serviceType:"Unterleistung Backend",variant:"",includedIn:["service_fensterfluegel_aussen"],unit:"Stk",maxProductivityPerDay:null,standardQuantity:2,standardTime:150,standardValuePerUnit:75,formula:"",materialStandard:"",waitTime:null,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null},{id:"service_aufraeumen",title:"Aufrumen / Entsorgen",parentServiceId:"",serviceType:"Unterleistung Backend",variant:"Abflle sammeln, entsorgen, reinigen",includedIn:[],unit:"m",maxProductivityPerDay:204,standardQuantity:44,standardTime:90,standardValuePerUnit:2.25,formula:"2,25 min/m (90 min  40 m)",materialStandard:"",waitTime:0,minTime:null,efficiencyStart:null,efficiencyCap:null,efficiencyStepPercent:null}],CI=[{id:"special_verschmutzung",title:"Verschmutzung/Verfrbung",affectsArea:["Decken","Wnde","Fenster innen","Tren"],requiredService:"service_zusaetzlicher_grundanstrich",affectsService:["service_overholungsanstrich","service_lackieren"],category:"Leistung",objectType:["Raum","Fenster","Tren"],inputType:"Leistungsspezifikation",source:"Onboarding",uxDescription:"Wenn der Kunde im Shop die Leistung berholungsanstrich auswhlt, sind mgliche Sonderleistungen hierzu abzufragen. Hier: sind die Oberflchen verschmutzt oder verfrbt",factor:1},{id:"special_nikotin",title:"Nikotinverfrbung",affectsArea:["Decken","Wnde","Fenster innen","Tren"],requiredService:"service_isoliergrundierung",affectsService:["service_overholungsanstrich","service_lackieren"],category:"Leistung",objectType:["Raum","Fenster","Tren"],inputType:"Leistungsspezifikation",source:"Onboarding",uxDescription:"Wenn der Kunde im Shop die Leistung berholungsanstrich auswhlt, sind mgliche Sonderleistungen hierzu abzufragen. Hier: Wurde in dem Raum geraucht",factor:1},{id:"special_duebelloecher",title:"Dbellcher",affectsArea:["Wnde"],requiredService:"service_duebelloecher",affectsService:["service_overholungsanstrich"],category:"Leistung",objectType:["Raum"],inputType:"Leistungsspezifikation",source:"Onboarding",uxDescription:"Wenn der Kunde im Shop die Leistung berholungsanstrich auswhlt, sind mgliche Sonderleistungen hierzu abzufragen. Hier: Sind Dbellcher in den Wnden zu schlieen",factor:1},{id:"special_umraeumen",title:"Umrumarbeiten werden bentigt",affectsArea:[],requiredService:null,affectsService:[],category:"Leistung",objectType:["Raum"],inputType:"Objektverwaltung",source:"Global",uxDescription:"hier entsteht nur ein textlicher Platzhalter mit dem Hinweis: Arbeiten werden auf Zeitnachweis tatschlicher Aufwand ausgefhrt und separat abgerechnet",factor:1}],Bn={services:EI,specialServices:CI,factors:[{id:"factor_flur",name:"Flur",factor:1.2,affectsArea:["Umfang"],affectsService:[],category:"Mengen",objectType:"Raum",inputType:"Objektverwaltung",source:"Admin SE"},{id:"factor_l",name:"L",factor:1.4,affectsArea:["Umfang"],affectsService:[],category:"Mengen",objectType:"Raum",inputType:"Objektverwaltung",source:"Admin SE"},{id:"factor_bad",name:"Bad",factor:2,affectsArea:["Decken","Wnde"],affectsService:["service_tapete_entfernen","service_raufaser","service_malervlies","service_mustertapete","service_overholungsanstrich","service_neuanstrich_frisch","service_neuanstrich_raufaser","service_neuanstrich_malervlies"],category:"Leistung",objectType:"Raum",inputType:"Objektverwaltung",source:"Admin SE"},{id:"factor_treppenhaus",name:"Treppenhaus",factor:1.3,affectsArea:["Decken","Wnde"],affectsService:["service_tapete_entfernen","service_raufaser","service_malervlies","service_mustertapete","service_overholungsanstrich","service_neuanstrich_frisch","service_neuanstrich_raufaser","service_neuanstrich_malervlies"],category:"Leistung",objectType:"Raum",inputType:"Objektverwaltung",source:"Admin SE"},{id:"factor_kueche",name:"Kche",factor:1.25,affectsArea:["Decken","Wnde"],affectsService:["service_tapete_entfernen","service_raufaser","service_malervlies","service_mustertapete","service_overholungsanstrich","service_neuanstrich_frisch","service_neuanstrich_raufaser","service_neuanstrich_malervlies"],category:"Leistung",objectType:"Raum",inputType:"Objektverwaltung",source:"Admin SE"}]},ge={async getAllServices(){var e;try{const t=be();if(console.log("getAllServices: Datenbank verfgbar, Collections:",Object.keys(t.collections)),!t.collections.services)return console.error("Services Collection nicht gefunden!"),[];const n=t.collections.services,r=await n.count().exec();console.log("getAllServices: count() =",r);let i=await n.find().exec();if(console.log("getAllServices: find() ohne Filter =",i.length,"Dokumente"),i.length===0&&(i=await n.find({selector:{_deleted:{$ne:!0}}}).exec(),console.log("getAllServices: find() mit _deleted Filter =",i.length,"Dokumente")),i.length===0&&(i=await n.find({selector:{}}).exec(),console.log("getAllServices: find() mit leerem Selector =",i.length,"Dokumente")),i.length===0||i.length<30){console.log(`getAllServices: find() findet nur ${i.length} Services, versuche alle Services ber findOne()...`);const s=((e=Bn.services)==null?void 0:e.map(u=>u.id))||[];console.log(`getAllServices: Versuche ${s.length} bekannte Service-IDs zu laden...`);const l=[];for(const u of s)try{const f=await n.findOne(u).exec();f&&!f._deleted&&l.push(f)}catch(f){console.debug(`getAllServices: Service ${u} nicht gefunden:`,f.message)}l.length>i.length?(i=l,console.log(`getAllServices: Gefunden ber findOne(): ${i.length} von ${s.length} Services`)):l.length>0?(console.log(`getAllServices: findOne() hat ${l.length} Services gefunden, verwende diese`),i=l):console.warn("getAllServices: Auch findOne() findet keine Services!")}if(i.length===0&&n.getAll)try{const s=await n.getAll();console.log("getAllServices: getAll() =",s.length),i=s}catch(s){console.log("getAllServices: getAll() nicht verfgbar oder Fehler:",s.message)}const o=i.map(s=>{const l=s.toJSON();return delete l._meta,delete l._rev,delete l._attachments,l});return console.log("getAllServices: Konvertiert zu JSON:",o.length,"Services"),o.length>0&&console.log("Erste Service:",o[0]),o}catch(t){throw console.error("Fehler beim Laden der Services:",t),console.error("Error Stack:",t.stack),t}},async getServiceById(e){const n=await be().collections.services.findOne(e).exec();return n?n.toJSON():null},async getServicesByType(e){return(await be().collections.services.find({selector:{serviceType:e}}).exec()).map(r=>r.toJSON())},async getSubServices(e){return(await be().collections.services.find({selector:{parentServiceId:e}}).exec()).map(r=>r.toJSON())},async getServicesByIncludedIn(e){return(await be().collections.services.find({selector:{includedIn:{$in:[e]}}}).exec()).map(r=>r.toJSON())},async updateServiceConfig(e,t){try{const n=be(),r=await n.collections.services.findOne(e).exec();if(!r)return console.error(`updateServiceConfig: Service ${e} nicht gefunden`),null;const i=r.toJSON(),o=i.serviceType;o||console.error(` KRITISCH: Service ${e} hat keinen serviceType! Original:`,i);const{serviceType:s,...l}=t;await r.update({$set:{...l,updatedAt:Date.now()}});const u=await n.collections.services.findOne(e).exec(),f=u?u.toJSON():null;if(!f)return console.error(` Service ${e} konnte nach Update nicht geladen werden`),null;if(f.serviceType!==o){console.warn(` serviceType wurde gendert! Original: ${o}, Neu: ${f.serviceType} - setze zurck`),f.serviceType=o;try{await u.update({$set:{serviceType:o}}),console.log(` serviceType in DB korrigiert fr ${e}`)}catch(h){console.warn(" Konnte serviceType in DB nicht korrigieren:",h)}}return console.log(` Service ${e} aktualisiert (serviceType: ${f.serviceType})`),f}catch(n){throw console.error(`updateServiceConfig Fehler fr ${e}:`,n),n}},observeServices(){return be().collections.services.find().$.pipe(yn(t=>t.map(n=>n.toJSON())))},async getAllObjects(){return(await be().collections.objects.find().exec()).map(n=>n.toJSON())},async getObjectById(e){const n=await be().collections.objects.findOne(e).exec();return n?n.toJSON():null},async createObject(e){return(await be().collections.objects.insert({...e,id:e.id||`obj_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:Date.now(),updatedAt:Date.now()})).toJSON()},async updateObject(e,t){var n;try{const r=be(),i=await r.collections.objects.findOne(e).exec();if(!i)return console.error(`updateObject: Object with id ${e} not found`),null;console.log("updateObject: Vor Update:",i.toJSON()),console.log("updateObject: Updates:",t),await i.update({$set:{...t,updatedAt:Date.now()}}),console.log("updateObject: Nach doc.update():",i.toJSON());const o=await r.collections.objects.findOne(e).exec(),s=o?o.toJSON():i.toJSON();return console.log("updateObject: Nach Reload:",s),t.services&&((n=s.services)==null?void 0:n.length)===0&&t.services.length>0?(console.warn("updateObject: Update hat nicht funktioniert, verwende manuelles Merge"),{...s,...t,updatedAt:Date.now()}):s}catch(r){throw console.error("updateObject Fehler:",r),r}},async deleteObject(e){const n=await be().collections.objects.findOne(e).exec();return n?(await n.remove(),!0):!1},observeObjects(){return be().collections.objects.find().$.pipe(yn(t=>t.map(n=>n.toJSON())))},async getAllFactors(){return(await be().collections.factors.find().exec()).map(n=>n.toJSON())},async getFactorsByObjectType(e){return(await be().collections.factors.find({selector:{objectType:e}}).exec()).map(r=>r.toJSON())},async getFactorByName(e){const n=await be().collections.factors.findOne({selector:{name:e}}).exec();return n?n.toJSON():null},async getAllSpecialServices(){var e;try{const t=be();if(console.log("getAllSpecialServices: Start"),!t.collections.specialServices)return console.error("getAllSpecialServices: Collection nicht gefunden!"),[];const n=await t.collections.specialServices.count().exec();console.log("getAllSpecialServices: count() =",n);let r=await t.collections.specialServices.find().exec();if(console.log("getAllSpecialServices: find() =",r.length,"Dokumente"),r.length===0){console.log("getAllSpecialServices: find() leer, versuche findOne() Fallback...");const o=((e=Bn.specialServices)==null?void 0:e.map(l=>l.id))||[],s=[];for(const l of o)try{const u=await t.collections.specialServices.findOne(l).exec();u&&s.push(u)}catch{}r=s,console.log("getAllSpecialServices: findOne() Fallback =",r.length,"von",o.length)}const i=r.map(o=>o.toJSON());return console.log("getAllSpecialServices: Ergebnis =",i.length,"Special Services"),i.length>0&&console.log("Erste SpecialService:",i[0]),i}catch(t){return console.error("getAllSpecialServices Fehler:",t),[]}},async getSpecialServicesByService(e){return(await be().collections.specialServices.find({selector:{affectsService:{$in:[e]}}}).exec()).map(r=>r.toJSON())},async getSpecialServiceById(e){const n=await be().collections.specialServices.findOne(e).exec();return n?n.toJSON():null},async updateSpecialNoteConfig(e,t){try{const n=be(),r=await n.collections.specialServices.findOne(e).exec();if(!r)return console.error(`updateSpecialNoteConfig: SpecialNote ${e} nicht gefunden`),null;await r.update({$set:{...t,updatedAt:Date.now()}});const i=await n.collections.specialServices.findOne(e).exec();return console.log(` SpecialNote ${e} Konfiguration aktualisiert`),i?i.toJSON():null}catch(n){throw console.error(`updateSpecialNoteConfig Fehler fr ${e}:`,n),n}},async saveCalculation(e){return(await be().collections.calculations.insert({...e,id:e.id||`calc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:Date.now()})).toJSON()},async getCalculationsByObject(e){return(await be().collections.calculations.find({selector:{objectId:e}}).exec()).map(r=>r.toJSON())},async deleteCalculationsByObject(e){try{const r=(await be().collections.calculations.find({selector:{objectId:e,_deleted:{$ne:!0}}}).exec()).filter(i=>!i._deleted).map(i=>i.remove().catch(o=>{var s;if(o.status===409||(s=o.message)!=null&&s.includes("CONFLICT"))return console.log(`Berechnung ${i.id} bereits gelscht, berspringe`),null;throw console.error(`Fehler beim Lschen von Berechnung ${i.id}:`,o),o}));await Promise.all(r)}catch(t){console.warn("deleteCalculationsByObject Fehler, versuche alternative Methode:",t.message);try{const i=(await be().collections.calculations.find().exec()).filter(o=>{const s=o.toJSON();return s.objectId===e&&!s._deleted});for(const o of i)try{await o.remove()}catch(s){s.status!==409&&console.error("Fehler beim Lschen:",s)}}catch(n){console.error("Alternative Lschmethode fehlgeschlagen:",n)}}},async saveWorkflow(e){return(await be().collections.workflows.insert({...e,id:e.id||`wf_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:Date.now()})).toJSON()},async getAllWorkflows(){return(await be().collections.workflows.find().sort({day:"asc"}).exec()).map(n=>n.toJSON())},async deleteAllWorkflows(){try{const n=(await be().collections.workflows.find().exec()).filter(r=>!r._deleted).map(r=>r.remove().catch(i=>{var o;if(i.status===409||(o=i.message)!=null&&o.includes("CONFLICT"))return console.log(`Workflow ${r.id} bereits gelscht, berspringe`),null;throw i}));await Promise.all(n)}catch(e){console.warn("deleteAllWorkflows Fehler:",e.message)}},async getCompanySettings(){try{const t=await be().collections.companySettings.findOne("company_settings").exec();return t?t.toJSON():null}catch(e){return console.error("Fehler beim Laden der Company Settings:",e),null}},async saveCompanySettings(e){try{const t=be(),n=await t.collections.companySettings.findOne("company_settings").exec(),r={...e,id:"company_settings",updatedAt:Date.now(),createdAt:n?n.createdAt:Date.now()};if(n){await n.update({$set:r});const i=await t.collections.companySettings.findOne("company_settings").exec();return i?i.toJSON():r}else return await t.collections.companySettings.insert(r),r}catch(t){throw console.error("Fehler beim Speichern der Company Settings:",t),t}},async updateServiceMaterial(e,t,n){try{const r=be(),i=await r.collections.services.findOne(e).exec();if(!i)return console.error(`Service ${e} nicht gefunden`),null;await i.update({$set:{materialType:t,materialValue:n,materialOnboardingCompleted:!0,updatedAt:Date.now()}});const o=await r.collections.services.findOne(e).exec();return o?o.toJSON():null}catch(r){throw console.error("Fehler beim Aktualisieren des Service-Materials:",r),r}}},Il=pt("objects/fetchObjects",async()=>await ge.getAllObjects()),xw=pt("objects/createObject",async e=>await ge.createObject(e)),Su=pt("objects/updateObjectById",async({id:e,updates:t})=>await ge.updateObject(e,t)),Sw=pt("objects/deleteObjectById",async e=>(await ge.deleteObject(e),e)),TI={objects:[],loading:!1,error:null},ww=Co({name:"objects",initialState:TI,reducers:{setObjects:(e,t)=>{e.objects=t.payload},updateObjectServices:(e,t)=>{const{objectId:n,services:r}=t.payload,i=e.objects.findIndex(o=>o.id===n);i!==-1&&(e.objects[i].services=r,e.objects[i].updatedAt=Date.now())},updateObjectSpecialNotes:(e,t)=>{const{objectId:n,specialNotes:r}=t.payload,i=e.objects.findIndex(o=>o.id===n);i!==-1&&(e.objects[i].specialNotes=r,e.objects[i].updatedAt=Date.now())}},extraReducers:e=>{e.addCase(Il.pending,t=>{t.loading=!0,t.error=null}).addCase(Il.fulfilled,(t,n)=>{t.loading=!1,t.objects=n.payload}).addCase(Il.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(xw.fulfilled,(t,n)=>{t.objects.push(n.payload)}).addCase(Su.fulfilled,(t,n)=>{console.log("Redux: updateObjectById fulfilled:",n.payload);const r=t.objects.findIndex(i=>{var o;return i.id===((o=n.payload)==null?void 0:o.id)});r!==-1&&n.payload?(t.objects[r]={...t.objects[r],...n.payload},console.log("Redux: Objekt aktualisiert:",t.objects[r])):console.warn("Redux: Objekt nicht gefunden oder payload null:",n.payload)}).addCase(Su.rejected,(t,n)=>{console.error("Redux: updateObjectById rejected:",n.error)}).addCase(Sw.fulfilled,(t,n)=>{t.objects=t.objects.filter(r=>r.id!==n.payload)})}}),{setObjects:zR,updateObjectServices:Pv,updateObjectSpecialNotes:Ov}=ww.actions,jI=ww.reducer,vn=pt("services/fetchServices",async(e,{rejectWithValue:t})=>{try{const n=await ge.getAllServices();console.log(` fetchServices: ${n.length} Services geladen`);const r=n.filter(s=>{var l,u;return((l=s.serviceType)==null?void 0:l.includes("Shop Leistung"))&&!((u=s.serviceType)!=null&&u.includes("Shop Titel"))}),i=n.filter(s=>{var l;return(l=s.serviceType)==null?void 0:l.includes("Unterleistung Backend")}),o=i.filter(s=>{var l;return!((l=s.serviceType)!=null&&l.includes("Shop Leistung"))});return console.log(` Haupt-Leistungen: ${r.length}, Unterleistungen: ${i.length}, Reine Unterleistungen: ${o.length}`),n}catch(n){return console.error(" Fehler in fetchServices:",n),t(n.message)}}),Iv=pt("services/fetchServiceById",async(e,{rejectWithValue:t})=>{try{return await ge.getServiceById(e)}catch(n){return t(n.message)}});pt("services/fetchSubServices",async(e,{rejectWithValue:t})=>{try{return await ge.getSubServices(e)}catch(n){return t(n.message)}});const Rv=pt("services/updateServiceMaterial",async({serviceId:e,materialType:t,materialValue:n},{rejectWithValue:r})=>{try{return await ge.updateServiceMaterial(e,t,n)}catch(i){return r(i.message)}}),ks=pt("services/updateServiceConfig",async({serviceId:e,config:t},{rejectWithValue:n})=>{try{const r=await ge.updateServiceConfig(e,t);if(!r)throw new Error(`Service ${e} nicht gefunden oder Update fehlgeschlagen`);return console.log(` updateServiceConfig: ${e} aktualisiert`),r}catch(r){return console.error(` updateServiceConfig Fehler fr ${e}:`,r),n(r.message)}}),PI={services:[],loading:!1,error:null},bw=Co({name:"services",initialState:PI,reducers:{setServices:(e,t)=>{e.services=t.payload}},extraReducers:e=>{e.addCase(vn.pending,t=>{t.loading=!0,t.error=null}).addCase(vn.fulfilled,(t,n)=>{if(t.loading=!1,!n.payload){console.warn(" fetchServices: action.payload ist null/undefined, behalte alten State");return}if(n.payload.length===0){console.warn(" fetchServices: Keine Services geladen, behalte alten State");return}if(n.payload.length<t.services.length&&t.services.length>0&&(console.warn(` fetchServices: Nur ${n.payload.length} Services geladen, erwartet mindestens ${t.services.length}. Prfe...`),n.payload.length<10)){console.error(` KRITISCH: Nur ${n.payload.length} Services geladen! Behalte alten State mit ${t.services.length} Services`);return}const r=n.payload.filter(i=>!i.serviceType);r.length>0&&console.error(` KRITISCH: ${r.length} Services ohne serviceType gefunden!`,r.map(i=>i.id)),t.services=n.payload,console.log(` Redux: ${n.payload.length} Services im State aktualisiert`)}).addCase(vn.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||n.error.message,console.error(" Redux: fetchServices rejected:",n.payload)}).addCase(Iv.fulfilled,(t,n)=>{if(n.payload){const r=t.services.findIndex(i=>i.id===n.payload.id);r!==-1?t.services[r]=n.payload:t.services.push(n.payload)}}).addCase(Iv.rejected,(t,n)=>{console.error(" fetchServiceById rejected:",n.payload)}).addCase(Rv.fulfilled,(t,n)=>{if(n.payload){const r=t.services.findIndex(i=>i.id===n.payload.id);r!==-1&&(t.services[r]={...t.services[r],...n.payload,serviceType:t.services[r].serviceType})}}).addCase(Rv.rejected,(t,n)=>{console.error(" updateServiceMaterial rejected:",n.payload)}).addCase(ks.pending,t=>{}).addCase(ks.fulfilled,(t,n)=>{if(n.payload){const r=t.services.findIndex(o=>o.id===n.payload.id),i=t.services.length;if(r!==-1){const o=t.services[r],s=o==null?void 0:o.serviceType,l=n.payload.serviceType,u=s||l;u||console.error(` KRITISCH: Service ${n.payload.id} hat keinen serviceType!`),t.services[r]={...o,...n.payload,serviceType:u},console.log(` Redux: Service ${n.payload.id} aktualisiert (serviceType: ${u}, Total Services: ${t.services.length})`),t.services.length<i&&console.error(` KRITISCH: State wurde kleiner! Vorher: ${i}, Nachher: ${t.services.length}`)}else console.warn(` Service ${n.payload.id} nicht in Redux State gefunden (${t.services.length} Services im State), fge hinzu`),t.services.push(n.payload),console.log(` Service hinzugefgt, jetzt ${t.services.length} Services im State`)}else console.error(" updateServiceConfig.fulfilled: action.payload ist null/undefined!")}).addCase(ks.rejected,(t,n)=>{t.error=n.payload,console.error(" updateServiceConfig rejected:",n.payload)})}}),{setServices:$R}=bw.actions,OI=bw.reducer,Rl=pt("settings/fetchFactors",async()=>await ge.getAllFactors()),Pr=pt("settings/fetchSpecialServices",async()=>{console.log("fetchSpecialServices: Start");const e=await ge.getAllSpecialServices();return console.log("fetchSpecialServices: Geladen",e.length,"Special Services"),e}),II={factors:[],specialServices:[],customerApproval:!1,loading:!1,error:null},_w=Co({name:"settings",initialState:II,reducers:{setCustomerApproval:(e,t)=>{e.customerApproval=t.payload}},extraReducers:e=>{e.addCase(Rl.pending,t=>{t.loading=!0}).addCase(Rl.fulfilled,(t,n)=>{t.loading=!1,t.factors=n.payload}).addCase(Rl.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(Pr.pending,t=>{console.log("Redux: fetchSpecialServices pending")}).addCase(Pr.fulfilled,(t,n)=>{t.specialServices=n.payload,console.log(" Redux: specialServices aktualisiert:",n.payload.length),n.payload.length>0&&console.log("Erste SpecialService in Redux:",n.payload[0])}).addCase(Pr.rejected,(t,n)=>{console.error(" Redux: fetchSpecialServices rejected:",n.error)})}}),{setCustomerApproval:RI}=_w.actions,DI=_w.reducer,AI=pt("calculations/saveCalculation",async e=>await ge.saveCalculation(e)),NI=pt("calculations/fetchCalculationsByObject",async e=>await ge.getCalculationsByObject(e)),MI={calculations:[],results:null,loading:!1,error:null},kw=Co({name:"calculations",initialState:MI,reducers:{setResults:(e,t)=>{e.results=t.payload},clearResults:e=>{e.results=null,e.calculations=[]}},extraReducers:e=>{e.addCase(AI.fulfilled,(t,n)=>{const r=t.calculations.findIndex(i=>i.id===n.payload.id);r!==-1?t.calculations[r]=n.payload:t.calculations.push(n.payload)}).addCase(NI.fulfilled,(t,n)=>{t.calculations=n.payload})}}),{setResults:BI,clearResults:LR}=kw.actions,zI=kw.reducer,$I=pt("workflow/saveWorkflow",async e=>await ge.saveWorkflow(e)),LI=pt("workflow/fetchWorkflows",async()=>await ge.getAllWorkflows()),FI={workflows:[],optimalEmployees:1,loading:!1,error:null},Ew=Co({name:"workflow",initialState:FI,reducers:{setOptimalEmployees:(e,t)=>{e.optimalEmployees=t.payload}},extraReducers:e=>{e.addCase($I.fulfilled,(t,n)=>{const r=t.workflows.findIndex(i=>i.id===n.payload.id);r!==-1?t.workflows[r]=n.payload:t.workflows.push(n.payload)}).addCase(LI.fulfilled,(t,n)=>{t.workflows=n.payload})}}),{setOptimalEmployees:FR}=Ew.actions,UI=Ew.reducer,Es=pt("companySettings/fetch",async()=>{try{return await ge.getCompanySettings()||xu}catch(e){return console.error("Fehler beim Laden der Unternehmens-Einstellungen:",e),xu}}),Cw=pt("companySettings/save",async e=>await ge.saveCompanySettings(e)),KI={settings:null,loading:!1,error:null},Tw=Co({name:"companySettings",initialState:KI,reducers:{setSettings:(e,t)=>{e.settings=t.payload}},extraReducers:e=>{e.addCase(Es.pending,t=>{t.loading=!0,t.error=null}).addCase(Es.fulfilled,(t,n)=>{t.loading=!1,t.settings=n.payload}).addCase(Es.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(Cw.fulfilled,(t,n)=>{t.settings=n.payload})}}),{setSettings:UR}=Tw.actions,WI=Tw.reducer,rp=Nk({reducer:{objects:jI,services:OI,settings:DI,calculations:zI,workflow:UI,companySettings:WI},middleware:e=>e({serializableCheck:{ignoredActions:["objects/setObjects","services/setServices"]}})});function Dv(e){if(!e||e===""||e==="-")return{type:"none",value:0};const t=e.trim();if(t.includes("")){const r=t.match(/([0-9]+[,.]?[0-9]*)/);if(r)return{type:"fixed",value:parseFloat(r[1].replace(",","."))}}if(t.includes("%")){const r=t.match(/\+?\s*([0-9]+)/);if(r)return{type:"percent",value:parseInt(r[1],10)}}const n=t.match(/^1[,.]([0-9]+)$/);if(n){const r=n[1];let i;return r.length===1?i=parseInt(r,10)*10:i=parseInt(r,10),{type:"percent",value:i}}if(t.match(/^[0-9]+\s*%/)){const r=t.match(/^([0-9]+)/);if(r)return{type:"percent",value:parseInt(r[1],10)}}return console.warn(`Unbekanntes Material-Format: "${e}"`),{type:"none",value:0}}async function qI(e,t){const n=e.collections.services,r=await n.count().exec();r>0&&(console.log(`Services bereits vorhanden (${r}), lsche alte Daten...`),await n.find().remove(),console.log("Alte Services gelscht")),console.log("Seeding",t.length,"Services...");try{const i=t.map(u=>{const f=Dv(u.materialStandard),h={...u,parentServiceId:u.parentServiceId||"",serviceType:u.serviceType||"",variant:u.variant||"",includedIn:u.includedIn||[],unit:u.unit||"",formula:u.formula||"",materialStandard:u.materialStandard||"",materialType:u.materialType||f.type,materialValue:u.materialValue!==void 0?u.materialValue:f.value,createdAt:Date.now(),updatedAt:Date.now()};return u.materialStandard&&f.type!=="none"&&console.log(` ${u.title}: "${u.materialStandard}"  ${f.type} ${f.value}${f.type==="percent"?"%":""}`),Array.isArray(h.includedIn)||(h.includedIn=[]),h});console.log("Erstes Service-Dokument:",JSON.stringify(i[0],null,2));let o=0,s=0;for(const u of i)try{if(await n.findOne(u.id).exec()){console.log(`Dokument ${u.id} existiert bereits, berspringe`),o++;continue}if(await n.insert(u),o++,o%10===0){const h=await n.count().exec();console.log(`Fortschritt: ${o}/${i.length} eingefgt, ${h} in DB`)}}catch(f){s++,console.error(`Fehler beim Insert von ${u.id}:`,f.message),s<=3&&console.error("Vollstndiger Fehler:",f)}console.log(` ${o} von ${i.length} Services eingefgt (${s} Fehler)`),await new Promise(u=>setTimeout(u,200));const l=await n.count().exec();if(console.log(` ${l} Services in DB nach Insert`),l===0&&o>0){console.error(" PROBLEM: Services wurden eingefgt, aber count() gibt 0 zurck!");const u=await n.findOne(i[0].id).exec();u?console.log("Aber findOne() findet das Dokument:",u.id):console.error("Auch findOne() findet nichts!")}if(l>0){const u=await n.findOne(i[0].id).exec();u?console.log(" Erstes Dokument verifiziert:",u.id,u.title):console.error(" Erstes Dokument nicht gefunden trotz count > 0!")}}catch(i){console.error(" Fehler beim Speichern der Services:",i),console.error("Error Details:",i.message),console.log("Versuche einzelnes Einfgen mit upsert...");let o=0;for(let l=0;l<t.length;l++)try{const u=t[l],f=Dv(u.materialStandard),h={...u,parentServiceId:u.parentServiceId||"",serviceType:u.serviceType||"",variant:u.variant||"",includedIn:u.includedIn||[],unit:u.unit||"",formula:u.formula||"",materialStandard:u.materialStandard||"",materialType:u.materialType||f.type,materialValue:u.materialValue!==void 0?u.materialValue:f.value,createdAt:Date.now(),updatedAt:Date.now()};await n.upsert(h),o++}catch(u){console.error(`Fehler bei Service ${l} (${t[l].id}):`,u.message)}const s=await n.count().exec();console.log(`Nach einzelnem Insert: ${s} Services in DB (${o} erfolgreich)`)}}async function VI(e,t){var o;const n=e.collections.specialServices;console.log("Seeding",t.length,"Special Services...");let r=0;for(const s of t)try{const l={...s,requiredService:s.requiredService||null,affectsService:s.affectsService||[],affectsArea:s.affectsArea||[],objectType:s.objectType||[],category:s.category||null,inputType:s.inputType||null,source:s.source||null,uxDescription:s.uxDescription||null,factor:s.factor||null,updatedAt:Date.now()},u=await n.findOne(s.id).exec();u?(l.createdAt=u.createdAt||Date.now(),await n.upsert(l),console.log(`SpecialService ${s.id} aktualisiert`)):(l.createdAt=Date.now(),await n.upsert(l),console.log(`SpecialService ${s.id} eingefgt`)),r++}catch(l){(o=l.message)!=null&&o.includes("CONFLICT")||l.status===409?(console.log(`SpecialService ${s.id} existiert bereits, berspringe`),r++):console.error(` Fehler beim Einfgen von SpecialService ${s.id}:`,l.message)}let i=0;try{i=await n.count().exec()}catch{for(const l of t)await n.findOne(l.id).exec()&&i++}console.log(` ${r} von ${t.length} Special Services verarbeitet. DB-Count (via count/findOne): ${i}`)}async function HI(e,t){const n=e.collections.factors;if(await n.count().exec()>0){console.log("Factors bereits vorhanden, berspringe Seeding");return}const i=t.map(o=>({...o,createdAt:Date.now(),updatedAt:Date.now()}));await n.bulkInsert(i),console.log(` ${i.length} Factors gespeichert`)}async function Av(e,t){try{t.services&&t.services.length>0&&await qI(e,t.services),t.specialServices&&t.specialServices.length>0&&await VI(e,t.specialServices),t.factors&&t.factors.length>0&&await HI(e,t.factors),console.log(" Alle Daten erfolgreich gespeichert")}catch(n){throw console.error(" Fehler beim Seeding:",n),n}}function QI(e){return 4*Math.sqrt(e)}function GI(e,t,n=1){return e*n*t}function YI(e,t){return t===0?0:e/t}function JI(e,t,n){return YI(e,t)*n}async function XI(e){var l,u;const t=e.floorArea,n=QI(e.floorArea),r=await ge.getFactorsByObjectType(e.type),i=((l=r.find(f=>f.category==="Mengen"))==null?void 0:l.factor)||1,o=((u=r.find(f=>f.category==="Leistung"))==null?void 0:u.factor)||1,s=GI(n,e.height,i);return{ceilingArea:t,perimeter:n*i,wallArea:s,quantityFactor:i,serviceFactor:o}}async function ZI(e){const t=await ge.getServiceById(e);if(!t)return[];const n=[t],r=await ge.getAllServices();let i=[];if(t.includedSubServices&&t.includedSubServices.length>0){console.log(` Unterleistungen fr "${t.title}" (aus Onboarding-Konfiguration):`);for(const o of t.includedSubServices){const s=r.find(l=>l.id===o);s&&(i.push(s),console.log(`    ${s.title}`))}}else i=r.filter(o=>{var s;return!o.includedIn||!Array.isArray(o.includedIn)||!((s=o.serviceType)!=null&&s.includes("Unterleistung Backend"))?!1:o.includedIn.includes(e)}),i.length>0&&(console.log(` Unterleistungen fr "${t.title}" (aus Stammdaten):`),i.forEach(o=>console.log(`   - ${o.title}`)));return n.push(...i),n}async function eR(e,t){const n=await ge.getServiceById(e);if(!n)return console.warn(`Service ${e} nicht gefunden`),0;let r=0;if(n.standardValuePerUnit&&n.standardValuePerUnit>0)r=n.standardValuePerUnit*t,console.log(` ${n.title}: ${n.standardValuePerUnit} min/Einheit  ${t} = ${r.toFixed(2)} min`);else if(n.standardTime&&n.standardQuantity&&n.standardQuantity>0)r=JI(n.standardTime,n.standardQuantity,t),console.log(` ${n.title}: (${n.standardTime} min / ${n.standardQuantity})  ${t} = ${r.toFixed(2)} min (Fallback)`);else return console.warn(` ${n.title}: Keine Zeitwerte konfiguriert (standardValuePerUnit oder standardTime/standardQuantity)`),0;return n.minTime&&n.minTime>0&&r<n.minTime&&(console.log(` ${n.title}: Mindestzeit angewendet: ${r.toFixed(2)} min  ${n.minTime} min`),r=n.minTime),r}async function tR(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const r=await ge.getSpecialServiceById(n);if(r&&r.requiredService){const i=await ge.getServiceById(r.requiredService);i&&!t.includes(r.requiredService)&&(t.push(r.requiredService),console.log(`Sonderangabe "${r.title}" aktiviert Zusatzleistung: "${i.title}"`))}}return t}async function nR(e,t){const n=await ge.getSpecialServiceById(e);return n?!n.affectsService||n.affectsService.length===0?!0:n.affectsService.includes(t):!1}const rR=8,iR=60,jw=rR*iR,oR=["Wohnzimmer","Flur","Bad","Treppenhaus","Kche","Schlafzimmer","Bro","Andere"];async function sR(e,t,n){if(!n)return console.log(" Effizienz: Keine Kundenfreigabe  Faktor 1.0"),1;const r=await ge.getServiceById(e);if(!r)return 1;const{efficiencyStart:i,efficiencyCap:o,efficiencyStepPercent:s,maxProductivityPerDay:l}=r;if(!i||i<=0)return console.log(` ${r.title}: Keine Effizienz-Konfiguration (efficiencyStart nicht gesetzt)`),1;if(!l||l<=0)return console.log(` ${r.title}: Keine Effizienz-Konfiguration (maxProductivityPerDay nicht gesetzt)`),1;if(t<i)return console.log(` ${r.title}: Menge ${t} < Start ${i}  Faktor 1.0`),1;const u=jw/l,f=s||1,h=i*(f/100);let S=1+(h>0?Math.floor((t-i)/h):0)*(f/100);o&&o>0&&t>o&&(S=1+(h>0?Math.floor((o-i)/h):0)*(f/100),console.log(` ${r.title}: Menge ${t} > Cap ${o}  gedeckelt`));const E=Math.max(S,u);return console.log(` ${r.title}: Effizienz berechnet  Faktor ${E.toFixed(2)} (Menge: ${t}, Start: ${i}, Step: ${f}%)`),E}async function aR(e){return[...e].sort((t,n)=>t.serviceId.localeCompare(n.serviceId))}async function lR(e){const t=[];for(const n of e){const r=await ge.getServiceById(n.serviceId);r&&r.waitTime&&t.push({serviceId:n.serviceId,objectId:n.objectId,duration:r.waitTime,startTime:n.finalTime})}return t}function uR(e){if(e<=8)return 1;const t=Math.ceil(e/8);return e/t<4?Math.max(1,Math.floor(e/4)):t}async function cR(e,t){const n=await aR(e),r=await lR(n),i=[];let o={day:1,hours:0,minutes:0,tasks:[],waitTimes:[]};for(const u of n){u.finalTime/60,o.minutes+u.finalTime>jw&&(i.push(o),o={day:i.length+1,hours:0,minutes:0,tasks:[],waitTimes:[]}),o.minutes+=u.finalTime,o.hours=o.minutes/60,o.tasks.push({calculationId:u.id,serviceId:u.serviceId,objectId:u.objectId,time:u.finalTime});const f=r.find(h=>h.serviceId===u.serviceId);f&&o.waitTimes.push(f)}o.tasks.length>0&&i.push(o);const s=i.reduce((u,f)=>u+f.hours,0),l=uR(s);await ge.deleteAllWorkflows();for(const u of i)await ge.saveWorkflow({day:u.day,hours:u.hours,employees:l,calculationIds:u.tasks.map(f=>f.calculationId),waitTimes:u.waitTimes,parallelWork:[]});return{days:i,totalDays:i.length,totalHours:s,optimalEmployees:l}}function fR(e,t,n,r){const i=r||xu,o=e/60,s=o*i.laborRate;let l=0;return n.materialType==="percent"&&n.materialValue?l=s*(n.materialValue/100):n.materialType==="fixed"&&n.materialValue&&(l=t*n.materialValue),{hours:o,laborCost:Math.round(s*100)/100,materialCost:Math.round(l*100)/100,totalCost:Math.round((s+l)*100)/100}}async function dR(){const e=rp.getState(),{objects:t}=e.objects,{customerApproval:n}=e.settings,r=await ge.getCompanySettings()||xu;if(console.log("Preiskalkulation mit Einstellungen:",r),!t||t.length===0)return null;for(const s of t)try{await ge.deleteCalculationsByObject(s.id)}catch(l){console.warn(`Fehler beim Lschen von Berechnungen fr Objekt ${s.id}:`,l.message)}const i={objects:[],totalTime:0,totalDays:0,totalLaborCost:0,totalMaterialCost:0,totalCost:0,siteSetupCost:0,siteClearanceCost:0},o=[];for(const s of t){const l={id:s.id,name:s.name,type:s.type,quantities:{},services:[],specialNotes:[],totalTime:0,totalLaborCost:0,totalMaterialCost:0,totalCost:0},u=await XI(s);l.quantities=u;const f=await tR(s.specialNotes||[]);if(console.log(`Objekt "${s.name}": ${f.length} Zusatzleistungen aus Sonderangaben`),s.specialNotes&&s.specialNotes.length>0)for(const g of s.specialNotes){const S=await ge.getSpecialServiceById(g);S&&l.specialNotes.push({id:S.id,title:S.title,factor:S.factor||1,uxDescription:S.uxDescription||null,requiredService:S.requiredService||null})}const h=[...s.services||[]];for(const g of f)h.includes(g)||h.push(g);const y=new Set;for(const g of h){const S=await ZI(g),E=S[0],P=(E==null?void 0:E.title)||"";for(let A=0;A<S.length;A++){const w=S[A],b=A>0;if(y.has(w.id))continue;y.add(w.id);let k=1;if(w.unit==="m"){const ke=w.title.includes("Wand")||w.title.includes("Wnde"),bn=w.title.includes("Decke")||w.title.includes("Decken"),kt=w.title.includes("Boden");ke&&bn?k=u.wallArea+u.ceilingArea:bn||kt?k=u.ceilingArea:k=u.wallArea}let C=await eR(w.id,k),T=1;for(const ke of s.specialNotes||[])if(await nR(ke,g)){const kt=await ge.getSpecialServiceById(ke);kt&&!kt.requiredService&&kt.factor&&kt.factor!==1&&(T*=kt.factor)}C=C*T;const z=await sR(w.id,k,n),U=C/z*u.serviceFactor,q=fR(U,k,w,r),X=await ge.saveCalculation({objectId:s.id,serviceId:w.id,quantity:k,quantityType:w.title.includes("Decke")?"ceiling":"walls",baseTime:C,efficiency:z,finalTime:U,laborCost:q.laborCost,materialCost:q.materialCost,totalCost:q.totalCost,factors:{quantityFactor:u.quantityFactor,serviceFactor:u.serviceFactor},specialNotes:s.specialNotes||[]});o.push(X);const oe=f.includes(w.id),Ce=w.standardValuePerUnit?w.standardValuePerUnit*k:w.standardTime&&w.standardQuantity?w.standardTime/w.standardQuantity*k:0,Ae=w.minTime&&w.minTime>0&&Ce<w.minTime;l.services.push({serviceId:w.id,serviceName:w.title,quantity:k,unit:w.unit,baseTime:C,efficiency:z,finalTime:U,serviceFactor:u.serviceFactor,specialNoteFactor:T!==1?T:null,isFromSpecialNote:oe,isSubService:b,parentServiceName:b?P:null,hours:q.hours,laborCost:q.laborCost,materialCost:q.materialCost,totalCost:q.totalCost,standardValuePerUnit:w.standardValuePerUnit||null,calculatedBaseTime:Ce,minTime:w.minTime||null,minTimeApplied:Ae,waitTime:w.waitTime||null,materialType:w.materialType||"none",materialValue:w.materialValue||0,efficiencyStart:w.efficiencyStart||null,efficiencyCap:w.efficiencyCap||null,efficiencyStepPercent:w.efficiencyStepPercent||null,maxProductivityPerDay:w.maxProductivityPerDay||null}),l.totalTime+=U,l.totalLaborCost+=q.laborCost,l.totalMaterialCost+=q.materialCost,l.totalCost+=q.totalCost}}i.objects.push(l),i.totalTime+=l.totalTime,i.totalLaborCost+=l.totalLaborCost,i.totalMaterialCost+=l.totalMaterialCost,i.totalCost+=l.totalCost}if(r.siteSetup>0){const s=r.siteSetup/60;i.siteSetupCost=Math.round(s*r.laborRate*100)/100,i.totalTime+=r.siteSetup,i.totalLaborCost+=i.siteSetupCost,i.totalCost+=i.siteSetupCost}if(r.siteClearance>0){const s=r.siteClearance/60;i.siteClearanceCost=Math.round(s*r.laborRate*100)/100,i.totalTime+=r.siteClearance,i.totalLaborCost+=i.siteClearanceCost,i.totalCost+=i.siteClearanceCost}if(o.length>0){const s=await cR(o);i.totalDays=s.totalDays,i.optimalEmployees=s.optimalEmployees}return i.totalLaborCost=Math.round(i.totalLaborCost*100)/100,i.totalMaterialCost=Math.round(i.totalMaterialCost*100)/100,i.totalCost=Math.round(i.totalCost*100)/100,console.log("Kalkulation abgeschlossen:",{totalTime:`${Math.round(i.totalTime)} min`,totalLaborCost:`${i.totalLaborCost} `,totalMaterialCost:`${i.totalMaterialCost} `,totalCost:`${i.totalCost} `}),rp.dispatch(BI(i)),i}function pR(){const e=nr(),t=_e(l=>l.objects.objects),n=_e(l=>l.objects.loading),[r,i]=ue.useState({name:"",type:"Wohnzimmer",floorArea:"",height:"2.5"}),o=l=>{if(l.preventDefault(),!r.name||!r.floorArea){alert("Bitte fllen Sie alle Felder aus");return}e(xw({name:r.name,type:r.type,floorArea:parseFloat(r.floorArea),height:parseFloat(r.height),services:[],specialNotes:[]})),i({name:"",type:"Wohnzimmer",floorArea:"",height:"2.5"})},s=l=>{window.confirm("Mchten Sie dieses Objekt wirklich lschen?")&&e(Sw(l))};return n?d.jsx("div",{className:"loading",children:"Lade Objekte..."}):d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:"Objekte hinzufgen"}),d.jsxs("form",{onSubmit:o,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Objektname:"}),d.jsx("input",{type:"text",value:r.name,onChange:l=>i({...r,name:l.target.value}),placeholder:"z.B. Wohnzimmer",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Objekttyp:"}),d.jsx("select",{value:r.type,onChange:l=>i({...r,type:l.target.value}),children:oR.map(l=>d.jsx("option",{value:l,children:l},l))})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Grundflche (m):"}),d.jsx("input",{type:"number",step:"0.1",value:r.floorArea,onChange:l=>i({...r,floorArea:l.target.value}),placeholder:"z.B. 25",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Raumhhe (m):"}),d.jsx("input",{type:"number",step:"0.1",value:r.height,onChange:l=>i({...r,height:l.target.value}),placeholder:"z.B. 2.5",required:!0})]}),d.jsx("button",{type:"submit",children:"Objekt hinzufgen"})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsxs("h3",{children:["Hinzugefgte Objekte (",t.length,")"]}),t.length===0?d.jsx("p",{children:"Noch keine Objekte hinzugefgt"}):d.jsx("ul",{style:{listStyle:"none",padding:0},children:t.map(l=>d.jsxs("li",{style:{padding:"10px",marginBottom:"10px",background:"#f9f9f9",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("strong",{children:l.name})," (",l.type,") - ",l.floorArea," m, Hhe: ",l.height," m"]}),d.jsx("button",{onClick:()=>s(l.id),style:{background:"#dc3545"},children:"Lschen"})]},l.id))})]})]})}function hR(){const e=nr(),t=_e(l=>l.objects.objects),n=_e(l=>l.services.services),r=_e(l=>l.services.loading);ue.useEffect(()=>{e(vn())},[e]);const i=ue.useMemo(()=>n.filter(l=>l.serviceType?l.serviceType.includes("Shop Titel Leistung")||l.serviceType.includes("Shop Leistung"):!1),[n]),o=l=>n.filter(u=>u.includedIn&&u.includedIn.includes(l)&&u.serviceType==="Unterleistung Backend");ue.useEffect(()=>{console.log("=== ServiceSelector Debug ==="),console.log("Services in Redux:",n.length),console.log("Shop Services gefiltert:",i.length),console.log("servicesLoading:",r),n.length>0?(console.log("Alle Service-Typen:",n.map(l=>l.serviceType)),console.log("Erste 5 Services:",n.slice(0,5).map(l=>({id:l.id,title:l.title,type:l.serviceType})))):console.warn(" Keine Services in Redux State!")},[n,i,r]);const s=(l,u)=>{console.log("handleServiceToggle:",{objectId:l,serviceId:u});const f=t.find(S=>S.id===l);if(!f){console.error("Objekt nicht gefunden:",l);return}const h=f.services||[],y=h.includes(u);console.log("Aktueller Status:",{isSelected:y,currentServices:h});const g=y?h.filter(S=>S!==u):[...h,u];console.log("Neue Services:",g),e(Pv({objectId:l,services:g})),e(Su({id:l,updates:{services:g}})).then(S=>{console.log("updateObjectById erfolgreich:",S)}).catch(S=>{console.error("Fehler bei updateObjectById:",S),e(Pv({objectId:l,services:h}))})};return r?d.jsx("div",{className:"loading",children:"Lade Leistungen..."}):t.length===0?d.jsx("div",{className:"card",children:d.jsx("p",{children:"Bitte fgen Sie zuerst ein Objekt hinzu."})}):d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:"Leistungen zuweisen"}),t.map(l=>d.jsxs("div",{style:{marginBottom:"30px",padding:"15px",background:"#f9f9f9",borderRadius:"4px"},children:[d.jsx("h3",{children:l.name}),i.length===0?d.jsx("p",{children:"Keine Leistungen verfgbar. Bitte laden Sie zuerst Leistungen."}):d.jsx("div",{children:i.map(u=>{const f=(l.services||[]).includes(u.id),h=o(u.id);return d.jsxs("div",{style:{marginBottom:"15px"},children:[d.jsxs("label",{style:{display:"block",fontWeight:f?"bold":"normal"},children:[d.jsx("input",{type:"checkbox",checked:f,onChange:()=>s(l.id,u.id)}),d.jsx("span",{style:{marginLeft:"8px"},children:u.title})]}),f&&h.length>0&&d.jsxs("div",{style:{marginLeft:"28px",marginTop:"8px",padding:"10px",background:"#e8f5e9",borderRadius:"4px",borderLeft:"3px solid #4CAF50"},children:[d.jsx("div",{style:{fontSize:"12px",color:"#2e7d32",marginBottom:"5px",fontWeight:"bold"},children:" Enthaltene Unterleistungen:"}),h.map(y=>d.jsxs("div",{style:{fontSize:"13px",color:"#555",padding:"3px 0",display:"flex",alignItems:"center"},children:[d.jsx("span",{style:{color:"#4CAF50",marginRight:"6px"},children:""}),y.title,y.variant&&d.jsxs("span",{style:{color:"#888",fontSize:"11px",marginLeft:"8px"},children:["(",y.variant,")"]})]},y.id))]})]},u.id)})})]},l.id))]})}function mR(){const e=nr(),t=_e(u=>u.objects.objects),n=_e(u=>u.services.services),r=_e(u=>u.settings.specialServices);ue.useEffect(()=>{console.log("SpecialNotesSelector: Lade specialServices..."),e(Pr())},[e]),ue.useEffect(()=>{console.log("=== SpecialNotesSelector Debug ==="),console.log("specialServices in Redux:",r.length),console.log("objects:",t.length),t.length>0&&console.log("Erstes Objekt services:",t[0].services),r.length>0?(console.log("Erste SpecialService:",r[0]),console.log("Alle SpecialService IDs:",r.map(u=>u.id))):console.warn(" Keine SpecialServices geladen!")},[r,t]);const i=u=>{if(console.log("getRelevantSpecialNotes fr services:",u),!u||u.length===0)return console.log("Keine Services ausgewhlt, zeige keine Sonderangaben"),[];const f=r.filter(h=>{if(!h.affectsService||h.affectsService.length===0)return!0;const y=h.affectsService.some(g=>u.includes(g));return y&&console.log(`   ${h.title} ist relevant fr`,h.affectsService),y});return console.log("Relevante Sonderangaben:",f.length),f},o=u=>{if(!u)return null;const f=n.find(h=>h.id===u);return f?f.title:null},s=(u,f)=>{const h=t.find(E=>E.id===u);if(!h)return;const y=h.specialNotes||[],S=y.includes(f)?y.filter(E=>E!==f):[...y,f];e(Ov({objectId:u,specialNotes:S})),e(Su({id:u,updates:{specialNotes:S}})).catch(E=>{console.error("Fehler bei updateObjectById:",E),e(Ov({objectId:u,specialNotes:y}))})},l=ue.useMemo(()=>{const u=t.some(f=>i(f.services||[]).length>0);return console.log("hasRelevantObjects:",u),u},[t,r]);return r.length===0?(console.log("SpecialNotesSelector: NICHT GERENDERT - specialServices.length === 0"),d.jsx("div",{className:"card",style:{background:"#fff3cd",border:"1px solid #ffc107"},children:d.jsx("p",{children:" Debug: Keine Sonderangaben geladen. Prfen Sie die Konsole."})})):l?d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:" Sonderangaben pro Raum"}),d.jsx("p",{style:{color:"#666",marginBottom:"20px",fontSize:"14px"},children:"Bitte geben Sie an, welche besonderen Umstnde in den Rumen vorliegen. Diese beeinflussen die Kalkulation und fgen ggf. zustzliche Leistungen hinzu."}),t.map(u=>{const f=i(u.services||[]);return f.length===0?null:d.jsxs("div",{style:{marginBottom:"25px",padding:"15px",background:"#f9f9f9",borderRadius:"8px"},children:[d.jsxs("h3",{style:{marginBottom:"15px"},children:[u.name," (",u.type,")"]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:f.map(h=>{const y=(u.specialNotes||[]).includes(h.id),g=o(h.requiredService);return d.jsx("div",{style:{padding:"12px",background:y?"#fff3e0":"white",border:y?"2px solid #ff9800":"1px solid #ddd",borderRadius:"6px",cursor:"pointer"},onClick:()=>s(u.id,h.id),children:d.jsxs("label",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[d.jsx("input",{type:"checkbox",checked:y,onChange:()=>{},style:{marginRight:"12px",marginTop:"3px"}}),d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:h.title}),h.uxDescription&&d.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"6px"},children:h.uxDescription}),y&&g&&d.jsxs("div",{style:{fontSize:"12px",color:"#e65100",background:"#fff8e1",padding:"6px 10px",borderRadius:"4px",marginTop:"8px"},children:[" Aktiviert Zusatzleistung: ",d.jsx("strong",{children:g})]}),y&&h.factor&&h.factor!==1&&d.jsxs("div",{style:{fontSize:"12px",color:"#1565c0",background:"#e3f2fd",padding:"6px 10px",borderRadius:"4px",marginTop:"4px"},children:[" Zeitfaktor: ",h.factor]})]})]})},h.id)})})]},u.id)})]}):(console.log("SpecialNotesSelector: NICHT GERENDERT - keine relevanten Objekte"),d.jsx("div",{className:"card",style:{background:"#e3f2fd",border:"1px solid #2196F3"},children:d.jsx("p",{children:' Whlen Sie eine Leistung wie "berholungsanstrich" aus, um Sonderangaben zu sehen.'})}))}function yR(){const e=nr(),t=_e(n=>n.settings.customerApproval);return d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:"Kundenfreigabe"}),d.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[d.jsx("input",{type:"checkbox",checked:t,onChange:n=>e(RI(n.target.checked)),style:{marginRight:"10px",width:"20px",height:"20px"}}),d.jsxs("div",{children:[d.jsx("strong",{children:"Freigabe fr parallele Arbeiten an mehreren Objekten"}),d.jsx("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"14px"},children:"Wenn aktiviert, knnen Effizienzsteigerungen bei greren Mengen angewendet werden. Mehrere Objekte knnen gleichzeitig bearbeitet werden."})]})]})]})}function vR({object:e,services:t,quantities:n,customerApproval:r,specialNotesData:i}){var u,f,h,y;if(!e||!n)return null;const o=[],s=i||[];o.push({number:1,title:"Leistungserfassung",description:"Fr die ausgewhlte Hauptleistung wurden automatisch alle zugehrigen Unterleistungen hinzugefgt.",details:t&&t.length>0?`Gefundene Leistungen: ${t.map(g=>g.serviceName).join(", ")}`:"Keine Leistungen gefunden"}),o.push({number:3,title:"Mengenberechnung Decke",description:"Die Deckenflche wird direkt aus der Grundflche bernommen (1:1).",details:`Grundflche: ${e.floorArea} m  Deckenflche: ${((u=n.ceilingArea)==null?void 0:u.toFixed(2))||0} m`});const l=4*Math.sqrt(e.floorArea);if(o.push({number:4,title:"Mengenberechnung Raumumfang",description:"Der Umfang wird berechnet mit der Formel: Umfang = 4  (Grundflche).",details:`Berechnung: 4  ${e.floorArea} = ${l.toFixed(2)} m`}),n.quantityFactor!==1||n.serviceFactor!==1?o.push({number:5,title:"Objekttyp-Faktoren anwenden",description:`Fr den Objekttyp "${e.type}" wurden spezifische Faktoren angewendet.`,details:n.quantityFactor!==1?`Mengenfaktor: ${n.quantityFactor} (angewendet auf Umfang)  Neuer Umfang: ${((f=n.perimeter)==null?void 0:f.toFixed(2))||0} m`:`Kein Mengenfaktor fr ${e.type}`,additionalDetails:n.serviceFactor!==1?`Leistungsfaktor: ${n.serviceFactor} (wird auf die Arbeitszeit angewendet)`:`Kein Leistungsfaktor fr ${e.type}`}):o.push({number:5,title:"Objekttyp-Faktoren prfen",description:`Fr den Objekttyp "${e.type}" wurden keine speziellen Faktoren gefunden.`,details:"Standardfaktoren (1.0) werden verwendet."}),o.push({number:6,title:"Mengenberechnung Wandflchen",description:"Die Wandflche wird berechnet: Wandflche = Umfang  Raumhhe.",details:`Berechnung: ${((h=n.perimeter)==null?void 0:h.toFixed(2))||0} m  ${e.height} m = ${((y=n.wallArea)==null?void 0:y.toFixed(2))||0} m`}),s&&s.length>0){const g=s.filter(w=>w.factor&&w.factor!==1),S=s.filter(w=>w.requiredService),E=s.filter(w=>(!w.factor||w.factor===1)&&!w.requiredService);let P=`${s.length} Sonderangabe(n) ausgewhlt:`,A="";g.length>0&&(A+=`

 Zeitfaktoren angewendet:
`,g.forEach(w=>{A+=` "${w.title}": Faktor ${w.factor} (${((w.factor-1)*100).toFixed(0)}% mehr Zeit)
`})),S.length>0&&(A+=`

 Zusatzleistungen aktiviert:
`,S.forEach(w=>{A+=` "${w.title}" aktiviert eine zustzliche Leistung
`})),E.length>0&&(A+=`

 Separat abgerechnet (nicht in Kalkulation):
`,E.forEach(w=>{A+=` "${w.title}"  wird nach tatschlichem Aufwand separat berechnet
`})),o.push({number:7,title:"Sonderangaben bercksichtigen",description:"Fr dieses Objekt wurden Sonderangaben erfasst. Je nach Art beeinflussen sie die Arbeitszeit, aktivieren Zusatzleistungen oder werden separat abgerechnet.",details:P,additionalDetails:A.trim()||"Alle Sonderangaben werden entsprechend ihrer Konfiguration bercksichtigt.",specialNotesDetails:s})}else e.specialNotes&&e.specialNotes.length>0?o.push({number:7,title:"Sonderangaben bercksichtigen",description:"Fr dieses Objekt wurden Sonderangaben erfasst.",details:`${e.specialNotes.length} Sonderangabe(n) aktiv. Die Faktoren werden auf die Baseline-Zeit angewendet.`,additionalDetails:"Hinweis: Detaillierte Sonderangaben-Informationen werden geladen..."}):o.push({number:7,title:"Sonderangaben prfen",description:"Keine Sonderangaben fr dieses Objekt erfasst.",details:"Standard-Arbeitszeiten werden verwendet. Mgliche Sonderangaben wren z.B. Nikotinbelastung, starke Verschmutzung, Stuck, Umrumarbeiten etc."});return t&&t.length>0&&t.forEach((g,S)=>{var P;const E=g.quantity>0?g.baseTime/g.quantity:0;if(o.push({number:8,title:`Baseline-Zeit (${g.serviceName})`,description:"Die Standardkalkulationszeit wurde aus dem Onboarding herangezogen. Sie basiert auf einem definierten Standardfall.",details:`Baseline: ${(g.baseTime/60).toFixed(2)||0} Stunden fr ${((P=g.quantity)==null?void 0:P.toFixed(2))||0} m`,additionalDetails:`Zeit je Einheit: ${(E/60).toFixed(4)||0} Stunden/m (berechnet aus Standardfall: Standard-Zeit  Standard-Menge  aktuelle Menge)`,serviceSpecific:!0}),g.efficiency&&g.efficiency!==1){const A=g.baseTime-g.finalTime;o.push({number:9,title:`Effizienzgrad (${g.serviceName})`,description:r?"Durch die Kundenfreigabe konnten Effizienzsteigerungen angewendet werden. Bei greren Mengen wird die Arbeit effizienter.":"Effizienzsteigerungen sind mglich, bentigen aber Kundenfreigabe.",details:`Effizienzfaktor: ${(g.efficiency*100).toFixed(1)}%  Zeit reduziert von ${(g.baseTime/60).toFixed(2)} h auf ${(g.finalTime/60).toFixed(2)} h`,additionalDetails:A>0?`Zeitersparnis: ${(A/60).toFixed(2)} Stunden durch Effizienzsteigerung.`:"Die Effizienzsteigerung basiert auf der Gesamtmenge und der maximalen Tagesproduktivitt."})}else o.push({number:9,title:`Effizienzgrad (${g.serviceName})`,description:r?"Keine Effizienzsteigerung mglich. Die Menge ist zu gering fr eine Effizienzsteigerung oder bereits optimal.":"Effizienzsteigerungen bentigen Kundenfreigabe fr parallele Arbeiten an mehreren Objekten.",details:"Standard-Effizienz (100%) wird verwendet. Die Baseline-Zeit wird unverndert bernommen.",additionalDetails:r?"Die Effizienzsteigerung beginnt ab einer bestimmten Menge (Effektivittsmenge) und steigt linear mit der Menge.":"Aktivieren Sie die Kundenfreigabe, um Effizienzsteigerungen bei greren Mengen zu nutzen."})}),o.push({number:10,title:"Kundenfreigabe",description:r?"Kundenfreigabe erteilt: Effizienzsteigerungen knnen angewendet werden.":"Keine Kundenfreigabe: Effizienzsteigerungen werden nicht angewendet.",details:r?"Mehrere Objekte knnen gleichzeitig bearbeitet werden, was zu Effizienzsteigerungen fhrt.":"Aktivieren Sie die Freigabe, um Effizienzsteigerungen bei greren Mengen zu nutzen."}),d.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#fff3cd",borderRadius:"4px",border:"1px solid #ffc107"},children:[d.jsx("h3",{style:{marginBottom:"15px",color:"#856404"},children:" Schritt-fr-Schritt Erklrung der Berechnung"}),o.map((g,S)=>{var E,P;return d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"white",borderRadius:"4px",borderLeft:g.number===7&&((E=g.specialNotesDetails)==null?void 0:E.length)>0?"4px solid #ff9800":"4px solid #007bff"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[d.jsx("span",{style:{display:"inline-block",width:"30px",height:"30px",background:g.number===7&&((P=g.specialNotesDetails)==null?void 0:P.length)>0?"#ff9800":"#007bff",color:"white",borderRadius:"50%",textAlign:"center",lineHeight:"30px",fontWeight:"bold",marginRight:"10px"},children:g.number}),d.jsx("h4",{style:{margin:0,color:"#333"},children:g.title})]}),d.jsx("p",{style:{margin:"8px 0",color:"#666",fontSize:"14px"},children:g.description}),d.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"#f8f9fa",borderRadius:"4px",fontSize:"13px",color:"#495057"},children:[d.jsx("strong",{children:"Details:"})," ",g.details]}),g.specialNotesDetails&&g.specialNotesDetails.length>0&&d.jsx("div",{style:{marginTop:"10px"},children:g.specialNotesDetails.map((A,w)=>{const b=A.factor&&A.factor!==1,k=A.requiredService,C=!b&&!k;return d.jsxs("div",{style:{padding:"10px",marginBottom:"8px",background:b?"#fff3e0":C?"#f5f5f5":"#e8f5e9",borderRadius:"4px",border:`1px solid ${b?"#ff9800":C?"#bdbdbd":"#4caf50"}`,fontSize:"13px"},children:[d.jsxs("div",{style:{fontWeight:"bold",marginBottom:"4px",color:b?"#e65100":C?"#616161":"#2e7d32"},children:[b?"":k?"":""," ",A.title]}),A.uxDescription&&d.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px",fontStyle:"italic"},children:A.uxDescription}),d.jsxs("div",{style:{fontSize:"12px",marginTop:"4px"},children:[b&&d.jsxs("span",{style:{background:"#ff9800",color:"white",padding:"2px 8px",borderRadius:"4px",marginRight:"8px"},children:["Zeitfaktor: ",A.factor," (+",((A.factor-1)*100).toFixed(0),"%)"]}),k&&d.jsx("span",{style:{background:"#4caf50",color:"white",padding:"2px 8px",borderRadius:"4px",marginRight:"8px"},children:"Aktiviert Zusatzleistung"}),C&&d.jsx("span",{style:{background:"#9e9e9e",color:"white",padding:"2px 8px",borderRadius:"4px"},children:"Wird separat abgerechnet"})]})]},w)})}),g.additionalDetails&&!g.specialNotesDetails&&d.jsxs("div",{style:{marginTop:"5px",padding:"10px",background:"#f8f9fa",borderRadius:"4px",fontSize:"13px",color:"#495057",whiteSpace:"pre-line"},children:[d.jsx("strong",{children:"Zustzlich:"})," ",g.additionalDetails]})]},S)}),d.jsxs("div",{style:{marginTop:"20px",padding:"10px",background:"#d1ecf1",borderRadius:"4px",fontSize:"13px",color:"#0c5460"},children:[d.jsx("strong",{children:"Hinweis:"})," Die Schritte 11-13 (Wartezeiten, Workflow-Sortierung, Mehrpersonal) werden im Arbeitsplan bercksichtigt."]})]})}const $e=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e||0),pr=e=>{if(!e)return"0:00 h";const t=Math.floor(e/60),n=Math.round(e%60);return`${t}:${n.toString().padStart(2,"0")} h`};function gR(){const e=_e(s=>s.calculations.results),t=_e(s=>s.workflow.workflows),n=_e(s=>s.settings.customerApproval),r=_e(s=>s.objects.objects),i=_e(s=>s.companySettings.settings),o=_e(s=>s.services.services);return!e||!e.objects||e.objects.length===0?d.jsx("div",{className:"card",children:d.jsx("p",{children:"Keine Berechnungsergebnisse verfgbar. Bitte fgen Sie Objekte und Leistungen hinzu."})}):d.jsxs("div",{children:[d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:"Kalkulationsergebnisse"}),e.objects.map(s=>{var u,f,h,y,g,S,E,P;const l=r.find(A=>A.id===s.id);return d.jsxs("div",{style:{marginBottom:"30px",padding:"15px",background:"#f9f9f9",borderRadius:"4px"},children:[d.jsxs("h3",{children:[s.name," (",s.type,")"]}),d.jsxs("div",{style:{marginBottom:"15px"},children:[d.jsx("h4",{children:"Mengen:"}),d.jsxs("ul",{children:[d.jsxs("li",{children:["Deckenflche: ",((f=(u=s.quantities)==null?void 0:u.ceilingArea)==null?void 0:f.toFixed(2))||0," m"]}),d.jsxs("li",{children:["Umfang: ",((y=(h=s.quantities)==null?void 0:h.perimeter)==null?void 0:y.toFixed(2))||0," m"]}),d.jsxs("li",{children:["Wandflche: ",((S=(g=s.quantities)==null?void 0:g.wallArea)==null?void 0:S.toFixed(2))||0," m"]}),((E=s.quantities)==null?void 0:E.quantityFactor)!==1&&d.jsxs("li",{children:["Mengenfaktor: ",s.quantities.quantityFactor]}),((P=s.quantities)==null?void 0:P.serviceFactor)!==1&&d.jsxs("li",{children:["Leistungsfaktor: ",s.quantities.serviceFactor]})]})]}),s.specialNotes&&s.specialNotes.length>0&&d.jsxs("div",{style:{marginBottom:"15px",padding:"12px",background:"#fff3e0",borderRadius:"6px",border:"1px solid #ff9800"},children:[d.jsx("h4",{style:{marginTop:0,marginBottom:"10px",color:"#e65100"},children:" Sonderangaben:"}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.specialNotes.map(A=>{var b;const w=A.requiredService?(b=o.find(k=>k.id===A.requiredService))==null?void 0:b.title:null;return d.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"4px",border:"1px solid #ffcc80"},children:[d.jsxs("div",{style:{fontWeight:"bold",marginBottom:"4px",color:"#e65100"},children:[" ",A.title]}),A.uxDescription&&d.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"6px",fontStyle:"italic"},children:A.uxDescription}),A.factor&&A.factor!==1&&d.jsxs("div",{style:{fontSize:"12px",color:"#1565c0",background:"#e3f2fd",padding:"4px 8px",borderRadius:"4px",display:"inline-block",marginTop:"4px"},children:[" Zeitfaktor: ",A.factor]}),A.factor===1&&!A.requiredService&&d.jsx("div",{style:{fontSize:"12px",color:"#666",background:"#f5f5f5",padding:"4px 8px",borderRadius:"4px",display:"inline-block",marginTop:"4px"},children:" Wird separat abgerechnet"}),w&&d.jsxs("div",{style:{fontSize:"12px",color:"#2e7d32",background:"#e8f5e9",padding:"4px 8px",borderRadius:"4px",display:"inline-block",marginTop:"4px",marginLeft:"8px"},children:[" Aktiviert: ",w]})]},A.id)})})]}),s.services&&s.services.length>0&&d.jsxs("div",{children:[d.jsx("h4",{children:"Leistungen:"}),d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{background:"#e0e0e0",textAlign:"left"},children:[d.jsx("th",{style:{padding:"8px",border:"1px solid #ccc"},children:"Leistung"}),d.jsx("th",{style:{padding:"8px",border:"1px solid #ccc"},children:"Menge"}),d.jsx("th",{style:{padding:"8px",border:"1px solid #ccc"},children:"Zeit"}),d.jsx("th",{style:{padding:"8px",border:"1px solid #ccc"},children:"Lohnkosten"}),d.jsx("th",{style:{padding:"8px",border:"1px solid #ccc"},children:"Material"}),d.jsx("th",{style:{padding:"8px",border:"1px solid #ccc"},children:"Gesamt"})]})}),d.jsxs("tbody",{children:[s.services.map((A,w)=>{var b;return d.jsxs("tr",{style:{background:A.isFromSpecialNote?"#fff3e0":A.isSubService?"#f0f7ff":w%2===0?"white":"#f5f5f5"},children:[d.jsxs("td",{style:{padding:"8px",border:"1px solid #ccc",paddingLeft:A.isSubService?"30px":"8px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[A.isSubService&&d.jsx("span",{style:{color:"#1976d2",fontSize:"14px"},children:""}),d.jsx("strong",{style:{color:A.isSubService?"#1565c0":"inherit"},children:A.serviceName})]}),d.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"4px",flexWrap:"wrap"},children:[A.isSubService&&d.jsxs("span",{style:{fontSize:"10px",background:"#1976d2",color:"white",padding:"2px 6px",borderRadius:"4px"},children:[" Unterleistung von: ",A.parentServiceName]}),A.isFromSpecialNote&&d.jsx("span",{style:{fontSize:"10px",background:"#ff9800",color:"white",padding:"2px 6px",borderRadius:"4px"},children:" Aus Sonderangabe"})]}),d.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:["Effizienz: ",A.efficiency?(A.efficiency*100).toFixed(0):100,"%",A.specialNoteFactor&&d.jsxs("span",{style:{marginLeft:"8px",color:"#e65100"},children:["| Sonderfaktor: ",A.specialNoteFactor]})]})]}),d.jsxs("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right"},children:[((b=A.quantity)==null?void 0:b.toFixed(2))||0," ",A.unit||"m"]}),d.jsx("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right"},children:pr(A.finalTime)}),d.jsx("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right"},children:$e(A.laborCost)}),d.jsx("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right"},children:$e(A.materialCost)}),d.jsx("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right",fontWeight:"bold"},children:$e(A.totalCost)})]},w)}),d.jsxs("tr",{style:{background:"#d4edda",fontWeight:"bold"},children:[d.jsxs("td",{colSpan:"2",style:{padding:"8px",border:"1px solid #ccc"},children:["Zwischensumme ",s.name]}),d.jsx("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right"},children:pr(s.totalTime)}),d.jsx("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right"},children:$e(s.totalLaborCost)}),d.jsx("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right"},children:$e(s.totalMaterialCost)}),d.jsx("td",{style:{padding:"8px",border:"1px solid #ccc",textAlign:"right"},children:$e(s.totalCost)})]})]})]})]}),d.jsx(vR,{object:l||s,services:s.services,quantities:s.quantities,customerApproval:n,specialNotesData:s.specialNotes})]},s.id)}),d.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"#e3f2fd",borderRadius:"8px"},children:[d.jsx("h3",{style:{marginBottom:"20px"},children:" Transparente Preisbersicht"}),d.jsxs("div",{style:{background:"#bbdefb",padding:"12px 15px",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:""}),d.jsxs("div",{children:[d.jsxs("strong",{children:["Stundenlohn: ",$e((i==null?void 0:i.laborRate)||65),"/h"]}),d.jsx("div",{style:{fontSize:"12px",color:"#1565c0"},children:"(all-inclusive: Lohn, Nebenkosten, Gemeinkosten, Gewinn)"})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{background:"#1976d2",color:"white",padding:"10px 15px",borderRadius:"6px 6px 0 0",margin:0},children:" Leistungskosten"}),e.objects.map(s=>d.jsxs("div",{style:{background:"white",border:"1px solid #1976d2",borderTop:"none",padding:"15px",marginBottom:"0"},children:[d.jsxs("h5",{style:{margin:"0 0 15px 0",color:"#1976d2",borderBottom:"1px dashed #ccc",paddingBottom:"8px"},children:[" ",s.name," (",s.type,")"]}),s.specialNotes&&s.specialNotes.length>0&&d.jsxs("div",{style:{background:"#fff3e0",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #ffcc80"},children:[d.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#e65100",fontSize:"13px"},children:" Aktive Sonderangaben fr dieses Objekt:"}),d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:s.specialNotes.map((l,u)=>{const f=l.factor&&l.factor!==1,h=l.requiredService,y=!f&&!h;return d.jsxs("div",{style:{fontSize:"12px",padding:"4px 10px",borderRadius:"12px",background:f?"#ff9800":y?"#9e9e9e":"#4caf50",color:"white",display:"flex",alignItems:"center",gap:"4px"},children:[f&&d.jsx("span",{children:""}),h&&d.jsx("span",{children:""}),y&&d.jsx("span",{children:""}),d.jsx("span",{children:l.title}),f&&d.jsxs("span",{style:{fontWeight:"bold"},children:["(",l.factor,")"]}),y&&d.jsx("span",{style:{fontSize:"10px"},children:"(separat)"})]},u)})})]}),s.services&&s.services.map((l,u)=>{var f,h,y,g,S;return d.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:u<s.services.length-1?"1px dotted #e0e0e0":"none",marginLeft:l.isSubService?"20px":"0",borderLeft:l.isSubService?"3px solid #1976d2":"none",paddingLeft:l.isSubService?"12px":"0",background:l.isSubService?"#f8fbff":"transparent"},children:[d.jsxs("div",{style:{fontWeight:"bold",marginBottom:"6px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[l.isSubService&&d.jsx("span",{style:{color:"#1976d2"},children:""}),d.jsx("span",{style:{color:l.isSubService?"#1565c0":"inherit"},children:l.serviceName}),d.jsxs("span",{style:{fontSize:"12px",color:"#666",fontWeight:"normal"},children:["(",(f=l.quantity)==null?void 0:f.toFixed(1)," ",l.unit||"m",")"]}),l.isSubService&&d.jsx("span",{style:{fontSize:"10px",background:"#1976d2",color:"white",padding:"2px 6px",borderRadius:"4px"},children:" Unterleistung"}),l.isFromSpecialNote&&d.jsx("span",{style:{fontSize:"10px",background:"#ff9800",color:"white",padding:"2px 6px",borderRadius:"4px"},children:"Aus Sonderangabe"})]}),l.isSubService&&l.parentServiceName&&d.jsxs("div",{style:{fontSize:"11px",color:"#1976d2",marginBottom:"6px",fontStyle:"italic"},children:["Automatisch enthalten in: ",l.parentServiceName]}),d.jsxs("div",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"6px",marginBottom:"10px",marginLeft:"15px",fontSize:"12px"},children:[d.jsxs("div",{style:{marginBottom:"8px",paddingBottom:"8px",borderBottom:"1px dashed #ddd"},children:[d.jsx("div",{style:{fontWeight:"bold",color:"#1565c0",marginBottom:"4px"},children:" Zeitberechnung:"}),l.standardValuePerUnit?d.jsxs("div",{style:{color:"#555"},children:[l.standardValuePerUnit," min/",l.unit,"  ",(h=l.quantity)==null?void 0:h.toFixed(2)," ",l.unit," = ",((y=l.calculatedBaseTime)==null?void 0:y.toFixed(2))||(l.standardValuePerUnit*l.quantity).toFixed(2)," min"]}):d.jsx("div",{style:{color:"#999",fontStyle:"italic"},children:"Keine Zeit pro Einheit konfiguriert"}),l.minTimeApplied&&d.jsxs("div",{style:{color:"#e65100",marginTop:"4px",background:"#fff3e0",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:[" Mindestzeit angewendet: ",l.minTime," min (statt ",(g=l.calculatedBaseTime)==null?void 0:g.toFixed(2)," min)"]}),l.specialNoteFactor&&l.specialNoteFactor!==1&&d.jsxs("div",{style:{color:"#e65100",marginTop:"4px",background:"#fff3e0",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:[" Sonderangaben-Faktor: ",l.specialNoteFactor," (+",((l.specialNoteFactor-1)*100).toFixed(0),"%)"]}),l.efficiency&&l.efficiency!==1&&d.jsxs("div",{style:{color:"#2e7d32",marginTop:"4px",background:"#e8f5e9",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:[" Effizienz: ",(l.efficiency*100).toFixed(0),"%",l.efficiencyStart&&` (ab ${l.efficiencyStart} ${l.unit})`]}),l.serviceFactor&&l.serviceFactor!==1&&d.jsxs("div",{style:{color:"#7b1fa2",marginTop:"4px",background:"#f3e5f5",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:[" Objekttyp-Faktor: ",l.serviceFactor]})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[d.jsx("span",{style:{color:"#333"},children:d.jsx("strong",{children:"Finale Arbeitszeit:"})}),d.jsx("span",{style:{fontWeight:"bold",color:"#1565c0"},children:pr(l.finalTime)})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[d.jsxs("span",{style:{color:"#555"},children:[" Lohnkosten: ",pr(l.finalTime),"  ",$e((i==null?void 0:i.laborRate)||65),"/h"]}),d.jsxs("span",{style:{fontWeight:"500"},children:["= ",$e(l.laborCost)]})]}),l.materialType&&l.materialType!=="none"&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[d.jsxs("span",{style:{color:"#555"},children:[" Material: ",l.materialType==="percent"?`${l.materialValue}% von ${$e(l.laborCost)}`:`${$e(l.materialValue)}/${l.unit}  ${(S=l.quantity)==null?void 0:S.toFixed(2)}`]}),d.jsxs("span",{style:{fontWeight:"500"},children:["= ",$e(l.materialCost)]})]}),(!l.materialType||l.materialType==="none")&&d.jsx("div",{style:{color:"#999",fontSize:"11px",fontStyle:"italic"},children:" Kein Material konfiguriert"})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginLeft:"15px",marginTop:"6px",paddingTop:"4px",borderTop:"1px solid #eee",fontWeight:"bold",color:"#333"},children:[d.jsxs("span",{children:["Summe ",l.serviceName,":"]}),d.jsx("span",{children:$e(l.totalCost)})]})]},u)}),d.jsxs("div",{style:{background:"#e8f5e9",padding:"10px 15px",borderRadius:"4px",marginTop:"10px",display:"flex",justifyContent:"space-between",fontWeight:"bold"},children:[d.jsxs("span",{children:["Zwischensumme ",s.name,":"]}),d.jsx("span",{children:$e(s.totalCost)})]})]},s.id))]}),(e.siteSetupCost>0||e.siteClearanceCost>0)&&d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{background:"#7b1fa2",color:"white",padding:"10px 15px",borderRadius:"6px 6px 0 0",margin:0},children:" Baustellenpauschale (einmalig)"}),d.jsxs("div",{style:{background:"white",border:"1px solid #7b1fa2",borderTop:"none",padding:"15px"},children:[e.siteSetupCost>0&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"14px"},children:[d.jsxs("span",{children:[" Einrichtung: ",pr((i==null?void 0:i.siteSetup)||60),"  ",$e((i==null?void 0:i.laborRate)||65),"/h"]}),d.jsxs("span",{style:{fontWeight:"bold"},children:["= ",$e(e.siteSetupCost)]})]}),e.siteClearanceCost>0&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"14px"},children:[d.jsxs("span",{children:[" Rumung: ",pr((i==null?void 0:i.siteClearance)||60),"  ",$e((i==null?void 0:i.laborRate)||65),"/h"]}),d.jsxs("span",{style:{fontWeight:"bold"},children:["= ",$e(e.siteClearanceCost)]})]}),d.jsxs("div",{style:{background:"#f3e5f5",padding:"10px 15px",borderRadius:"4px",marginTop:"10px",display:"flex",justifyContent:"space-between",fontWeight:"bold"},children:[d.jsx("span",{children:"Zwischensumme Baustellenpauschale:"}),d.jsx("span",{children:$e((e.siteSetupCost||0)+(e.siteClearanceCost||0))})]})]})]}),d.jsxs("div",{style:{background:"#1565c0",color:"white",padding:"20px",borderRadius:"8px"},children:[d.jsx("h4",{style:{margin:"0 0 15px 0",fontSize:"16px"},children:" Zusammenfassung"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"8px",fontSize:"14px"},children:[d.jsx("span",{children:" Arbeitszeit gesamt:"}),d.jsx("span",{style:{textAlign:"right",fontWeight:"bold"},children:pr(e.totalTime)}),d.jsxs("span",{children:[" Lohnkosten (Zeit  ",$e((i==null?void 0:i.laborRate)||65),"/h):"]}),d.jsx("span",{style:{textAlign:"right"},children:$e(e.totalLaborCost)}),d.jsx("span",{children:" Materialkosten:"}),d.jsxs("span",{style:{textAlign:"right"},children:["+ ",$e(e.totalMaterialCost)]}),d.jsx("div",{style:{gridColumn:"1 / -1",borderTop:"2px solid rgba(255,255,255,0.3)",margin:"10px 0",paddingTop:"10px"}}),d.jsx("span",{style:{fontSize:"18px",fontWeight:"bold"},children:" GESAMTPREIS (netto):"}),d.jsx("span",{style:{textAlign:"right",fontSize:"24px",fontWeight:"bold"},children:$e(e.totalCost)})]})]}),d.jsxs("div",{style:{marginTop:"15px",padding:"15px",background:"white",borderRadius:"6px",display:"flex",justifyContent:"space-around",flexWrap:"wrap",gap:"15px"},children:[d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px"},children:""}),d.jsx("div",{style:{fontWeight:"bold"},children:e.totalDays||1}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Arbeitstage"})]}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px"},children:""}),d.jsx("div",{style:{fontWeight:"bold"},children:e.optimalEmployees||1}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Mitarbeiter"})]}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px"},children:""}),d.jsx("div",{style:{fontWeight:"bold"},children:pr(e.totalTime)}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Gesamtzeit"})]})]})]})]}),t&&t.length>0&&d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:"Arbeitsplan"}),d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"#fff3cd",borderRadius:"4px",border:"1px solid #ffc107"},children:[d.jsx("h3",{style:{color:"#856404",marginBottom:"10px"},children:" Schritte 11-13: Workflow-Planung"}),d.jsxs("div",{style:{marginBottom:"15px",padding:"10px",background:"white",borderRadius:"4px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[d.jsx("span",{style:{display:"inline-block",width:"30px",height:"30px",background:"#007bff",color:"white",borderRadius:"50%",textAlign:"center",lineHeight:"30px",fontWeight:"bold",marginRight:"10px"},children:"11"}),d.jsx("strong",{children:"Warte- und Trocknungszeiten"})]}),d.jsx("p",{style:{margin:"5px 0",fontSize:"14px",color:"#666",marginLeft:"40px"},children:"Fr Leistungen mit Trocknungszeiten wurden Wartezeiten bercksichtigt. Inkompatible Arbeiten wurden auf verschiedene Tage verteilt."})]}),d.jsxs("div",{style:{marginBottom:"15px",padding:"10px",background:"white",borderRadius:"4px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[d.jsx("span",{style:{display:"inline-block",width:"30px",height:"30px",background:"#007bff",color:"white",borderRadius:"50%",textAlign:"center",lineHeight:"30px",fontWeight:"bold",marginRight:"10px"},children:"12"}),d.jsx("strong",{children:"Workflow-Sortierung"})]}),d.jsx("p",{style:{margin:"5px 0",fontSize:"14px",color:"#666",marginLeft:"40px"},children:"Die Leistungen wurden nach der definierten Arbeitsreihenfolge sortiert, um einen logischen Arbeitsablauf zu gewhrleisten."})]}),d.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"4px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[d.jsx("span",{style:{display:"inline-block",width:"30px",height:"30px",background:"#007bff",color:"white",borderRadius:"50%",textAlign:"center",lineHeight:"30px",fontWeight:"bold",marginRight:"10px"},children:"13"}),d.jsx("strong",{children:"Mehrpersonal-Optimierung"})]}),d.jsx("p",{style:{margin:"5px 0",fontSize:"14px",color:"#666",marginLeft:"40px"},children:"Die optimale Mitarbeiteranzahl wurde berechnet, um Effizienzverluste zu vermeiden und die Gesamtarbeitszeit zu optimieren."}),d.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f8f9fa",borderRadius:"4px",marginLeft:"40px",fontSize:"13px"},children:[d.jsx("strong",{children:"Ergebnis:"})," ",e.optimalEmployees||1," Mitarbeiter fr ",e.totalDays||0," Arbeitstage"]})]})]}),t.map(s=>{var l;return d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"#f9f9f9",borderRadius:"4px"},children:[d.jsxs("h3",{children:["Tag ",s.day]}),d.jsxs("p",{children:["Mitarbeiter: ",s.employees]}),d.jsxs("p",{children:["Arbeitsstunden: ",((l=s.hours)==null?void 0:l.toFixed(2))||0," h"]}),s.waitTimes&&s.waitTimes.length>0&&d.jsxs("div",{style:{marginTop:"10px"},children:[d.jsx("strong",{children:"Wartezeiten:"}),d.jsx("ul",{children:s.waitTimes.map((u,f)=>d.jsxs("li",{children:["Dauer: ",u.duration," min",u.serviceId&&` (Service: ${u.serviceId})`]},f))})]})]},s.id)})]})]})}function xR({onComplete:e}){const t=nr(),n=_e(u=>u.companySettings.settings),r=_e(u=>u.companySettings.loading),[i,o]=ue.useState({laborRate:65,dailyHours:8.25,dailyHoursFriday:7,weeklyHours:40,minTimeAloneHours:1,minTimeAloneMinutes:30,siteSetupHours:1,siteSetupMinutes:0,siteClearanceHours:1,siteClearanceMinutes:0});ue.useEffect(()=>{t(Es())},[t]),ue.useEffect(()=>{if(n){const u=n.minTimeAlone||90,f=n.siteSetup||60,h=n.siteClearance||60;o({laborRate:n.laborRate||65,dailyHours:n.dailyHours||8.25,dailyHoursFriday:n.dailyHoursFriday||7,weeklyHours:n.weeklyHours||40,minTimeAloneHours:Math.floor(u/60),minTimeAloneMinutes:u%60,siteSetupHours:Math.floor(f/60),siteSetupMinutes:f%60,siteClearanceHours:Math.floor(h/60),siteClearanceMinutes:h%60})}},[n]);const s=u=>{const{name:f,value:h}=u.target;o(y=>({...y,[f]:parseFloat(h)||0}))},l=async u=>{u.preventDefault();const f={id:"company_settings",laborRate:i.laborRate,dailyHours:i.dailyHours,dailyHoursFriday:i.dailyHoursFriday,weeklyHours:i.weeklyHours,minTimeAlone:i.minTimeAloneHours*60+i.minTimeAloneMinutes,siteSetup:i.siteSetupHours*60+i.siteSetupMinutes,siteClearance:i.siteClearanceHours*60+i.siteClearanceMinutes,onboardingCompleted:!0};await t(Cw(f)),e&&e()};return r?d.jsx("div",{className:"loading",children:"Lade Einstellungen..."}):d.jsxs("div",{className:"card onboarding-card",children:[d.jsx("h2",{children:" Unternehmens-Einstellungen"}),d.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"Diese Einstellungen gelten fr alle Kalkulationen Ihres Unternehmens."}),d.jsxs("form",{onSubmit:l,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Stundenlohn (netto, all-inclusive):"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"laborRate",value:i.laborRate,onChange:s,step:"0.01",min:"0",style:{width:"100px"}}),d.jsx("span",{children:"/h"})]}),d.jsx("small",{style:{color:"#888"},children:"Inkl. Lohnnebenkosten, Gemeinkosten und Gewinn"})]}),d.jsxs("div",{className:"form-group",style:{marginTop:"20px"},children:[d.jsx("label",{children:"Arbeitszeiten:"}),d.jsxs("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:[d.jsxs("div",{children:[d.jsx("span",{children:"Mo-Do:"}),d.jsx("input",{type:"number",name:"dailyHours",value:i.dailyHours,onChange:s,step:"0.25",min:"0",max:"12",style:{width:"80px",marginLeft:"10px"}}),d.jsx("span",{style:{marginLeft:"5px"},children:"h/Tag"})]}),d.jsxs("div",{children:[d.jsx("span",{children:"Freitag:"}),d.jsx("input",{type:"number",name:"dailyHoursFriday",value:i.dailyHoursFriday,onChange:s,step:"0.25",min:"0",max:"12",style:{width:"80px",marginLeft:"10px"}}),d.jsx("span",{style:{marginLeft:"5px"},children:"h"})]})]})]}),d.jsxs("div",{className:"form-group",style:{marginTop:"20px"},children:[d.jsx("label",{children:"Mindestzeit pro Tag (bei kleinen Leistungen):"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"minTimeAloneHours",value:i.minTimeAloneHours,onChange:s,min:"0",max:"8",style:{width:"60px"}}),d.jsx("span",{children:"h"}),d.jsx("input",{type:"number",name:"minTimeAloneMinutes",value:i.minTimeAloneMinutes,onChange:s,min:"0",max:"59",step:"15",style:{width:"60px"}}),d.jsx("span",{children:"min"})]}),d.jsx("small",{style:{color:"#888"},children:"Wird angewendet, wenn kalkulierte Zeit unter diesem Wert liegt"})]}),d.jsxs("div",{className:"form-group",style:{marginTop:"20px"},children:[d.jsx("label",{children:"Baustellenpauschale (einmalig je Projekt):"}),d.jsxs("div",{style:{display:"flex",gap:"30px",flexWrap:"wrap",marginTop:"10px"},children:[d.jsxs("div",{children:[d.jsx("span",{children:"Einrichtung:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginTop:"5px"},children:[d.jsx("input",{type:"number",name:"siteSetupHours",value:i.siteSetupHours,onChange:s,min:"0",max:"8",style:{width:"60px"}}),d.jsx("span",{children:"h"}),d.jsx("input",{type:"number",name:"siteSetupMinutes",value:i.siteSetupMinutes,onChange:s,min:"0",max:"59",step:"15",style:{width:"60px"}}),d.jsx("span",{children:"min"})]})]}),d.jsxs("div",{children:[d.jsx("span",{children:"Rumung:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginTop:"5px"},children:[d.jsx("input",{type:"number",name:"siteClearanceHours",value:i.siteClearanceHours,onChange:s,min:"0",max:"8",style:{width:"60px"}}),d.jsx("span",{children:"h"}),d.jsx("input",{type:"number",name:"siteClearanceMinutes",value:i.siteClearanceMinutes,onChange:s,min:"0",max:"59",step:"15",style:{width:"60px"}}),d.jsx("span",{children:"min"})]})]})]})]}),d.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:d.jsx("button",{type:"submit",style:{padding:"12px 24px"},children:" Einstellungen speichern"})})]})]})}function SR({onComplete:e}){const t=nr(),n=_e(C=>C.services.services),r=_e(C=>C.services.loading),[i,o]=ue.useState(0),[s,l]=ue.useState({}),u=ue.useMemo(()=>{n.length<20&&console.warn(` Nur ${n.length} Services im State (erwartet mindestens 36)!`);const C=n.filter(T=>{if(!T.serviceType)return console.warn(` Service ohne serviceType gefiltert: ${T.id} - ${T.title}`),!1;const z=T.serviceType.includes("Unterleistung Backend"),U=T.serviceType.includes("Shop Leistung");return z&&!U}).sort((T,z)=>T.title.localeCompare(z.title));return console.log(` Reine Unterleistungen: ${C.length} (erwartet: 22) aus ${n.length} total Services`),C.length>0?console.log(" Erste 3:",C.slice(0,3).map(T=>T.title).join(", ")):n.length>0&&(console.error(` KRITISCH: Keine Unterleistungen gefunden, obwohl ${n.length} Services im State sind!`),console.log(" Service-Typen:",[...new Set(n.map(T=>T.serviceType))])),C},[n]),f=u[i];ue.useEffect(()=>{t(vn())},[t]),ue.useEffect(()=>{f&&l({standardValuePerUnit:f.standardValuePerUnit||0,minTime:f.minTime||0,waitTime:f.waitTime||0,efficiencyStart:f.efficiencyStart||0,efficiencyCap:f.efficiencyCap||0,efficiencyStepPercent:f.efficiencyStepPercent||1,maxProductivityPerDay:f.maxProductivityPerDay||0,materialType:f.materialType||"percent",materialValue:f.materialValue||10})},[f]);const h=C=>{const{name:T,value:z,type:U}=C.target;l(q=>({...q,[T]:U==="number"?parseFloat(z)||0:z}))},y=async()=>{if(f)try{await t(ks({serviceId:f.id,config:{standardValuePerUnit:s.standardValuePerUnit,minTime:s.minTime,waitTime:s.waitTime,efficiencyStart:s.efficiencyStart,efficiencyCap:s.efficiencyCap,efficiencyStepPercent:s.efficiencyStepPercent,maxProductivityPerDay:s.maxProductivityPerDay,materialType:s.materialType,materialValue:s.materialValue,subServiceConfigOnboardingCompleted:!0}})).unwrap(),console.log(` Unterleistung ${f.id} gespeichert, gehe zu Index ${i+1}`);const C=i+1;C<u.length?o(C):e&&e()}catch(C){console.error("Fehler beim Speichern:",C)}},g=()=>{i<u.length-1?o(i+1):e&&e()},S=()=>{i>0&&o(i-1)},E=C=>{const T=parseInt(C.target.value,10);isNaN(T)||o(T)};if(r)return d.jsx("div",{className:"loading",children:"Lade Unterleistungen..."});if(u.length===0)return d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:" Keine Unterleistungen gefunden"}),d.jsx("p",{children:"Es gibt keine Unterleistungen, die konfiguriert werden mssen."}),e&&d.jsx("button",{onClick:e,style:{marginTop:"20px"},children:"Weiter zu Hauptleistungen "})]});const P=u.filter(C=>C.subServiceConfigOnboardingCompleted).length,A=P/u.length*100,w=P===u.length,b=i===u.length-1;if(!f)return null;const k=f.standardValuePerUnit>0||f.minTime>0||f.waitTime>0;return d.jsxs("div",{className:"card onboarding-card",children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[d.jsxs("span",{children:["Unterleistung ",i+1," von ",u.length," |"," ",P," konfiguriert"]}),d.jsxs("span",{children:[Math.round(A),"%"]})]}),d.jsx("div",{style:{background:"#e0e0e0",borderRadius:"4px",height:"8px",overflow:"hidden"},children:d.jsx("div",{style:{background:"#9C27B0",height:"100%",width:`${A}%`,transition:"width 0.3s ease"}})}),d.jsxs("div",{style:{marginTop:"15px"},children:[d.jsx("label",{style:{fontSize:"14px",color:"#666"},children:"Direkt zu Unterleistung springen:"}),d.jsx("select",{value:i,onChange:E,style:{width:"100%",padding:"10px",marginTop:"5px",borderRadius:"4px",border:"1px solid #ddd",fontSize:"14px",cursor:"pointer"},children:u.map((C,T)=>d.jsxs("option",{value:T,children:[C.subServiceConfigOnboardingCompleted?" ":" ",T+1,". ",C.title,C.variant?` (${C.variant})`:""," (",C.unit,")"]},C.id))})]})]}),w&&d.jsxs("div",{style:{background:"#E1BEE7",padding:"15px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #9C27B0"},children:[d.jsx("strong",{children:" Alle Unterleistungen sind bereits konfiguriert!"}),d.jsx("p",{style:{margin:"5px 0 0 0",fontSize:"14px"},children:"Sie knnen Einstellungen berprfen oder ndern, oder direkt zu den Hauptleistungen gehen."}),d.jsx("button",{onClick:e,style:{marginTop:"10px",background:"#9C27B0"},children:"Weiter zu Hauptleistungen "})]}),d.jsxs("h2",{children:[" Unterleistung konfigurieren: ",f.title]}),d.jsxs("p",{style:{color:"#666",marginBottom:"10px"},children:[d.jsx("strong",{children:"Einheit:"})," ",f.unit,f.variant&&d.jsxs(d.Fragment,{children:[" | ",d.jsx("strong",{children:"Variante:"})," ",f.variant]})]}),k&&d.jsxs("div",{style:{background:"#E8F5E9",padding:"10px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px",border:"1px solid #A5D6A7"},children:[" ",d.jsx("strong",{children:"Default-Werte aus Stammdaten geladen"})," - Sie knnen diese anpassen oder bernehmen."]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"30px"},children:[d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:" Zeitwerte"}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{children:["Zeit pro ",f.unit,":"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"standardValuePerUnit",value:s.standardValuePerUnit||"",onChange:h,step:"0.1",min:"0",style:{width:"80px"}}),d.jsx("span",{children:"Minuten"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Mindestzeit pro Tag:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"minTime",value:s.minTime||"",onChange:h,step:"15",min:"0",style:{width:"80px"}}),d.jsx("span",{children:"Minuten"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Wartezeit (Trocknung):"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"waitTime",value:s.waitTime||"",onChange:h,step:"30",min:"0",style:{width:"80px"}}),d.jsx("span",{children:"Minuten"})]})]})]}),d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:" Effizienz-Steigerung"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Effizienz beginnt ab:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"efficiencyStart",value:s.efficiencyStart||"",onChange:h,step:"10",min:"0",style:{width:"80px"}}),d.jsx("span",{children:f.unit})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Maximum (Deckel) bei:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"efficiencyCap",value:s.efficiencyCap||"",onChange:h,step:"10",min:"0",style:{width:"80px"}}),d.jsx("span",{children:f.unit})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{children:["Steigerung pro 10 ",f.unit,":"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"efficiencyStepPercent",value:s.efficiencyStepPercent||"",onChange:h,step:"0.1",min:"0",max:"10",style:{width:"80px"}}),d.jsx("span",{children:"%"})]})]})]}),d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:" Max. Produktivitt"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Max. Einheiten pro Tag:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"number",name:"maxProductivityPerDay",value:s.maxProductivityPerDay||"",onChange:h,step:"10",min:"0",style:{width:"80px"}}),d.jsx("span",{children:f.unit})]})]})]}),d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:" Material-Zuschlag"}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[d.jsx("input",{type:"radio",name:"materialType",value:"none",checked:s.materialType==="none",onChange:h}),"Kein Material"]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[d.jsx("input",{type:"radio",name:"materialType",value:"percent",checked:s.materialType==="percent",onChange:h}),"Prozent auf Lohnkosten",s.materialType==="percent"&&d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[d.jsx("input",{type:"number",name:"materialValue",value:s.materialValue||"",onChange:h,step:"1",min:"0",style:{width:"60px"}}),"%"]})]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"radio",name:"materialType",value:"fixed",checked:s.materialType==="fixed",onChange:h}),"Fester Betrag pro ",f.unit,s.materialType==="fixed"&&d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[d.jsx("input",{type:"number",name:"materialValue",value:s.materialValue||"",onChange:h,step:"0.5",min:"0",style:{width:"60px"}}),""]})]})]})]})]}),d.jsxs("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",gap:"10px"},children:[d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{type:"button",onClick:S,disabled:i===0,style:{background:i===0?"#ccc":"#6c757d",cursor:i===0?"not-allowed":"pointer"},children:" Zurck"}),d.jsx("button",{type:"button",onClick:g,style:{background:"#999"},children:"berspringen"})]}),d.jsx("button",{type:"button",onClick:y,style:{background:"#9C27B0"},children:f!=null&&f.subServiceConfigOnboardingCompleted?" nderungen speichern":b?"Speichern & Abschlieen ":"Speichern & Weiter "})]})]})}function wR({onComplete:e}){const t=nr(),n=_e(T=>T.services.services),r=_e(T=>T.services.loading),[i,o]=ue.useState(0),[s,l]=ue.useState({}),[u,f]=ue.useState([]),h=ue.useMemo(()=>{console.log(` mainServices useMemo: Berechne neu mit ${n.length} Services`),n.length<20&&console.warn(` Nur ${n.length} Services im State (erwartet mindestens 36)!`);const T=n.filter(z=>{if(!z.serviceType)return console.warn(` Service ohne serviceType: ${z.id} - ${z.title}`),!1;const U=z.serviceType.includes("Shop Leistung"),q=z.serviceType.includes("Shop Titel Leistung");return U&&!q}).sort((z,U)=>z.title.localeCompare(U.title));if(console.log(` Hauptleistungen: ${T.length} (erwartet: 11) aus ${n.length} total Services`),T.length>0){console.log(" Hauptleistungen:",T.map(U=>`${U.title} (${U.serviceType})`));const z=T.filter(U=>{var q;return(q=U.serviceType)==null?void 0:q.includes("Unterleistung Backend")});console.log(` Davon gemischt (): ${z.length} (erwartet: 3)`,z.map(U=>U.title))}else n.length>0&&(console.error(` KRITISCH: Keine Hauptleistungen gefunden, obwohl ${n.length} Services im State sind!`),console.log(" Service-Typen:",[...new Set(n.map(z=>z.serviceType))]));return T},[n]),y=T=>{var z;return(z=T==null?void 0:T.serviceType)==null?void 0:z.includes("Unterleistung Backend")},g=ue.useMemo(()=>n.filter(T=>{var z;return(z=T.serviceType)==null?void 0:z.includes("Unterleistung Backend")}).sort((T,z)=>T.title.localeCompare(z.title)),[n]),S=h[i];ue.useEffect(()=>{t(vn())},[t]),ue.useEffect(()=>{if(S){l({standardValuePerUnit:S.standardValuePerUnit||0,minTime:S.minTime||0,waitTime:S.waitTime||0,efficiencyStart:S.efficiencyStart||0,efficiencyCap:S.efficiencyCap||0,efficiencyStepPercent:S.efficiencyStepPercent||1,maxProductivityPerDay:S.maxProductivityPerDay||0,materialType:S.materialType||"percent",materialValue:S.materialValue||15});const T=S.includedSubServices||[],z=g.filter(U=>{var q;return(q=U.includedIn)==null?void 0:q.includes(S.id)}).map(U=>U.id);f([...new Set([...T,...z])])}},[S,g]);const E=T=>{const{name:z,value:U,type:q}=T.target;l(X=>({...X,[z]:q==="number"?parseFloat(U)||0:U}))},P=T=>{f(z=>z.includes(T)?z.filter(U=>U!==T):[...z,T])},A=async()=>{if(S)try{await t(ks({serviceId:S.id,config:{standardValuePerUnit:s.standardValuePerUnit,minTime:s.minTime,waitTime:s.waitTime,efficiencyStart:s.efficiencyStart,efficiencyCap:s.efficiencyCap,efficiencyStepPercent:s.efficiencyStepPercent,maxProductivityPerDay:s.maxProductivityPerDay,materialType:s.materialType,materialValue:s.materialValue,includedSubServices:u,configOnboardingCompleted:!0,materialOnboardingCompleted:!0}})).unwrap(),console.log(` Service ${S.id} gespeichert, gehe zu Index ${i+1}`);const T=i+1;T<h.length?o(T):e&&e()}catch(T){console.error("Fehler beim Speichern:",T)}},w=()=>{i<h.length-1?o(i+1):e&&e()},b=()=>{i>0&&o(i-1)},k=T=>{const z=parseInt(T.target.value,10);isNaN(z)||o(z)};if(r)return d.jsx("div",{className:"loading",children:"Lade Leistungen..."});if(h.length===0)return d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:" Keine Haupt-Leistungen gefunden"}),d.jsx("p",{children:"Es gibt keine Shop-Leistungen, die konfiguriert werden mssen."}),e&&d.jsx("button",{onClick:e,style:{marginTop:"20px"},children:"Weiter "})]});if(!S)return null;h.filter(T=>T.configOnboardingCompleted).length;const C=(i+1)/h.length*100;return d.jsxs("div",{className:"card onboarding-card",style:{maxWidth:"900px",margin:"0 auto"},children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[d.jsxs("span",{children:["Leistung ",i+1," von ",h.length]}),d.jsxs("span",{children:[Math.round(C),"%"]})]}),d.jsx("div",{style:{background:"#e0e0e0",borderRadius:"4px",height:"8px",overflow:"hidden"},children:d.jsx("div",{style:{background:"#4CAF50",height:"100%",width:`${C}%`,transition:"width 0.3s ease"}})}),d.jsxs("div",{style:{marginTop:"15px"},children:[d.jsx("label",{style:{fontSize:"14px",color:"#666"},children:"Direkt zu Leistung springen:"}),d.jsx("select",{value:i,onChange:k,style:{width:"100%",padding:"10px",marginTop:"5px",borderRadius:"4px",border:"1px solid #ddd",fontSize:"14px"},children:h.map((T,z)=>d.jsxs("option",{value:z,children:[T.configOnboardingCompleted?" ":" ",z+1,". ",T.title," (",T.unit,")",y(T)?" ":""]},T.id))})]})]}),d.jsxs("h2",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"10px",marginBottom:"20px"},children:[" ",S.title,y(S)&&d.jsx("span",{style:{fontSize:"12px",background:"#9C27B0",color:"white",padding:"3px 8px",borderRadius:"12px",marginLeft:"10px",verticalAlign:"middle"},children:"+ Unterleistung"})]}),d.jsxs("p",{style:{color:"#666",marginBottom:"15px"},children:["Einheit: ",d.jsx("strong",{children:S.unit}),S.variant&&d.jsxs("span",{style:{marginLeft:"15px"},children:["Variante: ",S.variant]})]}),y(S)&&d.jsxs("div",{style:{background:"#F3E5F5",padding:"10px 15px",borderRadius:"8px",marginBottom:"15px",border:"1px solid #CE93D8",fontSize:"13px",color:"#6A1B9A"},children:[" Diese Leistung ist ",d.jsx("strong",{children:"sowohl eine Hauptleistung als auch eine Unterleistung"})," und kann in anderen Leistungen enthalten sein."]}),d.jsxs("div",{style:{background:"#E8F5E9",padding:"12px 15px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #A5D6A7",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"20px"},children:""}),d.jsxs("span",{style:{fontSize:"14px",color:"#2E7D32"},children:[d.jsx("strong",{children:"Default-Werte aus Stammdaten geladen"})," - Sie knnen diese anpassen oder bernehmen."]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{background:"#e3f2fd",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#1565c0",fontSize:"16px"},children:" Zeitwerte"}),d.jsxs("div",{style:{marginBottom:"12px"},children:[d.jsxs("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px"},children:["Zeit pro ",S.unit,":"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("input",{type:"number",name:"standardValuePerUnit",value:s.standardValuePerUnit,onChange:E,step:"0.1",min:"0",style:{width:"80px",padding:"8px"}}),d.jsxs("span",{children:["min/",S.unit]}),d.jsxs("span",{style:{fontSize:"12px",color:"#888"},children:["(Default: ",S.standardValuePerUnit||0,")"]})]})]}),d.jsxs("div",{style:{marginBottom:"12px"},children:[d.jsx("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px"},children:"Mindestzeit pro Tag:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("input",{type:"number",name:"minTime",value:s.minTime,onChange:E,step:"15",min:"0",style:{width:"80px",padding:"8px"}}),d.jsx("span",{children:"min"}),d.jsxs("span",{style:{fontSize:"12px",color:"#888"},children:["(Default: ",S.minTime||0,")"]})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px"},children:"Wartezeit (Trocknung):"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("input",{type:"number",name:"waitTime",value:s.waitTime,onChange:E,step:"15",min:"0",style:{width:"80px",padding:"8px"}}),d.jsx("span",{children:"min"}),d.jsxs("span",{style:{fontSize:"12px",color:"#888"},children:["(Default: ",S.waitTime||0,")"]})]})]})]}),d.jsxs("div",{style:{background:"#e8f5e9",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#2e7d32",fontSize:"16px"},children:" Effizienz-Steigerung"}),d.jsxs("div",{style:{marginBottom:"12px"},children:[d.jsx("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px"},children:"Effizienz beginnt ab:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("input",{type:"number",name:"efficiencyStart",value:s.efficiencyStart,onChange:E,step:"10",min:"0",style:{width:"80px",padding:"8px"}}),d.jsx("span",{children:S.unit})]})]}),d.jsxs("div",{style:{marginBottom:"12px"},children:[d.jsx("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px"},children:"Maximum (Deckel) bei:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("input",{type:"number",name:"efficiencyCap",value:s.efficiencyCap,onChange:E,step:"10",min:"0",style:{width:"80px",padding:"8px"}}),d.jsx("span",{children:S.unit})]})]}),d.jsxs("div",{children:[d.jsxs("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px"},children:["Steigerung pro 10 ",S.unit,":"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("input",{type:"number",name:"efficiencyStepPercent",value:s.efficiencyStepPercent,onChange:E,step:"0.5",min:"0",max:"10",style:{width:"80px",padding:"8px"}}),d.jsx("span",{children:"%"})]})]})]}),d.jsxs("div",{style:{background:"#fff3e0",padding:"15px",borderRadius:"8px"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#e65100",fontSize:"16px"},children:" Max. Produktivitt"}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px"},children:"Max. Einheiten pro Tag:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("input",{type:"number",name:"maxProductivityPerDay",value:s.maxProductivityPerDay,onChange:E,step:"10",min:"0",style:{width:"80px",padding:"8px"}}),d.jsxs("span",{children:[S.unit,"/Tag"]})]})]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{background:"#fce4ec",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#c2185b",fontSize:"16px"},children:" Material-Zuschlag"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[d.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[d.jsx("input",{type:"radio",name:"materialType",value:"none",checked:s.materialType==="none",onChange:E,style:{marginRight:"8px"}}),d.jsx("span",{children:"Kein Material"})]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[d.jsx("input",{type:"radio",name:"materialType",value:"percent",checked:s.materialType==="percent",onChange:E,style:{marginRight:"8px"}}),d.jsx("span",{children:"Prozent auf Lohnkosten"}),s.materialType==="percent"&&d.jsxs("div",{style:{marginLeft:"10px",display:"flex",alignItems:"center",gap:"5px"},children:[d.jsx("input",{type:"number",name:"materialValue",value:s.materialValue,onChange:E,min:"0",max:"100",style:{width:"60px",padding:"4px"}}),d.jsx("span",{children:"%"})]})]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[d.jsx("input",{type:"radio",name:"materialType",value:"fixed",checked:s.materialType==="fixed",onChange:E,style:{marginRight:"8px"}}),d.jsxs("span",{children:["Fester Betrag pro ",S.unit]}),s.materialType==="fixed"&&d.jsxs("div",{style:{marginLeft:"10px",display:"flex",alignItems:"center",gap:"5px"},children:[d.jsx("input",{type:"number",name:"materialValue",value:s.materialValue,onChange:E,min:"0",step:"0.1",style:{width:"60px",padding:"4px"}}),d.jsxs("span",{children:["/",S.unit]})]})]})]})]}),d.jsxs("div",{style:{background:"#f3e5f5",padding:"15px",borderRadius:"8px"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#7b1fa2",fontSize:"16px"},children:" Enthaltene Unterleistungen"}),d.jsx("p",{style:{fontSize:"12px",color:"#666",marginBottom:"10px"},children:"Welche Unterleistungen sind automatisch in dieser Leistung enthalten?"}),d.jsx("div",{style:{maxHeight:"250px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",background:"white"},children:g.map(T=>{var q;const z=u.includes(T.id),U=(q=T.includedIn)==null?void 0:q.includes(S.id);return d.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"8px 10px",borderBottom:"1px solid #eee",cursor:"pointer",background:z?"#f3e5f5":"white"},children:[d.jsx("input",{type:"checkbox",checked:z,onChange:()=>P(T.id),style:{marginRight:"10px"}}),d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{fontWeight:z?"bold":"normal"},children:T.title}),T.variant&&d.jsx("div",{style:{fontSize:"11px",color:"#888"},children:T.variant})]}),U&&d.jsx("span",{style:{fontSize:"10px",background:"#e8f5e9",padding:"2px 6px",borderRadius:"3px",color:"#2e7d32"},children:"Default"})]},T.id)})}),d.jsxs("div",{style:{marginTop:"10px",fontSize:"12px",color:"#666"},children:[u.length," Unterleistung(en) ausgewhlt"]})]})]})]}),d.jsxs("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{type:"button",onClick:b,disabled:i===0,style:{background:i===0?"#ccc":"#6c757d",cursor:i===0?"not-allowed":"pointer"},children:" Zurck"}),d.jsx("button",{type:"button",onClick:w,style:{background:"#9e9e9e"},children:"berspringen"})]}),d.jsx("div",{style:{display:"flex",gap:"10px"},children:d.jsx("button",{type:"button",onClick:A,children:i<h.length-1?"Speichern & Weiter ":"Speichern & Abschlieen "})})]})]})}function bR({onComplete:e}){const t=nr(),n=_e(C=>C.settings.specialServices),r=_e(C=>C.services.services),i=_e(C=>C.settings.loading),[o,s]=ue.useState(0),[l,u]=ue.useState({affectsService:[],requiredService:null,factor:1}),f=ue.useMemo(()=>r.filter(C=>C.serviceType?C.serviceType.includes("Shop Titel Leistung")||C.serviceType.includes("Shop Leistung"):!1).sort((C,T)=>C.title.localeCompare(T.title)),[r]),h=ue.useMemo(()=>r.filter(C=>{var T;return(T=C.serviceType)==null?void 0:T.includes("Unterleistung Backend")}).sort((C,T)=>C.title.localeCompare(T.title)),[r]),y=n[o];ue.useEffect(()=>{t(Pr()),t(vn())},[t]),ue.useEffect(()=>{y&&u({affectsService:y.affectsService||[],requiredService:y.requiredService||null,factor:y.factor||1})},[y]);const g=C=>{u(T=>({...T,affectsService:T.affectsService.includes(C)?T.affectsService.filter(z=>z!==C):[...T.affectsService,C]}))},S=C=>{const T=C.target.value;u(z=>({...z,requiredService:T===""?null:T}))},E=async()=>{if(y)try{await ge.updateSpecialNoteConfig(y.id,{affectsService:l.affectsService,requiredService:l.requiredService,factor:l.factor,onboardingCompleted:!0}),o<n.length-1?s(o+1):e&&e()}catch(C){console.error("Fehler beim Speichern:",C)}},P=()=>{o<n.length-1?s(o+1):e&&e()},A=()=>{o>0&&s(o-1)},w=C=>{const T=parseInt(C.target.value,10);isNaN(T)||s(T)};if(i)return d.jsx("div",{className:"loading",children:"Lade Sonderangaben..."});if(n.length===0)return d.jsxs("div",{className:"card",children:[d.jsx("h2",{children:" Keine Sonderangaben gefunden"}),d.jsx("p",{children:"Es wurden keine Sonderangaben in der Datenbank gefunden."}),e&&d.jsx("button",{onClick:e,style:{marginTop:"20px"},children:"Weiter "})]});if(!y)return null;n.filter(C=>C.onboardingCompleted).length;const b=(o+1)/n.length*100,k=h.find(C=>C.id===l.requiredService);return d.jsxs("div",{className:"card onboarding-card",style:{maxWidth:"800px",margin:"0 auto"},children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[d.jsxs("span",{children:["Sonderangabe ",o+1," von ",n.length]}),d.jsxs("span",{children:[Math.round(b),"%"]})]}),d.jsx("div",{style:{background:"#e0e0e0",borderRadius:"4px",height:"8px",overflow:"hidden"},children:d.jsx("div",{style:{background:"#ff9800",height:"100%",width:`${b}%`,transition:"width 0.3s ease"}})}),d.jsxs("div",{style:{marginTop:"15px"},children:[d.jsx("label",{style:{fontSize:"14px",color:"#666"},children:"Direkt zu Sonderangabe springen:"}),d.jsx("select",{value:o,onChange:w,style:{width:"100%",padding:"10px",marginTop:"5px",borderRadius:"4px",border:"1px solid #ddd",fontSize:"14px"},children:n.map((C,T)=>d.jsxs("option",{value:T,children:[C.onboardingCompleted?" ":" ",T+1,". ",C.title]},C.id))})]})]}),d.jsxs("h2",{style:{borderBottom:"2px solid #ff9800",paddingBottom:"10px",marginBottom:"20px"},children:[" ",y.title]}),y.uxDescription&&d.jsx("div",{style:{background:"#fff3e0",padding:"15px",borderRadius:"8px",marginBottom:"25px",border:"1px solid #ffe0b2"},children:d.jsxs("p",{style:{margin:0,fontSize:"14px",color:"#e65100"},children:[" ",y.uxDescription]})}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},children:[d.jsx("div",{children:d.jsxs("div",{style:{background:"#e3f2fd",padding:"15px",borderRadius:"8px"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#1565c0",fontSize:"16px"},children:" Fr welche Leistungen relevant?"}),d.jsx("p",{style:{fontSize:"12px",color:"#666",marginBottom:"10px"},children:"Whlen Sie die Leistungen, bei denen diese Sonderangabe abgefragt werden soll:"}),d.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",background:"white"},children:f.map(C=>{var U;const T=l.affectsService.includes(C.id),z=(U=y.affectsService)==null?void 0:U.includes(C.id);return d.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"10px",borderBottom:"1px solid #eee",cursor:"pointer",background:T?"#e3f2fd":"white"},children:[d.jsx("input",{type:"checkbox",checked:T,onChange:()=>g(C.id),style:{marginRight:"10px"}}),d.jsx("div",{style:{flex:1},children:d.jsx("div",{style:{fontWeight:T?"bold":"normal"},children:C.title})}),z&&d.jsx("span",{style:{fontSize:"10px",background:"#e8f5e9",padding:"2px 6px",borderRadius:"3px",color:"#2e7d32"},children:"Default"})]},C.id)})}),d.jsxs("div",{style:{marginTop:"10px",fontSize:"12px",color:"#666"},children:[l.affectsService.length," Leistung(en) ausgewhlt"]})]})}),d.jsxs("div",{children:[d.jsxs("div",{style:{background:"#f3e5f5",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#7b1fa2",fontSize:"16px"},children:" Aktiviert Zusatzleistung"}),d.jsx("p",{style:{fontSize:"12px",color:"#666",marginBottom:"10px"},children:"Welche Unterleistung wird aktiviert, wenn diese Sonderangabe gewhlt wird?"}),d.jsxs("select",{value:l.requiredService||"",onChange:S,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ddd",fontSize:"14px"},children:[d.jsx("option",{value:"",children:"-- Keine Zusatzleistung --"}),h.map(C=>d.jsxs("option",{value:C.id,children:[C.title,C.id===y.requiredService&&" (Default)"]},C.id))]}),k&&d.jsxs("div",{style:{marginTop:"10px",padding:"10px",background:"#ede7f6",borderRadius:"4px",fontSize:"13px"},children:[d.jsx("strong",{children:"Gewhlt:"})," ",k.title,k.variant&&d.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:k.variant})]})]}),d.jsxs("div",{style:{background:"#e8f5e9",padding:"15px",borderRadius:"8px",border:"1px solid #c8e6c9"},children:[d.jsx("h3",{style:{margin:"0 0 10px 0",color:"#2e7d32",fontSize:"16px"},children:" Berechnung"}),k?d.jsxs("div",{style:{fontSize:"13px",color:"#1b5e20"},children:[d.jsxs("p",{style:{margin:"0 0 12px 0"},children:["Wird als ",d.jsx("strong",{children:"separate Position"})," kalkuliert:"]}),d.jsxs("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",border:"1px solid #a5d6a7"},children:[d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"12px"},children:[k.standardValuePerUnit&&d.jsxs("div",{children:[d.jsx("span",{style:{color:"#666"},children:"Zeit/Einheit:"})," ",d.jsxs("strong",{children:[k.standardValuePerUnit," min/",k.unit||"m"]})]}),k.minTime&&d.jsxs("div",{children:[d.jsx("span",{style:{color:"#666"},children:"Mindestzeit:"})," ",d.jsxs("strong",{children:[k.minTime," min"]})]}),k.waitTime>0&&d.jsxs("div",{children:[d.jsx("span",{style:{color:"#666"},children:"Wartezeit:"})," ",d.jsxs("strong",{children:[k.waitTime," min"]})]}),k.materialStandard&&d.jsxs("div",{children:[d.jsx("span",{style:{color:"#666"},children:"Material:"})," ",d.jsx("strong",{children:k.materialStandard})]}),k.efficiencyStart&&d.jsxs("div",{children:[d.jsx("span",{style:{color:"#666"},children:"Effizienz ab:"})," ",d.jsxs("strong",{children:[k.efficiencyStart," ",k.unit||"m"]})]}),k.efficiencyCap&&d.jsxs("div",{children:[d.jsx("span",{style:{color:"#666"},children:"Effizienz-Deckel:"})," ",d.jsxs("strong",{children:[k.efficiencyCap," ",k.unit||"m"]})]})]}),k.formula&&d.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px dashed #c8e6c9",fontSize:"11px",color:"#666"},children:d.jsxs("em",{children:["Formel: ",k.formula]})})]})]}):d.jsxs("p",{style:{margin:0,fontSize:"13px",color:"#1b5e20"},children:["Diese Sonderangabe hat keine Zusatzleistung. Sie dient nur als ",d.jsx("strong",{children:"Information"})," und wird ggf. separat nach tatschlichem Aufwand abgerechnet."]})]})]})]}),d.jsxs("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{type:"button",onClick:A,disabled:o===0,style:{background:o===0?"#ccc":"#6c757d",cursor:o===0?"not-allowed":"pointer"},children:" Zurck"}),d.jsx("button",{type:"button",onClick:P,style:{background:"#9e9e9e"},children:"berspringen"})]}),d.jsx("div",{style:{display:"flex",gap:"10px"},children:d.jsx("button",{type:"button",onClick:E,children:o<n.length-1?"Speichern & Weiter ":"Speichern & Abschlieen "})})]})]})}const Me={COMPANY:"company",SUB_SERVICES:"sub_services",SERVICES:"services",SPECIAL_NOTES:"special_notes",COMPLETE:"complete"};function ns({currentStep:e,onNavigate:t,services:n,companySettings:r,onResetDB:i}){const o=f=>({background:f?"#1976D2":"#2196F3",border:f?"3px solid #0d47a1":"none",cursor:"pointer",padding:"8px 16px",borderRadius:"20px",color:"white",fontSize:"14px",fontWeight:f?"bold":"normal"}),s=f=>({...o(f),background:f?"#7B1FA2":"#9C27B0",border:f?"3px solid #4A148C":"none"}),l=f=>({...o(f),background:f?"#388E3C":"#4CAF50",border:f?"3px solid #1B5E20":"none"}),u=f=>({...o(f),background:f?"#F57C00":"#ff9800",border:f?"3px solid #E65100":"none"});return d.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"center",padding:"10px",background:"#f5f5f5",borderRadius:"8px"},children:[d.jsx("button",{onClick:()=>t(Me.COMPANY),style:o(e===Me.COMPANY),children:" Unternehmen"}),d.jsx("button",{onClick:()=>t(Me.SUB_SERVICES),style:s(e===Me.SUB_SERVICES),children:" Unterleistungen"}),d.jsx("button",{onClick:()=>t(Me.SERVICES),style:l(e===Me.SERVICES),children:" Leistungen"}),d.jsx("button",{onClick:()=>t(Me.SPECIAL_NOTES),style:u(e===Me.SPECIAL_NOTES),children:" Sonderangaben"}),d.jsx("button",{onClick:()=>t(Me.COMPLETE),style:{background:e===Me.COMPLETE?"#666":"#999",cursor:"pointer",padding:"8px 16px",borderRadius:"20px",color:"white",fontSize:"14px",border:e===Me.COMPLETE?"3px solid #333":"none"},children:" Kalkulator"}),d.jsxs("span",{style:{marginLeft:"auto",fontSize:"12px",color:"#666"},children:["Services: ",(n==null?void 0:n.length)||0," | Stundenlohn: ",(r==null?void 0:r.laborRate)||65," /h"]}),d.jsx("button",{onClick:i,style:{background:"#dc3545",cursor:"pointer",padding:"8px 12px",borderRadius:"20px",color:"white",fontSize:"12px",border:"none"},title:"Datenbank zurcksetzen",children:" DB Reset"})]})}function _R(){const e=nr(),t=_e(C=>C.objects.objects),n=_e(C=>C.services.services),r=_e(C=>C.settings.customerApproval),i=_e(C=>C.calculations.loading),o=_e(C=>C.companySettings.settings),s=_e(C=>C.settings.specialServices),[l,u]=ue.useState(null),[f,h]=ue.useState(!1),y=C=>{h(!0),u(C)};ue.useEffect(()=>{e(Il()),e(vn()),e(Rl()),e(Pr()),e(Es())},[e]),ue.useEffect(()=>{if(f||l!==null||o===null||n.length===0)return;if(!o||!o.onboardingCompleted){u(Me.COMPANY);return}const C=n.filter(X=>{var Ae,ke;const oe=(Ae=X.serviceType)==null?void 0:Ae.includes("Unterleistung Backend"),Ce=(ke=X.serviceType)==null?void 0:ke.includes("Shop Leistung");return oe&&!Ce}),T=C.filter(X=>!X.subServiceConfigOnboardingCompleted);if(console.log(` Reine Unterleistungen: ${C.length}, unkonfiguriert: ${T.length}`),T.length>0){u(Me.SUB_SERVICES);return}const z=n.filter(X=>{var oe,Ce;return((oe=X.serviceType)==null?void 0:oe.includes("Shop Leistung"))&&!((Ce=X.serviceType)!=null&&Ce.includes("Shop Titel Leistung"))}),U=z.filter(X=>!X.configOnboardingCompleted);if(console.log(` Hauptleistungen: ${z.length}, unkonfiguriert: ${U.length}`),U.length>0){u(Me.SERVICES);return}const q=s.filter(X=>!X.onboardingCompleted);if(console.log(` Sonderangaben: ${s.length}, unkonfiguriert: ${q.length}`),q.length>0){u(Me.SPECIAL_NOTES);return}console.log(" Onboarding komplett - alle Services konfiguriert"),u(Me.COMPLETE)},[o,n,s,l,f]);const g=ue.useRef(null),S=ue.useRef(!1),E=ue.useCallback(async()=>{if(S.current){console.log("Berechnung luft bereits, berspringe");return}try{S.current=!0,await dR()}catch(C){console.error("Calculation error:",C)}finally{S.current=!1}},[]);ue.useEffect(()=>(t.length>0&&n.length>0&&(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{E()},500)),()=>{g.current&&clearTimeout(g.current)}),[t,r,n.length,E]);const P=async()=>{try{const C=await window.indexedDB.databases();for(const T of C)T.name&&T.name.includes("offercalculator")&&(window.indexedDB.deleteDatabase(T.name),console.log("Gelscht:",T.name));alert("Datenbank gelscht. Seite wird neu geladen..."),window.location.reload()}catch(C){console.error("Fehler beim Lschen:",C)}},A=()=>{u(Me.SUB_SERVICES),e(vn())},w=()=>{u(Me.SERVICES),e(vn())},b=()=>{u(Me.SPECIAL_NOTES),e(Pr())},k=()=>{u(Me.COMPLETE),e(vn()),e(Pr()),E()};return l===Me.COMPANY?d.jsxs("div",{className:"app",children:[d.jsx("h1",{children:" Malerleistungen Kalkulator"}),d.jsx(ns,{currentStep:l,onNavigate:y,services:n,companySettings:o,onResetDB:P}),d.jsx(xR,{onComplete:A})]}):l===Me.SUB_SERVICES?d.jsxs("div",{className:"app",children:[d.jsx("h1",{children:" Malerleistungen Kalkulator"}),d.jsx(ns,{currentStep:l,onNavigate:y,services:n,companySettings:o,onResetDB:P}),d.jsx(SR,{onComplete:w})]}):l===Me.SERVICES?d.jsxs("div",{className:"app",children:[d.jsx("h1",{children:" Malerleistungen Kalkulator"}),d.jsx(ns,{currentStep:l,onNavigate:y,services:n,companySettings:o,onResetDB:P}),d.jsx(wR,{onComplete:b})]}):l===Me.SPECIAL_NOTES?d.jsxs("div",{className:"app",children:[d.jsx("h1",{children:" Malerleistungen Kalkulator"}),d.jsx(ns,{currentStep:l,onNavigate:y,services:n,companySettings:o,onResetDB:P}),d.jsx(bR,{onComplete:k})]}):l===null?d.jsxs("div",{className:"app",children:[d.jsx("h1",{children:" Malerleistungen Kalkulator"}),d.jsx("div",{className:"loading",children:"Initialisiere..."})]}):d.jsxs("div",{className:"app",children:[d.jsx("h1",{children:" Malerleistungen Kalkulator"}),d.jsx(ns,{currentStep:l,onNavigate:y,services:n,companySettings:o,onResetDB:P}),d.jsx(pR,{}),t.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(hR,{}),d.jsx(mR,{}),d.jsx(yR,{})]}),i&&d.jsx("div",{className:"loading",children:"Berechne..."}),t.length>0&&d.jsx(gR,{})]})}async function kR(){var e,t;try{console.log("Initialisiere RxDB...");const n=await kI(),r=await n.collections.services.count().exec();r===0?(console.log("Datenbank ist leer, lade Initial-Daten..."),await Av(n,Bn),console.log(` ${((e=Bn.services)==null?void 0:e.length)||0} Services geladen`)):(console.log(`Datenbank enthlt bereits ${r} Services`),r<10&&(console.log("Wenige Services gefunden, lade Daten neu..."),await n.collections.services.find().remove(),await n.collections.specialServices.find().remove(),await n.collections.factors.find().remove(),await Av(n,Bn),console.log(` ${((t=Bn.services)==null?void 0:t.length)||0} Services neu geladen`)));const i=await n.collections.services.find().exec();console.log("Test: Services in DB:",i.length),i.length>0&&console.log("Erste 3 Services:",i.slice(0,3).map(s=>({id:s.id,title:s.title})));const o=await n.collections.specialServices.find().exec();if(console.log("Test: SpecialServices in DB:",o.length),o.length>0)console.log("Erste SpecialService:",o[0].toJSON());else if(console.warn(" Keine SpecialServices in DB gefunden!"),console.log("Seede SpecialServices manuell..."),Bn.specialServices&&Bn.specialServices.length>0){for(const l of Bn.specialServices)try{await n.collections.specialServices.insert({...l,createdAt:Date.now(),updatedAt:Date.now()})}catch{console.log("SpecialService existiert bereits:",l.id)}const s=await n.collections.specialServices.find().exec();console.log("Nach manuellem Seeding: SpecialServices in DB:",s.length)}Df.createRoot(document.getElementById("root")).render(d.jsx(_b.StrictMode,{children:d.jsx(ek,{store:rp,children:d.jsx(_R,{})})})),console.log(" App erfolgreich gestartet")}catch(n){console.error(" Failed to initialize app:",n),document.getElementById("root").innerHTML=`
      <div style="padding: 20px; color: red;">
        <h1>Fehler beim Starten der Anwendung</h1>
        <p>${n.message}</p>
        <p>Bitte ffnen Sie die Browser-Konsole fr weitere Details.</p>
      </div>
    `}}kR();
